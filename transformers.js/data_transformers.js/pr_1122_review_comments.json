[
    {
        "title": "Minimal fixes for type declarations to resolve errors when importing transformers.js via typescript (partially resolves #1093)"
    },
    {
        "author": {
            "login": "PR Description"
        },
        "body": "Hey; I hope the holiday season is treating you well.\r\n\r\nAs of 3.1.0, `transformers.js` will result in errors when importing it via typescript (see #1093). Some of these errors are due to limitations in how typescript interprets jsdoc type declarations, and some are architectural design issues with how subclasses extending from a parent class can have methods with differing call/return signatures. (See attached error log below).\r\n\r\nI notice #1081 is still open - that PR would make errors like this more visible, but it's still yet to be merged, and that's fine (there's a lot of changes in there to review, so I understand the wait).\r\n\r\nIn the mean time, I've applied the minimum possible fix without resorting to `@ts-ignore` and without any changes to architecture/design to at least get transformers.js usable via typescript.\r\n\r\nThis only partially resolves #1093, because the other errors they report with HTML elements not being found are partially issues with their own typescript config - they should add \"DOM\" to \"lib\" in their tsconfig (or transfomers.js should provide duck typed shims for HTMLCanvasElement, etc. but this is out of scope of this minimal fix PR).\r\n\r\nThanks!\r\n\r\n```\r\nnode_modules/@huggingface/transformers/types/models/auto/processing_auto.d.ts:32:76 - error TS2304: Cannot find name 'PretrainedProcessorOptions'.\r\n\r\n32     static from_pretrained(pretrained_model_name_or_path: string, options: PretrainedProcessorOptions): Promise<Processor>;\r\n                                                                              ~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n\r\nnode_modules/@huggingface/transformers/types/models/mgp_str/processing_mgp_str.d.ts:52:5 - error TS2416: Property 'batch_decode' in type 'MgpstrProcessor' is not assignable to the same property in base type 'Processor'.\r\n  Type '([char_logits, bpe_logits, wp_logits]: Tensor[]) => { generated_text: string[]; scores: number[]; char_preds: string[]; bpe_preds: string[]; wp_preds: string[]; }' is not assignable to type '(...args: any[]) => string[]'.\r\n    Type '{ generated_text: string[]; scores: number[]; char_preds: string[]; bpe_preds: string[]; wp_preds: string[]; }' is missing the following properties from type 'string[]': length, pop, push, concat, and 35 more.\r\n\r\n52     batch_decode([char_logits, bpe_logits, wp_logits]: import(\"../../utils/tensor.js\").Tensor[]): {  \r\n       ~~~~~~~~~~~~\r\n\r\nnode_modules/@huggingface/transformers/types/models/phi3_v/processing_phi3_v.d.ts:11:70 - error TS2339: \r\nProperty 'padding' does not exist on type 'any[]'.\r\n\r\n11     _call(text: string | string[], images?: RawImage | RawImage[], { padding, truncation, num_crops, \r\n}?: any[]): Promise<any>;\r\n                                                                        ~~~~~~~\r\n\r\nnode_modules/@huggingface/transformers/types/models/phi3_v/processing_phi3_v.d.ts:11:79 - error TS2339: \r\nProperty 'truncation' does not exist on type 'any[]'.\r\n\r\n11     _call(text: string | string[], images?: RawImage | RawImage[], { padding, truncation, num_crops, \r\n}?: any[]): Promise<any>;\r\n                                                                                 ~~~~~~~~~~\r\n\r\nnode_modules/@huggingface/transformers/types/models/phi3_v/processing_phi3_v.d.ts:11:91 - error TS2339: \r\nProperty 'num_crops' does not exist on type 'any[]'.\r\n\r\n11     _call(text: string | string[], images?: RawImage | RawImage[], { padding, truncation, num_crops, \r\n}?: any[]): Promise<any>;\r\n                                                                                             ~~~~~~~~~  \r\n\r\n[11:34:32 am] Found 5 errors. Watching for file changes.\r\n```"
    },
    {
        "author": {
            "login": "xenova"
        },
        "body": "Thanks for this! Reviewing :)"
    },
    {
        "author": {
            "login": "HuggingFaceDocBuilderDev"
        },
        "body": "The docs for this PR live [here](https://moon-ci-docs.huggingface.co/docs/transformers.js/pr_1122). All of your documentation changes will be reflected on that endpoint. The docs are available until 30 days after the last update."
    }
]