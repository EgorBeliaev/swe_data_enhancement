[
    {
        "title": "add fastlane for F-Droid"
    },
    {
        "author": {
            "login": "PR Description"
        },
        "body": "\u6309\u63a8\u8350\u628a flutter \u4f5c\u4e3a submodule \u6dfb\u52a0\u5230\u4ed3\u5e93\u91cc\uff0c\u7136\u540e F-Droid \u5728\u6784\u5efa\u7684\u65f6\u5019\u7528 submodule \u7684 flutter \u8fdb\u884c\u7f16\u8bd1\r\n\r\n\u7406\u8bba\u4e0a\u5e94\u8be5\u628a workflow \u7684 flutter \u4e5f\u6362\u6210 submodule \u7684 flutter\uff0c\u4f46\u662f\u672c\u5730 IDE \u663e\u793a\u672a\u6b63\u5e38\u5b89\u88c5\u65e0\u6cd5\u914d\u7f6e\uff0c\u6211\u5c31\u5148\u6ca1\u6539\r\n\r\n\u7248\u672c\u53f7\u7684 +1 \u5e94\u8be5\u6ca1\u6709\u4ec0\u4e48\u7528\u5904\uff0cF-Droid \u9760\u8fd9\u4e2a\u7248\u672c\u53f7\u5224\u65ad\u66f4\u65b0\uff0c\u6211\u5c31\u5220\u6389\u4e86\r\n\r\n\u4e0d\u8fc7\u5177\u4f53\u66f4\u65b0\u673a\u5236\u4e0d\u77e5\u9053\u662f\u4ec0\u4e48\r\n\r\n\u5269\u4e0b\u7684\u5c31\u662f\u8981\u5728 Gitlab \u91cc\u9762\u5bf9 fdroiddata \u4ed3\u5e93\u63d0\u4e00\u4e2a merge request\uff0c\u90a3\u4e2a\u8fd8\u6ca1\u5199\r\n\r\n\u5c31\u662f\u8fd9\u4e2a\u6587\u4ef6\uff1ahttps://gitlab.com/ErBWs/fdroiddata/-/blob/io.github.Predidit.Kazumi/metadata/io.github.Predidit.Kazumi.yml"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u8d85\u68d2\u7684\u5de5\u4f5c\n\n\u4e0d\u8fc7\u7248\u672c\u53f7\u4e2d\u7684 +1 \u4e0d\u80fd\u5220\u53bb\n\n\u8fd9\u662f msix \u6784\u5efa\u4e2d\u8981\u6c42\u7684\u7248\u672c\u53f7\u7684\u7b2c\u56db\u4f4d\n\n\u5220\u53bb\u4f1a\u4f7f windows \u7684\u53d1\u5e03\u6d41\u7a0b\u5931\u8d25"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "\u539f\u6765\u5982\u6b64"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u53e6\u5916\u76f4\u63a5\u5c06 flutter \u4f5c\u4e3a submodules \u5f15\u5165\u4e3b\u7ebf\u4ed3\u5e93\u662f\u6700\u4f73\u5b9e\u8df5\u5417\u3002\n\n\u6211\u6ce8\u610f\u5230\u5176\u4ed6\u6709\u53d1\u5e03\u5230 F-Droid \u7684 app \u6ca1\u6709\u8fd9\u4e48\u505a\uff0c\u4f8b\u5982 pilipala\u3002\n\n\u8fd9\u4e5f\u8ba9\u6211\u4eec\u5931\u53bb\u4e86\u5bf9 flutter \u7248\u672c\u7684\u63a7\u5236\u3002"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "flutter \u7248\u672c\u901a\u8fc7\u63a7\u5236 submodule \u7684 commit \u8fdb\u884c\r\n\r\n\u76ee\u524d channel stable \u6700\u65b0 commit \u5c31\u662f 3.27.1\r\n\r\n\u8fd9\u662f\u6211\u53c2\u8003\u7684 MR \u4e2d\u5b98\u65b9\u4eba\u5458\u7ed9\u51fa\u7684\u5efa\u8bae\uff0c\u5982\u679c\u4e0d\u7528 submodule \u7684\u8bdd\u5c31\u9700\u8981\u6bcf\u6b21\u66f4\u65b0 flutter \u7248\u672c\u90fd\u8981\u5bf9 fdroiddata \u4ed3\u5e93\u63d0\u4ea4\u4e00\u6b21 MR\r\n<img width=\"1161\" alt=\"image\" src=\"https://github.com/user-attachments/assets/86ac1e94-40e0-40c6-a7c4-b52963794af5\" />\r\n"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u6211\u4eec\u80fd\u5426\u79fb\u52a8 .flutter \u6587\u4ef6\u5939\u5230 fastlane \u76ee\u5f55\u4e0b, \u8fd9\u53ea\u548c F-Droid \u6784\u5efa\u76f8\u5173\uff0c\u5e76\u4e14\u5728\u6839\u76ee\u5f55\u4e0b\u53ef\u80fd\u4f1a\u9020\u6210\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u8bef\u89e3"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "\u7406\u8bba\u4e0a\u53ef\u4ee5\u3002\r\n\r\n\u6211\u4e00\u5f00\u59cb\u60f3\u7684\u662f\u628a workflow \u7684 setup flutter \u4fee\u6539\u4e3a\u4f7f\u7528 submodule \u800c\u4e0d\u662f action \u6765\u4fdd\u6301\u7edf\u4e00\uff0cF-Droid \u901a\u8fc7\u5bf9\u6bd4\u5b83\u4eec\u6784\u5efa\u7684\u548c GitHub action \u6784\u5efa\u7684 apk \u6587\u4ef6\u662f\u5426\u4e00\u81f4\u6765\u51b3\u5b9a\u662f\u5426\u8981\u91cd\u65b0\u7b7e\u540d\r\n\r\n\u53e6\u5916\u6216\u8bb8\u53ef\u4ee5\u66f4\u65b0\u4e00\u4e0b README \u4e2d\u7684\u622a\u56fe"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u6211\u4eec\u53ef\u4ee5\u5148\u4fdd\u7559\u8fd9\u79cd\u4e0d\u4e00\u81f4\u5e76\u79fb\u52a8 flutter submodules \u7684\u4f4d\u7f6e\uff0c\u8fd9\u80fd\u8ba9\u672c\u5730\u5de5\u4f5c\u73af\u5883\u548c workflow \u4fdd\u6301\u4e00\u81f4\r\n\r\n\u5982\u679c\u540e\u7eed\u6709\u9700\u8981\u6211\u4eec\u53ef\u4ee5\u518d\u66f4\u6539 workflow\r\n\r\n\u6211\u4eec\u786e\u5b9e\u5e94\u8be5\u66f4\u65b0 README \u622a\u56fe\u4e86\uff0c\u5728\u5c1d\u8bd5\u4e0a\u67b6 F-Droid \u7684\u8fc7\u7a0b\u4e2d\u4e00\u5b9a\u4f1a\u6709\u4e00\u4e9b\u622a\u56fe\uff0c\u4f60\u6709\u5174\u8da3\u4e00\u5e76\u66f4\u65b0\u5417"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "OK\uff0c\u665a\u70b9\u4fee\u6539"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "@Predidit \u73b0\u5728\u8c8c\u4f3c\u6709\u4e24\u4e2a\u95ee\u9898\r\n\r\n1. fdroid \u9700\u8981\u542b\u6709 fastlane \u6587\u4ef6\u5939\u7684\u5de5\u7a0b\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a PR \u5408\u5e76\u540e\u7684\u5de5\u7a0b\u6587\u4ef6\uff0c\u4f46\u662f\u4e0e 1.5.1 release \u7684 apk \u4e8c\u8fdb\u5236\u6587\u4ef6\u4f1a\u6709\u4e0d\u540c\uff0c\u5bf9\u6bd4\u5931\u8d25\uff0c\u9700\u8981\u7b49\u4e0b\u4e00\u6b21 release\r\n2. fdroid \u7f16\u8bd1\u51fa\u6765\u7684\u4ea7\u7269\u8c8c\u4f3c\u4e0d\u542b\u6709\u7b7e\u540d\uff0c\u6211\u4e0d\u6e05\u695a\u8fd9\u662f\u54ea\u91cc\u51fa\u4e86\u95ee\u9898\r\n\r\n\u76f8\u5173\u94fe\u63a5\uff1a[MR](https://gitlab.com/fdroid/fdroiddata/-/merge_requests/18472), [Gitlab Pipeline](https://gitlab.com/ErBWs/fdroiddata/-/jobs/8830220734)\r\n\r\n\u8fd9\u662f 1.5.1 release \u7684\u7b7e\u540d\r\n```cmd\r\nMBP :: ~/Downloads \u00bb apksigner verify --print-certs Kazumi_android_1.5.1.apk | grep SHA-256\r\nSigner #1 certificate SHA-256 digest: f4633dcf19ca0ccac7e730c57124a7acca57ce52b87913f9620d6bb718551d98\r\n```\r\n\u8fd9\u662f Gitlab Pipeline \u7f16\u8bd1\u4ea7\u7269\u7684\u7b7e\u540d\r\n```cmd\r\nMBP :: ~/Downloads \u00bb apksigner verify --print-certs com.predidit.kazumi_2001.apk | grep SHA-256\r\nDOES NOT VERIFY\r\nERROR: Missing META-INF/MANIFEST.MF\r\n```"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u6211\u4e0d\u4e86\u89e3 F-Droid \u7684\u5de5\u4f5c\u65b9\u5f0f\uff0c\u53ef\u80fd\u5e2e\u4e0d\u5230\u4f60"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "<img width=\"1207\" alt=\"image\" src=\"https://github.com/user-attachments/assets/2e24713c-33da-4969-b167-4a24ae8cdd15\" />\r\n\u7ed9\u6253\u4e86\u4e2a non-free tag\u3002\u662f\u56e0\u4e3a\u9650\u5236\u7b2c\u4e09\u65b9\u5546\u4e1a\u5316\uff1f"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "@Predidit \u6240\u4ee5\u4ed6\u8ba4\u4e3a\u8fd9\u53e5\u8bdd\u8fdd\u53cd\u4e86 GPL-3.0 \u7684\u534f\u8bae\r\n<img width=\"1169\" alt=\"image\" src=\"https://github.com/user-attachments/assets/c3069fe8-0ef1-4db8-bae7-ab18150e658c\" />\r\n"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u7406\u8bba\u4e0a\u8fd9\u4e2a\u6761\u6b3e\u5c31\u662f\u8fdd\u53cd GPL3.0 \u534f\u8bae\u7684\uff0c\u6211\u6765\u5220\u53bb\u5b83"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "<img width=\"1081\" alt=\"image\" src=\"https://github.com/user-attachments/assets/f9c24eed-f79c-4a14-9a0c-10fcdaf650fd\" />"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u4e5f\u79fb\u9664\u4e86\uff0c\u4e0d\u8fc7\u4e0a\u67b6 oneAnime \u662f\u4ee5\u540e\u7684\u4e8b\u60c5\u4e86"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "@Predidit \u770b\u8d77\u6765 F-Droid \u9700\u8981\u914d\u7f6e android/app/build.gradle \u4e2d\u7684\u5b89\u5353\u7b7e\u540d"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u542c\u4e0a\u53bb\u8fd9\u610f\u5473\u7740\u6211\u4eec\u8981\u516c\u5f00\u5f53\u524d\u7b7e\u540d\uff1f"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "\u5f53\u524d\u7b7e\u540d\u662f signingConfig signingConfigs.debug\uff0c\u4e0d\u88ab\u8ba4\u4e3a\u662f\u6709\u6548\u7b7e\u540d\uff0c\u8c8c\u4f3c\u9700\u8981\u7528 GitHub secrets \u5b58\u50a8\u7b7e\u540d\u6587\u4ef6\uff0c\u6216\u8bb8\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b pilipala \u7684\u529e\u6cd5\uff1f\r\n\r\nsignpath \u53ef\u4ee5 sign \u5b89\u5353\u5417\uff1f"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u6211\u4eec\u7684\u7b7e\u540d\u672c\u6765\u5c31\u5728 Github secrets \r\n\r\n\u53c2\u8003 release workflow \u4e2d sign APK \u7684\u90e8\u5206\r\n\r\nsignpath \u4e0d\u80fd\u7b7e apk"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "\u8fd9\u662f pipeline \u7684 log\r\n\r\n```\r\n==== detail begin ====\r\nsignature copying failed: APK Signing Block offset < central directory offset\r\nComparing reference APK to unsigned APK...\r\nUnexpected diff output:\r\nOnly in /tmp/tmpw6hg07aj/tmp_binaries_com.predidit.kazumi_2001.binary/content/META-INF: ANDROIDD.RSA\r\nOnly in /tmp/tmpw6hg07aj/tmp_binaries_com.predidit.kazumi_2001.binary/content/META-INF: ANDROIDD.SF\r\nOnly in /tmp/tmpw6hg07aj/tmp_binaries_com.predidit.kazumi_2001.binary/content/META-INF: MANIFEST.MF\r\nBinary files /tmp/tmpw6hg07aj/tmp_binaries_com.predidit.kazumi_2001.binary/content/lib/arm64-v8a/libapp.so and /tmp/tmpw6hg07aj/tmp_com.predidit.kazumi_2001/content/lib/arm64-v8a/libapp.so differ\r\nBinary files /tmp/tmpw6hg07aj/tmp_binaries_com.predidit.kazumi_2001.binary/content/lib/arm64-v8a/libmpv.so and /tmp/tmpw6hg07aj/tmp_com.predidit.kazumi_2001/content/lib/arm64-v8a/libmpv.so differ\r\n==== detail end ====\r\n```\r\n\r\nhttps://github.com/obfusk/apksigcopier#what-does-the-apk-signing-block-offset--central-directory-offset-error-mean\r\n\r\n\u770b\u6765\u6211\u7406\u89e3\u9519\u4e86\uff0c\u5927\u6982\u662f apk \u4e0d\u4e00\u81f4\u5bfc\u81f4\u7684\u7b7e\u540d\u590d\u5236\u5931\u8d25\uff0c\u770b\u8d77\u6765\u8fd8\u662f\u9700\u8981\u7b49 1.5.2 \u53d1\u5e03\u518d\u63a8\u8fdb MR \u4e86"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "libapp.so \u662f\u9879\u76ee dart \u4ee3\u7801\u7684\u7f16\u8bd1\u4ea7\u7269\r\nlibmpv.so \u521a\u521a\u5b8c\u6210\u7248\u672c\u8fed\u4ee3\r\n\r\n\u8fd9\u4e24\u4e2a\u5e93\u6821\u9a8c\u4e0d\u901a\u8fc7\u7b26\u5408\u9884\u671f\r\n\r\n\u6b64\u5916 libflutter.so \u6ca1\u6709\u51fa\u73b0\u5728\u62a5\u9519\u4e2d\uff0c\u5b83\u662f flutter \u5f15\u64ce\u7684\u7f16\u8bd1\u4ea7\u7269\uff0c\u53ea\u548c flutter \u7248\u672c\u76f8\u5173\u3002\u5982\u679c\u5b83\u7684\u6821\u9a8c\u901a\u8fc7\u4e86\uff0c\u5728\u8fed\u4ee3\u7248\u672c\u540e\uff0c\u5269\u4e0b\u7684\u4e24\u4e2a .so \u5e94\u8be5\u4e5f\u80fd\u6821\u9a8c\u901a\u8fc7\r\n\r\n\u4e5f\u8bb8\u6211\u4eec\u5e94\u8be5\u770b\u770b\u5269\u4e0b\u4e09\u4e2a\u62a5\u9519"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "@ErBWs \r\n\r\n\u6211\u5927\u6982\u770b\u4e86\u4e00\u4e0b\u4e0a\u9762\u7684\u94fe\u63a5\uff0c\u4f3c\u4e4e\u5728 1.5.2 \u53d1\u5e03\u4e4b\u524d\uff0c\u6211\u4eec\u7684 relsease workflow \u4f3c\u4e4e\u9700\u8981\u8c03\u6574\r\n\r\n1. \u6587\u6863\u4e2d\u63d0\u5230\u5411 F-Droid \u63d0\u4ea4\u7684 apk \u9700\u8981\u662f\u672a\u7ecf\u7b7e\u540d\u7684\uff0c\u6211\u4eec\u662f\u5426\u9700\u8981\u53d1\u5e03\u672a\u7b7e\u540d apk \u6765\u7b26\u5408\u5176\u8981\u6c42\r\n2. \u6211\u770b\u5230\u6211\u4eec\u7684\u63d0\u4ea4\u4e2d\u4f3c\u4e4e\u542f\u7528\u4e86\u6240\u6709\u7684\u67b6\u6784\uff0c\u4f46\u6211\u4eec\u76ee\u524d\u53ea\u53d1\u5e03 armv8 \u67b6\u6784\u7684 apk \uff0c\u8fd9\u662f\u5426\u9700\u8981\u8c03\u6574"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "1. \u6211\u4eec\u63d0\u4ea4\u7684\u5e94\u8be5\u662f\u7b7e\u540d\u540e\u7684 apk\uff0c\u8fd9\u6837 f-droid \u5c31\u53ef\u4ee5\u590d\u5236\u7b7e\u540d\u8fdb\u884c\u53d1\u5e03\n2. \u73b0\u5728 mr \u63d0\u4ea4\u7684\u4e5f\u662f armv8 \u7248\u672c\uff0c\u53ef\u4ee5\u63d0\u4ea4\u591a\u4e2a\u7248\u672c\u4e5f\u53ef\u4ee5\u53ea\u63d0\u4ea4\u4e00\u4e2a\u7248\u672c\n\n\u4f60\u53ef\u4ee5\u76f4\u63a5\u5728\u90a3\u4e2a mr \u4e2d\u5411\u4ed6\u4eec\u7684\u5f00\u53d1\u8005\u63d0\u95ee\uff0c\u4ed6\u4eec\u4f1a\u7ed9\u51fa\u4ed6\u4eec\u7684\u63a8\u8350\uff0c\u6211\u4e5f\u53ea\u662f\u6839\u636e\u8fc7\u5f80 mr \u8fdb\u884c\u731c\u6d4b"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "> \u4e5f\u8bb8\u6211\u4eec\u5e94\u8be5\u770b\u770b\u5269\u4e0b\u4e09\u4e2a\u62a5\u9519\n\n\u5269\u4e0b\u4e09\u4e2a\u62a5\u9519\u5e94\u8be5\u548c\u7b7e\u540d\u76f8\u5173"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "\u597d\u7684\uff0c\u611f\u8c22\u4f60\u7684\u56de\u7b54\n\n\u9664\u4e86 .so \u4e4b\u5916\u7684\u4e09\u4e2a\u62a5\u9519\u9700\u8981\u6211\u4eec\u5904\u7406\u5417"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "\u6211\u60f3\u81f3\u5c11\u76ee\u524d\u4e0d\u9700\u8981\uff0c\u8fd9\u5e94\u8be5\u662f\u6ca1\u80fd\u6210\u529f\u590d\u5236\u7b7e\u540d\u5bfc\u81f4\u7684"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "@Predidit \u574f\u6d88\u606f\uff0cPipeline \u4ee5\u4e00\u6a21\u4e00\u6837\u7684\u539f\u56e0\u53c8 fail \u4e86"
    },
    {
        "author": {
            "login": "Predidit"
        },
        "body": "QWQ\n\n\u53ef\u91cd\u590d\u6784\u5efa\u662f\u5fc5\u987b\u7684\u5417"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u8fd9\u53ea\u662f F-Droid \u7684\u63a8\u8350"
    },
    {
        "author": {
            "login": "ErBWs"
        },
        "body": "\u597d\u6d88\u606f\uff0cF-Droid \u6784\u5efa\u6210\u529f\u4e86\uff0c\u4e0d\u8fc7\u6211\u4eec\u53ef\u80fd\u9700\u8981\u4fee\u6539\u4e00\u4e0b versionCode \u6765\u89e3\u51b3\u81ea\u52a8\u68c0\u6d4b\u66f4\u65b0\u7684\u95ee\u9898\uff0c\u6b63\u5728\u7b49\u56de\u590d"
    }
]