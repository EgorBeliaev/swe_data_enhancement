diff --git a/modules/serverpod_auth/serverpod_auth_client/lib/src/protocol/authentication_response.dart b/modules/serverpod_auth/serverpod_auth_client/lib/src/protocol/authentication_response.dart
index c0ace4d8d2..7e5938e049 100644
--- a/modules/serverpod_auth/serverpod_auth_client/lib/src/protocol/authentication_response.dart
+++ b/modules/serverpod_auth/serverpod_auth_client/lib/src/protocol/authentication_response.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'user_info.dart' as _i2;
+import 'authentication_fail_reason.dart' as _i3;
 
 /// Provides a response to an authentication attempt.
 abstract class AuthenticationResponse implements _i1.SerializableModel {
@@ -27,7 +28,7 @@ abstract class AuthenticationResponse implements _i1.SerializableModel {
     String? key,
     int? keyId,
     _i2.UserInfo? userInfo,
-    _i2.AuthenticationFailReason? failReason,
+    _i3.AuthenticationFailReason? failReason,
   }) = _AuthenticationResponseImpl;
 
   factory AuthenticationResponse.fromJson(
@@ -42,7 +43,7 @@ abstract class AuthenticationResponse implements _i1.SerializableModel {
               (jsonSerialization['userInfo'] as Map<String, dynamic>)),
       failReason: jsonSerialization['failReason'] == null
           ? null
-          : _i2.AuthenticationFailReason.fromJson(
+          : _i3.AuthenticationFailReason.fromJson(
               (jsonSerialization['failReason'] as int)),
     );
   }
@@ -62,14 +63,14 @@ abstract class AuthenticationResponse implements _i1.SerializableModel {
 
   /// Reason for a failed authentication attempt, only set if the authentication
   /// failed.
-  _i2.AuthenticationFailReason? failReason;
+  _i3.AuthenticationFailReason? failReason;
 
   AuthenticationResponse copyWith({
     bool? success,
     String? key,
     int? keyId,
     _i2.UserInfo? userInfo,
-    _i2.AuthenticationFailReason? failReason,
+    _i3.AuthenticationFailReason? failReason,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -96,7 +97,7 @@ class _AuthenticationResponseImpl extends AuthenticationResponse {
     String? key,
     int? keyId,
     _i2.UserInfo? userInfo,
-    _i2.AuthenticationFailReason? failReason,
+    _i3.AuthenticationFailReason? failReason,
   }) : super._(
           success: success,
           key: key,
@@ -119,7 +120,7 @@ class _AuthenticationResponseImpl extends AuthenticationResponse {
       keyId: keyId is int? ? keyId : this.keyId,
       userInfo:
           userInfo is _i2.UserInfo? ? userInfo : this.userInfo?.copyWith(),
-      failReason: failReason is _i2.AuthenticationFailReason?
+      failReason: failReason is _i3.AuthenticationFailReason?
           ? failReason
           : this.failReason,
     );
diff --git a/modules/serverpod_auth/serverpod_auth_server/lib/src/generated/authentication_response.dart b/modules/serverpod_auth/serverpod_auth_server/lib/src/generated/authentication_response.dart
index 80cd714a3b..ff2b6bc363 100644
--- a/modules/serverpod_auth/serverpod_auth_server/lib/src/generated/authentication_response.dart
+++ b/modules/serverpod_auth/serverpod_auth_server/lib/src/generated/authentication_response.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'user_info.dart' as _i2;
+import 'authentication_fail_reason.dart' as _i3;
 
 /// Provides a response to an authentication attempt.
 abstract class AuthenticationResponse
@@ -28,7 +29,7 @@ abstract class AuthenticationResponse
     String? key,
     int? keyId,
     _i2.UserInfo? userInfo,
-    _i2.AuthenticationFailReason? failReason,
+    _i3.AuthenticationFailReason? failReason,
   }) = _AuthenticationResponseImpl;
 
   factory AuthenticationResponse.fromJson(
@@ -43,7 +44,7 @@ abstract class AuthenticationResponse
               (jsonSerialization['userInfo'] as Map<String, dynamic>)),
       failReason: jsonSerialization['failReason'] == null
           ? null
-          : _i2.AuthenticationFailReason.fromJson(
+          : _i3.AuthenticationFailReason.fromJson(
               (jsonSerialization['failReason'] as int)),
     );
   }
@@ -63,14 +64,14 @@ abstract class AuthenticationResponse
 
   /// Reason for a failed authentication attempt, only set if the authentication
   /// failed.
-  _i2.AuthenticationFailReason? failReason;
+  _i3.AuthenticationFailReason? failReason;
 
   AuthenticationResponse copyWith({
     bool? success,
     String? key,
     int? keyId,
     _i2.UserInfo? userInfo,
-    _i2.AuthenticationFailReason? failReason,
+    _i3.AuthenticationFailReason? failReason,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -108,7 +109,7 @@ class _AuthenticationResponseImpl extends AuthenticationResponse {
     String? key,
     int? keyId,
     _i2.UserInfo? userInfo,
-    _i2.AuthenticationFailReason? failReason,
+    _i3.AuthenticationFailReason? failReason,
   }) : super._(
           success: success,
           key: key,
@@ -131,7 +132,7 @@ class _AuthenticationResponseImpl extends AuthenticationResponse {
       keyId: keyId is int? ? keyId : this.keyId,
       userInfo:
           userInfo is _i2.UserInfo? ? userInfo : this.userInfo?.copyWith(),
-      failReason: failReason is _i2.AuthenticationFailReason?
+      failReason: failReason is _i3.AuthenticationFailReason?
           ? failReason
           : this.failReason,
     );
diff --git a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_joined_channel.dart b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_joined_channel.dart
index 2213c7638d..016d0717e1 100644
--- a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_joined_channel.dart
+++ b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_joined_channel.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'chat_message_chunk.dart' as _i2;
 import 'package:serverpod_auth_client/serverpod_auth_client.dart' as _i3;
 
 /// A message passed to a user when it joins a channel.
diff --git a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message.dart b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message.dart
index 011eaf1d42..143af5cddf 100644
--- a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message.dart
+++ b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message.dart
@@ -11,7 +11,7 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
 import 'package:serverpod_auth_client/serverpod_auth_client.dart' as _i2;
-import 'protocol.dart' as _i3;
+import 'chat_message_attachment.dart' as _i3;
 
 /// A chat message.
 abstract class ChatMessage implements _i1.SerializableModel {
diff --git a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message_chunk.dart b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message_chunk.dart
index 41df84643c..57fcc98777 100644
--- a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message_chunk.dart
+++ b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message_chunk.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'chat_message.dart' as _i2;
 
 /// A chunk of chat messages.
 abstract class ChatMessageChunk implements _i1.SerializableModel {
diff --git a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message_post.dart b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message_post.dart
index 5c7ca64657..0abca2e90d 100644
--- a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message_post.dart
+++ b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/chat_message_post.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'chat_message_attachment.dart' as _i2;
 
 /// A chat message post request.
 abstract class ChatMessagePost implements _i1.SerializableModel {
diff --git a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/protocol.dart b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/protocol.dart
index fd5ca0a794..6d14a7e2b7 100644
--- a/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/protocol.dart
+++ b/modules/serverpod_chat/serverpod_chat_client/lib/src/protocol/protocol.dart
@@ -21,8 +21,7 @@ import 'chat_message_chunk.dart' as _i9;
 import 'chat_message_post.dart' as _i10;
 import 'chat_read_message.dart' as _i11;
 import 'chat_request_message_chunk.dart' as _i12;
-import 'protocol.dart' as _i13;
-import 'package:serverpod_auth_client/serverpod_auth_client.dart' as _i14;
+import 'package:serverpod_auth_client/serverpod_auth_client.dart' as _i13;
 export 'chat_join_channel.dart';
 export 'chat_join_channel_failed.dart';
 export 'chat_joined_channel.dart';
@@ -120,27 +119,26 @@ class Protocol extends _i1.SerializationManager {
       return (data != null ? _i12.ChatRequestMessageChunk.fromJson(data) : null)
           as T;
     }
-    if (t == _i1.getType<List<_i13.ChatMessageAttachment>?>()) {
+    if (t == _i1.getType<List<_i7.ChatMessageAttachment>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i13.ChatMessageAttachment>(e))
+              .map((e) => deserialize<_i7.ChatMessageAttachment>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == List<_i13.ChatMessage>) {
-      return (data as List)
-          .map((e) => deserialize<_i13.ChatMessage>(e))
-          .toList() as dynamic;
+    if (t == List<_i6.ChatMessage>) {
+      return (data as List).map((e) => deserialize<_i6.ChatMessage>(e)).toList()
+          as dynamic;
     }
-    if (t == _i1.getType<List<_i13.ChatMessageAttachment>?>()) {
+    if (t == _i1.getType<List<_i7.ChatMessageAttachment>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i13.ChatMessageAttachment>(e))
+              .map((e) => deserialize<_i7.ChatMessageAttachment>(e))
               .toList()
           : null) as dynamic;
     }
     try {
-      return _i14.Protocol().deserialize<T>(data, t);
+      return _i13.Protocol().deserialize<T>(data, t);
     } on _i1.DeserializationTypeNotFoundException catch (_) {}
     return super.deserialize<T>(data, t);
   }
@@ -182,7 +180,7 @@ class Protocol extends _i1.SerializationManager {
     if (data is _i12.ChatRequestMessageChunk) {
       return 'ChatRequestMessageChunk';
     }
-    className = _i14.Protocol().getClassNameForObject(data);
+    className = _i13.Protocol().getClassNameForObject(data);
     if (className != null) {
       return 'serverpod_auth.$className';
     }
@@ -231,7 +229,7 @@ class Protocol extends _i1.SerializationManager {
     }
     if (dataClassName.startsWith('serverpod_auth.')) {
       data['className'] = dataClassName.substring(15);
-      return _i14.Protocol().deserializeByClassName(data);
+      return _i13.Protocol().deserializeByClassName(data);
     }
     return super.deserializeByClassName(data);
   }
diff --git a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_joined_channel.dart b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_joined_channel.dart
index 894c5c9d5d..0466fff8d9 100644
--- a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_joined_channel.dart
+++ b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_joined_channel.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'chat_message_chunk.dart' as _i2;
 import 'package:serverpod_auth_server/serverpod_auth_server.dart' as _i3;
 
 /// A message passed to a user when it joins a channel.
diff --git a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message.dart b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message.dart
index 3ad7efadbd..c50a03774c 100644
--- a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message.dart
+++ b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message.dart
@@ -11,7 +11,7 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
 import 'package:serverpod_auth_server/serverpod_auth_server.dart' as _i2;
-import 'protocol.dart' as _i3;
+import 'chat_message_attachment.dart' as _i3;
 
 /// A chat message.
 abstract class ChatMessage implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message_chunk.dart b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message_chunk.dart
index 45bedf899f..d23549fc01 100644
--- a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message_chunk.dart
+++ b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message_chunk.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'chat_message.dart' as _i2;
 
 /// A chunk of chat messages.
 abstract class ChatMessageChunk
diff --git a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message_post.dart b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message_post.dart
index fc767197fd..34dde6cc83 100644
--- a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message_post.dart
+++ b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/chat_message_post.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'chat_message_attachment.dart' as _i2;
 
 /// A chat message post request.
 abstract class ChatMessagePost
diff --git a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/protocol.dart b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/protocol.dart
index d381b195dd..e6b8be177a 100644
--- a/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/protocol.dart
+++ b/modules/serverpod_chat/serverpod_chat_server/lib/src/generated/protocol.dart
@@ -23,7 +23,6 @@ import 'chat_message_chunk.dart' as _i11;
 import 'chat_message_post.dart' as _i12;
 import 'chat_read_message.dart' as _i13;
 import 'chat_request_message_chunk.dart' as _i14;
-import 'protocol.dart' as _i15;
 export 'chat_join_channel.dart';
 export 'chat_join_channel_failed.dart';
 export 'chat_joined_channel.dart';
@@ -273,22 +272,21 @@ class Protocol extends _i1.SerializationManagerServer {
       return (data != null ? _i14.ChatRequestMessageChunk.fromJson(data) : null)
           as T;
     }
-    if (t == _i1.getType<List<_i15.ChatMessageAttachment>?>()) {
+    if (t == _i1.getType<List<_i9.ChatMessageAttachment>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i15.ChatMessageAttachment>(e))
+              .map((e) => deserialize<_i9.ChatMessageAttachment>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == List<_i15.ChatMessage>) {
-      return (data as List)
-          .map((e) => deserialize<_i15.ChatMessage>(e))
-          .toList() as dynamic;
+    if (t == List<_i8.ChatMessage>) {
+      return (data as List).map((e) => deserialize<_i8.ChatMessage>(e)).toList()
+          as dynamic;
     }
-    if (t == _i1.getType<List<_i15.ChatMessageAttachment>?>()) {
+    if (t == _i1.getType<List<_i9.ChatMessageAttachment>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i15.ChatMessageAttachment>(e))
+              .map((e) => deserialize<_i9.ChatMessageAttachment>(e))
               .toList()
           : null) as dynamic;
     }
diff --git a/packages/serverpod/lib/src/generated/caches_info.dart b/packages/serverpod/lib/src/generated/caches_info.dart
index 40b6bef7b6..c98cdff65d 100644
--- a/packages/serverpod/lib/src/generated/caches_info.dart
+++ b/packages/serverpod/lib/src/generated/caches_info.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'cache_info.dart' as _i2;
 
 /// High level information about the caches.
 abstract class CachesInfo
diff --git a/packages/serverpod/lib/src/generated/cluster_info.dart b/packages/serverpod/lib/src/generated/cluster_info.dart
index adc4e3527b..aeff38be90 100644
--- a/packages/serverpod/lib/src/generated/cluster_info.dart
+++ b/packages/serverpod/lib/src/generated/cluster_info.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'cluster_server_info.dart' as _i2;
 
 /// Information about a cluster of servers.
 abstract class ClusterInfo
diff --git a/packages/serverpod/lib/src/generated/database/bulk_data.dart b/packages/serverpod/lib/src/generated/database/bulk_data.dart
index fc7eb5768a..d36f3854c2 100644
--- a/packages/serverpod/lib/src/generated/database/bulk_data.dart
+++ b/packages/serverpod/lib/src/generated/database/bulk_data.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/table_definition.dart' as _i2;
 
 abstract class BulkData
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/packages/serverpod/lib/src/generated/database/bulk_query_result.dart b/packages/serverpod/lib/src/generated/database/bulk_query_result.dart
index e6dd984f0b..8764090a5a 100644
--- a/packages/serverpod/lib/src/generated/database/bulk_query_result.dart
+++ b/packages/serverpod/lib/src/generated/database/bulk_query_result.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/bulk_query_column_description.dart' as _i2;
 
 abstract class BulkQueryResult
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/packages/serverpod/lib/src/generated/database/column_definition.dart b/packages/serverpod/lib/src/generated/database/column_definition.dart
index 69ea1c9d50..8302d7870d 100644
--- a/packages/serverpod/lib/src/generated/database/column_definition.dart
+++ b/packages/serverpod/lib/src/generated/database/column_definition.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/column_type.dart' as _i2;
 
 /// The definition of a (desired) column in the database.
 abstract class ColumnDefinition
diff --git a/packages/serverpod/lib/src/generated/database/database_definition.dart b/packages/serverpod/lib/src/generated/database/database_definition.dart
index fdbf130518..040d92e487 100644
--- a/packages/serverpod/lib/src/generated/database/database_definition.dart
+++ b/packages/serverpod/lib/src/generated/database/database_definition.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/table_definition.dart' as _i2;
+import '../database/database_migration_version.dart' as _i3;
 
 /// Defines the structure of the database used by Serverpod.
 abstract class DatabaseDefinition
@@ -27,7 +28,7 @@ abstract class DatabaseDefinition
     String? name,
     required String moduleName,
     required List<_i2.TableDefinition> tables,
-    required List<_i2.DatabaseMigrationVersion> installedModules,
+    required List<_i3.DatabaseMigrationVersion> installedModules,
     required int migrationApiVersion,
   }) = _DatabaseDefinitionImpl;
 
@@ -39,7 +40,7 @@ abstract class DatabaseDefinition
           .map((e) => _i2.TableDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       installedModules: (jsonSerialization['installedModules'] as List)
-          .map((e) => _i2.DatabaseMigrationVersion.fromJson(
+          .map((e) => _i3.DatabaseMigrationVersion.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
       migrationApiVersion: jsonSerialization['migrationApiVersion'] as int,
@@ -58,7 +59,7 @@ abstract class DatabaseDefinition
 
   /// Modules installed in the database, together with their version. Only
   /// set if known.
-  List<_i2.DatabaseMigrationVersion> installedModules;
+  List<_i3.DatabaseMigrationVersion> installedModules;
 
   /// The version of the database definition.
   int migrationApiVersion;
@@ -67,7 +68,7 @@ abstract class DatabaseDefinition
     String? name,
     String? moduleName,
     List<_i2.TableDefinition>? tables,
-    List<_i2.DatabaseMigrationVersion>? installedModules,
+    List<_i3.DatabaseMigrationVersion>? installedModules,
     int? migrationApiVersion,
   });
   @override
@@ -107,7 +108,7 @@ class _DatabaseDefinitionImpl extends DatabaseDefinition {
     String? name,
     required String moduleName,
     required List<_i2.TableDefinition> tables,
-    required List<_i2.DatabaseMigrationVersion> installedModules,
+    required List<_i3.DatabaseMigrationVersion> installedModules,
     required int migrationApiVersion,
   }) : super._(
           name: name,
@@ -122,7 +123,7 @@ class _DatabaseDefinitionImpl extends DatabaseDefinition {
     Object? name = _Undefined,
     String? moduleName,
     List<_i2.TableDefinition>? tables,
-    List<_i2.DatabaseMigrationVersion>? installedModules,
+    List<_i3.DatabaseMigrationVersion>? installedModules,
     int? migrationApiVersion,
   }) {
     return DatabaseDefinition(
diff --git a/packages/serverpod/lib/src/generated/database/database_definitions.dart b/packages/serverpod/lib/src/generated/database/database_definitions.dart
index 408dd0fbc7..a28c103440 100644
--- a/packages/serverpod/lib/src/generated/database/database_definitions.dart
+++ b/packages/serverpod/lib/src/generated/database/database_definitions.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/table_definition.dart' as _i2;
+import '../database/database_migration_version.dart' as _i3;
 
 /// Defines the current state of the database, including information about
 /// installed modules and migrations.
@@ -26,8 +27,8 @@ abstract class DatabaseDefinitions
   factory DatabaseDefinitions({
     required List<_i2.TableDefinition> target,
     required List<_i2.TableDefinition> live,
-    required List<_i2.DatabaseMigrationVersion> installedMigrations,
-    required List<_i2.DatabaseMigrationVersion> latestAvailableMigrations,
+    required List<_i3.DatabaseMigrationVersion> installedMigrations,
+    required List<_i3.DatabaseMigrationVersion> latestAvailableMigrations,
   }) = _DatabaseDefinitionsImpl;
 
   factory DatabaseDefinitions.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -39,12 +40,12 @@ abstract class DatabaseDefinitions
           .map((e) => _i2.TableDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       installedMigrations: (jsonSerialization['installedMigrations'] as List)
-          .map((e) => _i2.DatabaseMigrationVersion.fromJson(
+          .map((e) => _i3.DatabaseMigrationVersion.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
       latestAvailableMigrations:
           (jsonSerialization['latestAvailableMigrations'] as List)
-              .map((e) => _i2.DatabaseMigrationVersion.fromJson(
+              .map((e) => _i3.DatabaseMigrationVersion.fromJson(
                   (e as Map<String, dynamic>)))
               .toList(),
     );
@@ -57,16 +58,16 @@ abstract class DatabaseDefinitions
   List<_i2.TableDefinition> live;
 
   /// The migrations that are installed in the database.
-  List<_i2.DatabaseMigrationVersion> installedMigrations;
+  List<_i3.DatabaseMigrationVersion> installedMigrations;
 
   /// The latest available migrations that can be applied.
-  List<_i2.DatabaseMigrationVersion> latestAvailableMigrations;
+  List<_i3.DatabaseMigrationVersion> latestAvailableMigrations;
 
   DatabaseDefinitions copyWith({
     List<_i2.TableDefinition>? target,
     List<_i2.TableDefinition>? live,
-    List<_i2.DatabaseMigrationVersion>? installedMigrations,
-    List<_i2.DatabaseMigrationVersion>? latestAvailableMigrations,
+    List<_i3.DatabaseMigrationVersion>? installedMigrations,
+    List<_i3.DatabaseMigrationVersion>? latestAvailableMigrations,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -102,8 +103,8 @@ class _DatabaseDefinitionsImpl extends DatabaseDefinitions {
   _DatabaseDefinitionsImpl({
     required List<_i2.TableDefinition> target,
     required List<_i2.TableDefinition> live,
-    required List<_i2.DatabaseMigrationVersion> installedMigrations,
-    required List<_i2.DatabaseMigrationVersion> latestAvailableMigrations,
+    required List<_i3.DatabaseMigrationVersion> installedMigrations,
+    required List<_i3.DatabaseMigrationVersion> latestAvailableMigrations,
   }) : super._(
           target: target,
           live: live,
@@ -115,8 +116,8 @@ class _DatabaseDefinitionsImpl extends DatabaseDefinitions {
   DatabaseDefinitions copyWith({
     List<_i2.TableDefinition>? target,
     List<_i2.TableDefinition>? live,
-    List<_i2.DatabaseMigrationVersion>? installedMigrations,
-    List<_i2.DatabaseMigrationVersion>? latestAvailableMigrations,
+    List<_i3.DatabaseMigrationVersion>? installedMigrations,
+    List<_i3.DatabaseMigrationVersion>? latestAvailableMigrations,
   }) {
     return DatabaseDefinitions(
       target: target ?? this.target.map((e0) => e0.copyWith()).toList(),
diff --git a/packages/serverpod/lib/src/generated/database/database_migration.dart b/packages/serverpod/lib/src/generated/database/database_migration.dart
index beece3b873..877b9d9193 100644
--- a/packages/serverpod/lib/src/generated/database/database_migration.dart
+++ b/packages/serverpod/lib/src/generated/database/database_migration.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/database_migration_action.dart' as _i2;
+import '../database/database_migration_warning.dart' as _i3;
 
 abstract class DatabaseMigration
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
@@ -22,7 +23,7 @@ abstract class DatabaseMigration
 
   factory DatabaseMigration({
     required List<_i2.DatabaseMigrationAction> actions,
-    required List<_i2.DatabaseMigrationWarning> warnings,
+    required List<_i3.DatabaseMigrationWarning> warnings,
     required int migrationApiVersion,
   }) = _DatabaseMigrationImpl;
 
@@ -33,7 +34,7 @@ abstract class DatabaseMigration
               _i2.DatabaseMigrationAction.fromJson((e as Map<String, dynamic>)))
           .toList(),
       warnings: (jsonSerialization['warnings'] as List)
-          .map((e) => _i2.DatabaseMigrationWarning.fromJson(
+          .map((e) => _i3.DatabaseMigrationWarning.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
       migrationApiVersion: jsonSerialization['migrationApiVersion'] as int,
@@ -42,13 +43,13 @@ abstract class DatabaseMigration
 
   List<_i2.DatabaseMigrationAction> actions;
 
-  List<_i2.DatabaseMigrationWarning> warnings;
+  List<_i3.DatabaseMigrationWarning> warnings;
 
   int migrationApiVersion;
 
   DatabaseMigration copyWith({
     List<_i2.DatabaseMigrationAction>? actions,
-    List<_i2.DatabaseMigrationWarning>? warnings,
+    List<_i3.DatabaseMigrationWarning>? warnings,
     int? migrationApiVersion,
   });
   @override
@@ -78,7 +79,7 @@ abstract class DatabaseMigration
 class _DatabaseMigrationImpl extends DatabaseMigration {
   _DatabaseMigrationImpl({
     required List<_i2.DatabaseMigrationAction> actions,
-    required List<_i2.DatabaseMigrationWarning> warnings,
+    required List<_i3.DatabaseMigrationWarning> warnings,
     required int migrationApiVersion,
   }) : super._(
           actions: actions,
@@ -89,7 +90,7 @@ class _DatabaseMigrationImpl extends DatabaseMigration {
   @override
   DatabaseMigration copyWith({
     List<_i2.DatabaseMigrationAction>? actions,
-    List<_i2.DatabaseMigrationWarning>? warnings,
+    List<_i3.DatabaseMigrationWarning>? warnings,
     int? migrationApiVersion,
   }) {
     return DatabaseMigration(
diff --git a/packages/serverpod/lib/src/generated/database/database_migration_action.dart b/packages/serverpod/lib/src/generated/database/database_migration_action.dart
index b9242b849e..eec923e3c6 100644
--- a/packages/serverpod/lib/src/generated/database/database_migration_action.dart
+++ b/packages/serverpod/lib/src/generated/database/database_migration_action.dart
@@ -10,7 +10,9 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/database_migration_action_type.dart' as _i2;
+import '../database/table_migration.dart' as _i3;
+import '../database/table_definition.dart' as _i4;
 
 abstract class DatabaseMigrationAction
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
@@ -24,8 +26,8 @@ abstract class DatabaseMigrationAction
   factory DatabaseMigrationAction({
     required _i2.DatabaseMigrationActionType type,
     String? deleteTable,
-    _i2.TableMigration? alterTable,
-    _i2.TableDefinition? createTable,
+    _i3.TableMigration? alterTable,
+    _i4.TableDefinition? createTable,
   }) = _DatabaseMigrationActionImpl;
 
   factory DatabaseMigrationAction.fromJson(
@@ -36,11 +38,11 @@ abstract class DatabaseMigrationAction
       deleteTable: jsonSerialization['deleteTable'] as String?,
       alterTable: jsonSerialization['alterTable'] == null
           ? null
-          : _i2.TableMigration.fromJson(
+          : _i3.TableMigration.fromJson(
               (jsonSerialization['alterTable'] as Map<String, dynamic>)),
       createTable: jsonSerialization['createTable'] == null
           ? null
-          : _i2.TableDefinition.fromJson(
+          : _i4.TableDefinition.fromJson(
               (jsonSerialization['createTable'] as Map<String, dynamic>)),
     );
   }
@@ -49,15 +51,15 @@ abstract class DatabaseMigrationAction
 
   String? deleteTable;
 
-  _i2.TableMigration? alterTable;
+  _i3.TableMigration? alterTable;
 
-  _i2.TableDefinition? createTable;
+  _i4.TableDefinition? createTable;
 
   DatabaseMigrationAction copyWith({
     _i2.DatabaseMigrationActionType? type,
     String? deleteTable,
-    _i2.TableMigration? alterTable,
-    _i2.TableDefinition? createTable,
+    _i3.TableMigration? alterTable,
+    _i4.TableDefinition? createTable,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -91,8 +93,8 @@ class _DatabaseMigrationActionImpl extends DatabaseMigrationAction {
   _DatabaseMigrationActionImpl({
     required _i2.DatabaseMigrationActionType type,
     String? deleteTable,
-    _i2.TableMigration? alterTable,
-    _i2.TableDefinition? createTable,
+    _i3.TableMigration? alterTable,
+    _i4.TableDefinition? createTable,
   }) : super._(
           type: type,
           deleteTable: deleteTable,
@@ -110,10 +112,10 @@ class _DatabaseMigrationActionImpl extends DatabaseMigrationAction {
     return DatabaseMigrationAction(
       type: type ?? this.type,
       deleteTable: deleteTable is String? ? deleteTable : this.deleteTable,
-      alterTable: alterTable is _i2.TableMigration?
+      alterTable: alterTable is _i3.TableMigration?
           ? alterTable
           : this.alterTable?.copyWith(),
-      createTable: createTable is _i2.TableDefinition?
+      createTable: createTable is _i4.TableDefinition?
           ? createTable
           : this.createTable?.copyWith(),
     );
diff --git a/packages/serverpod/lib/src/generated/database/database_migration_warning.dart b/packages/serverpod/lib/src/generated/database/database_migration_warning.dart
index 58ffe8e67a..a2c98d4a40 100644
--- a/packages/serverpod/lib/src/generated/database/database_migration_warning.dart
+++ b/packages/serverpod/lib/src/generated/database/database_migration_warning.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/database_migration_warning_type.dart' as _i2;
 
 abstract class DatabaseMigrationWarning
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/packages/serverpod/lib/src/generated/database/filter/filter.dart b/packages/serverpod/lib/src/generated/database/filter/filter.dart
index 22355ec160..df61efce08 100644
--- a/packages/serverpod/lib/src/generated/database/filter/filter.dart
+++ b/packages/serverpod/lib/src/generated/database/filter/filter.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../database/filter/filter_constraint.dart' as _i2;
 
 abstract class Filter
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/packages/serverpod/lib/src/generated/database/filter/filter_constraint.dart b/packages/serverpod/lib/src/generated/database/filter/filter_constraint.dart
index 6da04aa28e..0021042d1a 100644
--- a/packages/serverpod/lib/src/generated/database/filter/filter_constraint.dart
+++ b/packages/serverpod/lib/src/generated/database/filter/filter_constraint.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../database/filter/filter_constraint_type.dart' as _i2;
 
 abstract class FilterConstraint
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/packages/serverpod/lib/src/generated/database/foreign_key_definition.dart b/packages/serverpod/lib/src/generated/database/foreign_key_definition.dart
index e5962ffe34..28b87dbe5b 100644
--- a/packages/serverpod/lib/src/generated/database/foreign_key_definition.dart
+++ b/packages/serverpod/lib/src/generated/database/foreign_key_definition.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/foreign_key_action.dart' as _i2;
+import '../database/foreign_key_match_type.dart' as _i3;
 
 /// Represents a foreign key.
 abstract class ForeignKeyDefinition
@@ -34,7 +35,7 @@ abstract class ForeignKeyDefinition
     required List<String> referenceColumns,
     _i2.ForeignKeyAction? onUpdate,
     _i2.ForeignKeyAction? onDelete,
-    _i2.ForeignKeyMatchType? matchType,
+    _i3.ForeignKeyMatchType? matchType,
   }) = _ForeignKeyDefinitionImpl;
 
   factory ForeignKeyDefinition.fromJson(
@@ -59,7 +60,7 @@ abstract class ForeignKeyDefinition
               (jsonSerialization['onDelete'] as int)),
       matchType: jsonSerialization['matchType'] == null
           ? null
-          : _i2.ForeignKeyMatchType.fromJson(
+          : _i3.ForeignKeyMatchType.fromJson(
               (jsonSerialization['matchType'] as int)),
     );
   }
@@ -86,7 +87,7 @@ abstract class ForeignKeyDefinition
   _i2.ForeignKeyAction? onDelete;
 
   /// The match type of the foreign key
-  _i2.ForeignKeyMatchType? matchType;
+  _i3.ForeignKeyMatchType? matchType;
 
   ForeignKeyDefinition copyWith({
     String? constraintName,
@@ -96,7 +97,7 @@ abstract class ForeignKeyDefinition
     List<String>? referenceColumns,
     _i2.ForeignKeyAction? onUpdate,
     _i2.ForeignKeyAction? onDelete,
-    _i2.ForeignKeyMatchType? matchType,
+    _i3.ForeignKeyMatchType? matchType,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -143,7 +144,7 @@ class _ForeignKeyDefinitionImpl extends ForeignKeyDefinition {
     required List<String> referenceColumns,
     _i2.ForeignKeyAction? onUpdate,
     _i2.ForeignKeyAction? onDelete,
-    _i2.ForeignKeyMatchType? matchType,
+    _i3.ForeignKeyMatchType? matchType,
   }) : super._(
           constraintName: constraintName,
           columns: columns,
@@ -176,7 +177,7 @@ class _ForeignKeyDefinitionImpl extends ForeignKeyDefinition {
       onUpdate: onUpdate is _i2.ForeignKeyAction? ? onUpdate : this.onUpdate,
       onDelete: onDelete is _i2.ForeignKeyAction? ? onDelete : this.onDelete,
       matchType:
-          matchType is _i2.ForeignKeyMatchType? ? matchType : this.matchType,
+          matchType is _i3.ForeignKeyMatchType? ? matchType : this.matchType,
     );
   }
 }
diff --git a/packages/serverpod/lib/src/generated/database/index_definition.dart b/packages/serverpod/lib/src/generated/database/index_definition.dart
index ada54d3ea7..8fc9e063a7 100644
--- a/packages/serverpod/lib/src/generated/database/index_definition.dart
+++ b/packages/serverpod/lib/src/generated/database/index_definition.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/index_element_definition.dart' as _i2;
 
 /// The definition of a (desired) index in the database.
 abstract class IndexDefinition
diff --git a/packages/serverpod/lib/src/generated/database/index_element_definition.dart b/packages/serverpod/lib/src/generated/database/index_element_definition.dart
index 4ef8fee8f4..d7844ea1f1 100644
--- a/packages/serverpod/lib/src/generated/database/index_element_definition.dart
+++ b/packages/serverpod/lib/src/generated/database/index_element_definition.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/index_element_definition_type.dart' as _i2;
 
 /// Defines an element of an index.
 abstract class IndexElementDefinition
diff --git a/packages/serverpod/lib/src/generated/database/table_definition.dart b/packages/serverpod/lib/src/generated/database/table_definition.dart
index 41bb3926ff..58c2cb4bc4 100644
--- a/packages/serverpod/lib/src/generated/database/table_definition.dart
+++ b/packages/serverpod/lib/src/generated/database/table_definition.dart
@@ -10,7 +10,9 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/column_definition.dart' as _i2;
+import '../database/foreign_key_definition.dart' as _i3;
+import '../database/index_definition.dart' as _i4;
 
 /// The definition of a (desired) table in the database.
 abstract class TableDefinition
@@ -34,8 +36,8 @@ abstract class TableDefinition
     required String schema,
     String? tableSpace,
     required List<_i2.ColumnDefinition> columns,
-    required List<_i2.ForeignKeyDefinition> foreignKeys,
-    required List<_i2.IndexDefinition> indexes,
+    required List<_i3.ForeignKeyDefinition> foreignKeys,
+    required List<_i4.IndexDefinition> indexes,
     bool? managed,
   }) = _TableDefinitionImpl;
 
@@ -52,10 +54,10 @@ abstract class TableDefinition
           .toList(),
       foreignKeys: (jsonSerialization['foreignKeys'] as List)
           .map((e) =>
-              _i2.ForeignKeyDefinition.fromJson((e as Map<String, dynamic>)))
+              _i3.ForeignKeyDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       indexes: (jsonSerialization['indexes'] as List)
-          .map((e) => _i2.IndexDefinition.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i4.IndexDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       managed: jsonSerialization['managed'] as bool?,
     );
@@ -81,10 +83,10 @@ abstract class TableDefinition
   List<_i2.ColumnDefinition> columns;
 
   /// All the foreign keys.
-  List<_i2.ForeignKeyDefinition> foreignKeys;
+  List<_i3.ForeignKeyDefinition> foreignKeys;
 
   /// All the indexes of this table.
-  List<_i2.IndexDefinition> indexes;
+  List<_i4.IndexDefinition> indexes;
 
   /// Indicates if the table should be managed by Serverpod.
   /// Null, if this is unknown.
@@ -97,8 +99,8 @@ abstract class TableDefinition
     String? schema,
     String? tableSpace,
     List<_i2.ColumnDefinition>? columns,
-    List<_i2.ForeignKeyDefinition>? foreignKeys,
-    List<_i2.IndexDefinition>? indexes,
+    List<_i3.ForeignKeyDefinition>? foreignKeys,
+    List<_i4.IndexDefinition>? indexes,
     bool? managed,
   });
   @override
@@ -148,8 +150,8 @@ class _TableDefinitionImpl extends TableDefinition {
     required String schema,
     String? tableSpace,
     required List<_i2.ColumnDefinition> columns,
-    required List<_i2.ForeignKeyDefinition> foreignKeys,
-    required List<_i2.IndexDefinition> indexes,
+    required List<_i3.ForeignKeyDefinition> foreignKeys,
+    required List<_i4.IndexDefinition> indexes,
     bool? managed,
   }) : super._(
           name: name,
@@ -171,8 +173,8 @@ class _TableDefinitionImpl extends TableDefinition {
     String? schema,
     Object? tableSpace = _Undefined,
     List<_i2.ColumnDefinition>? columns,
-    List<_i2.ForeignKeyDefinition>? foreignKeys,
-    List<_i2.IndexDefinition>? indexes,
+    List<_i3.ForeignKeyDefinition>? foreignKeys,
+    List<_i4.IndexDefinition>? indexes,
     Object? managed = _Undefined,
   }) {
     return TableDefinition(
diff --git a/packages/serverpod/lib/src/generated/database/table_migration.dart b/packages/serverpod/lib/src/generated/database/table_migration.dart
index 5062844db6..0e97aca924 100644
--- a/packages/serverpod/lib/src/generated/database/table_migration.dart
+++ b/packages/serverpod/lib/src/generated/database/table_migration.dart
@@ -10,7 +10,11 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/column_definition.dart' as _i2;
+import '../database/column_migration.dart' as _i3;
+import '../database/index_definition.dart' as _i4;
+import '../database/foreign_key_definition.dart' as _i5;
+import '../database/database_migration_warning.dart' as _i6;
 
 abstract class TableMigration
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
@@ -36,12 +40,12 @@ abstract class TableMigration
     required String schema,
     required List<_i2.ColumnDefinition> addColumns,
     required List<String> deleteColumns,
-    required List<_i2.ColumnMigration> modifyColumns,
-    required List<_i2.IndexDefinition> addIndexes,
+    required List<_i3.ColumnMigration> modifyColumns,
+    required List<_i4.IndexDefinition> addIndexes,
     required List<String> deleteIndexes,
-    required List<_i2.ForeignKeyDefinition> addForeignKeys,
+    required List<_i5.ForeignKeyDefinition> addForeignKeys,
     required List<String> deleteForeignKeys,
-    required List<_i2.DatabaseMigrationWarning> warnings,
+    required List<_i6.DatabaseMigrationWarning> warnings,
   }) = _TableMigrationImpl;
 
   factory TableMigration.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -58,23 +62,23 @@ abstract class TableMigration
           .map((e) => e as String)
           .toList(),
       modifyColumns: (jsonSerialization['modifyColumns'] as List)
-          .map((e) => _i2.ColumnMigration.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i3.ColumnMigration.fromJson((e as Map<String, dynamic>)))
           .toList(),
       addIndexes: (jsonSerialization['addIndexes'] as List)
-          .map((e) => _i2.IndexDefinition.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i4.IndexDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       deleteIndexes: (jsonSerialization['deleteIndexes'] as List)
           .map((e) => e as String)
           .toList(),
       addForeignKeys: (jsonSerialization['addForeignKeys'] as List)
           .map((e) =>
-              _i2.ForeignKeyDefinition.fromJson((e as Map<String, dynamic>)))
+              _i5.ForeignKeyDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       deleteForeignKeys: (jsonSerialization['deleteForeignKeys'] as List)
           .map((e) => e as String)
           .toList(),
       warnings: (jsonSerialization['warnings'] as List)
-          .map((e) => _i2.DatabaseMigrationWarning.fromJson(
+          .map((e) => _i6.DatabaseMigrationWarning.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
     );
@@ -92,17 +96,17 @@ abstract class TableMigration
 
   List<String> deleteColumns;
 
-  List<_i2.ColumnMigration> modifyColumns;
+  List<_i3.ColumnMigration> modifyColumns;
 
-  List<_i2.IndexDefinition> addIndexes;
+  List<_i4.IndexDefinition> addIndexes;
 
   List<String> deleteIndexes;
 
-  List<_i2.ForeignKeyDefinition> addForeignKeys;
+  List<_i5.ForeignKeyDefinition> addForeignKeys;
 
   List<String> deleteForeignKeys;
 
-  List<_i2.DatabaseMigrationWarning> warnings;
+  List<_i6.DatabaseMigrationWarning> warnings;
 
   TableMigration copyWith({
     String? name,
@@ -111,12 +115,12 @@ abstract class TableMigration
     String? schema,
     List<_i2.ColumnDefinition>? addColumns,
     List<String>? deleteColumns,
-    List<_i2.ColumnMigration>? modifyColumns,
-    List<_i2.IndexDefinition>? addIndexes,
+    List<_i3.ColumnMigration>? modifyColumns,
+    List<_i4.IndexDefinition>? addIndexes,
     List<String>? deleteIndexes,
-    List<_i2.ForeignKeyDefinition>? addForeignKeys,
+    List<_i5.ForeignKeyDefinition>? addForeignKeys,
     List<String>? deleteForeignKeys,
-    List<_i2.DatabaseMigrationWarning>? warnings,
+    List<_i6.DatabaseMigrationWarning>? warnings,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -174,12 +178,12 @@ class _TableMigrationImpl extends TableMigration {
     required String schema,
     required List<_i2.ColumnDefinition> addColumns,
     required List<String> deleteColumns,
-    required List<_i2.ColumnMigration> modifyColumns,
-    required List<_i2.IndexDefinition> addIndexes,
+    required List<_i3.ColumnMigration> modifyColumns,
+    required List<_i4.IndexDefinition> addIndexes,
     required List<String> deleteIndexes,
-    required List<_i2.ForeignKeyDefinition> addForeignKeys,
+    required List<_i5.ForeignKeyDefinition> addForeignKeys,
     required List<String> deleteForeignKeys,
-    required List<_i2.DatabaseMigrationWarning> warnings,
+    required List<_i6.DatabaseMigrationWarning> warnings,
   }) : super._(
           name: name,
           dartName: dartName,
@@ -203,12 +207,12 @@ class _TableMigrationImpl extends TableMigration {
     String? schema,
     List<_i2.ColumnDefinition>? addColumns,
     List<String>? deleteColumns,
-    List<_i2.ColumnMigration>? modifyColumns,
-    List<_i2.IndexDefinition>? addIndexes,
+    List<_i3.ColumnMigration>? modifyColumns,
+    List<_i4.IndexDefinition>? addIndexes,
     List<String>? deleteIndexes,
-    List<_i2.ForeignKeyDefinition>? addForeignKeys,
+    List<_i5.ForeignKeyDefinition>? addForeignKeys,
     List<String>? deleteForeignKeys,
-    List<_i2.DatabaseMigrationWarning>? warnings,
+    List<_i6.DatabaseMigrationWarning>? warnings,
   }) {
     return TableMigration(
       name: name ?? this.name,
diff --git a/packages/serverpod/lib/src/generated/log_entry.dart b/packages/serverpod/lib/src/generated/log_entry.dart
index 8f842fc29e..f20f76997b 100644
--- a/packages/serverpod/lib/src/generated/log_entry.dart
+++ b/packages/serverpod/lib/src/generated/log_entry.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_level.dart' as _i2;
 
 /// Bindings to a log entry in the database.
 abstract class LogEntry implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/packages/serverpod/lib/src/generated/log_result.dart b/packages/serverpod/lib/src/generated/log_result.dart
index 6d013b4d49..3fb04a0334 100644
--- a/packages/serverpod/lib/src/generated/log_result.dart
+++ b/packages/serverpod/lib/src/generated/log_result.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_entry.dart' as _i2;
 
 /// A list of log entries, used to return logging data.
 abstract class LogResult
diff --git a/packages/serverpod/lib/src/generated/log_settings.dart b/packages/serverpod/lib/src/generated/log_settings.dart
index 361f4ecf95..ceade537f7 100644
--- a/packages/serverpod/lib/src/generated/log_settings.dart
+++ b/packages/serverpod/lib/src/generated/log_settings.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_level.dart' as _i2;
 
 /// Log settings for the server.
 abstract class LogSettings
diff --git a/packages/serverpod/lib/src/generated/log_settings_override.dart b/packages/serverpod/lib/src/generated/log_settings_override.dart
index 1b1ca4c906..10c1200d78 100644
--- a/packages/serverpod/lib/src/generated/log_settings_override.dart
+++ b/packages/serverpod/lib/src/generated/log_settings_override.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_settings.dart' as _i2;
 
 /// Information about an override for log settings for either an entire
 /// endpoint or a specific method.
diff --git a/packages/serverpod/lib/src/generated/protocol.dart b/packages/serverpod/lib/src/generated/protocol.dart
index 027e85cb30..aff470e834 100644
--- a/packages/serverpod/lib/src/generated/protocol.dart
+++ b/packages/serverpod/lib/src/generated/protocol.dart
@@ -69,8 +69,7 @@ import 'session_log_entry.dart' as _i57;
 import 'session_log_filter.dart' as _i58;
 import 'session_log_info.dart' as _i59;
 import 'session_log_result.dart' as _i60;
-import 'protocol.dart' as _i61;
-import 'package:serverpod/src/generated/database/table_definition.dart' as _i62;
+import 'package:serverpod/src/generated/database/table_definition.dart' as _i61;
 export 'authentication/revoked_authentication_auth_id.dart';
 export 'authentication/revoked_authentication_scope.dart';
 export 'authentication/revoked_authentication_user.dart';
@@ -1702,103 +1701,103 @@ class Protocol extends _i1.SerializationManagerServer {
           ? (data as List).map((e) => deserialize<String>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i61.ClusterServerInfo>) {
+    if (t == List<_i11.ClusterServerInfo>) {
       return (data as List)
-          .map((e) => deserialize<_i61.ClusterServerInfo>(e))
+          .map((e) => deserialize<_i11.ClusterServerInfo>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.BulkQueryColumnDescription>) {
+    if (t == List<_i14.BulkQueryColumnDescription>) {
       return (data as List)
-          .map((e) => deserialize<_i61.BulkQueryColumnDescription>(e))
+          .map((e) => deserialize<_i14.BulkQueryColumnDescription>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.TableDefinition>) {
+    if (t == List<_i37.TableDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i61.TableDefinition>(e))
+          .map((e) => deserialize<_i37.TableDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.DatabaseMigrationVersion>) {
+    if (t == List<_i24.DatabaseMigrationVersion>) {
       return (data as List)
-          .map((e) => deserialize<_i61.DatabaseMigrationVersion>(e))
+          .map((e) => deserialize<_i24.DatabaseMigrationVersion>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.DatabaseMigrationAction>) {
+    if (t == List<_i22.DatabaseMigrationAction>) {
       return (data as List)
-          .map((e) => deserialize<_i61.DatabaseMigrationAction>(e))
+          .map((e) => deserialize<_i22.DatabaseMigrationAction>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.DatabaseMigrationWarning>) {
+    if (t == List<_i25.DatabaseMigrationWarning>) {
       return (data as List)
-          .map((e) => deserialize<_i61.DatabaseMigrationWarning>(e))
+          .map((e) => deserialize<_i25.DatabaseMigrationWarning>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.FilterConstraint>) {
+    if (t == List<_i29.FilterConstraint>) {
       return (data as List)
-          .map((e) => deserialize<_i61.FilterConstraint>(e))
+          .map((e) => deserialize<_i29.FilterConstraint>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.IndexElementDefinition>) {
+    if (t == List<_i35.IndexElementDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i61.IndexElementDefinition>(e))
+          .map((e) => deserialize<_i35.IndexElementDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.ColumnDefinition>) {
+    if (t == List<_i16.ColumnDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i61.ColumnDefinition>(e))
+          .map((e) => deserialize<_i16.ColumnDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.ForeignKeyDefinition>) {
+    if (t == List<_i32.ForeignKeyDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i61.ForeignKeyDefinition>(e))
+          .map((e) => deserialize<_i32.ForeignKeyDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.IndexDefinition>) {
+    if (t == List<_i34.IndexDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i61.IndexDefinition>(e))
+          .map((e) => deserialize<_i34.IndexDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.ColumnMigration>) {
+    if (t == List<_i17.ColumnMigration>) {
       return (data as List)
-          .map((e) => deserialize<_i61.ColumnMigration>(e))
+          .map((e) => deserialize<_i17.ColumnMigration>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.LogEntry>) {
-      return (data as List).map((e) => deserialize<_i61.LogEntry>(e)).toList()
+    if (t == List<_i43.LogEntry>) {
+      return (data as List).map((e) => deserialize<_i43.LogEntry>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i61.LogSettingsOverride>) {
+    if (t == List<_i47.LogSettingsOverride>) {
       return (data as List)
-          .map((e) => deserialize<_i61.LogSettingsOverride>(e))
+          .map((e) => deserialize<_i47.LogSettingsOverride>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.ServerHealthMetric>) {
+    if (t == List<_i54.ServerHealthMetric>) {
       return (data as List)
-          .map((e) => deserialize<_i61.ServerHealthMetric>(e))
+          .map((e) => deserialize<_i54.ServerHealthMetric>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.ServerHealthConnectionInfo>) {
+    if (t == List<_i53.ServerHealthConnectionInfo>) {
       return (data as List)
-          .map((e) => deserialize<_i61.ServerHealthConnectionInfo>(e))
+          .map((e) => deserialize<_i53.ServerHealthConnectionInfo>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.QueryLogEntry>) {
+    if (t == List<_i50.QueryLogEntry>) {
       return (data as List)
-          .map((e) => deserialize<_i61.QueryLogEntry>(e))
+          .map((e) => deserialize<_i50.QueryLogEntry>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.MessageLogEntry>) {
+    if (t == List<_i48.MessageLogEntry>) {
       return (data as List)
-          .map((e) => deserialize<_i61.MessageLogEntry>(e))
+          .map((e) => deserialize<_i48.MessageLogEntry>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i61.SessionLogInfo>) {
+    if (t == List<_i59.SessionLogInfo>) {
       return (data as List)
-          .map((e) => deserialize<_i61.SessionLogInfo>(e))
+          .map((e) => deserialize<_i59.SessionLogInfo>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i62.TableDefinition>) {
+    if (t == List<_i61.TableDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i62.TableDefinition>(e))
+          .map((e) => deserialize<_i61.TableDefinition>(e))
           .toList() as dynamic;
     }
     if (t == List<String>) {
diff --git a/packages/serverpod/lib/src/generated/runtime_settings.dart b/packages/serverpod/lib/src/generated/runtime_settings.dart
index 1e4e3885e2..64fece27a3 100644
--- a/packages/serverpod/lib/src/generated/runtime_settings.dart
+++ b/packages/serverpod/lib/src/generated/runtime_settings.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_settings.dart' as _i2;
+import 'log_settings_override.dart' as _i3;
 
 /// Runtime settings of the server.
 abstract class RuntimeSettings
@@ -26,7 +27,7 @@ abstract class RuntimeSettings
   factory RuntimeSettings({
     int? id,
     required _i2.LogSettings logSettings,
-    required List<_i2.LogSettingsOverride> logSettingsOverrides,
+    required List<_i3.LogSettingsOverride> logSettingsOverrides,
     required bool logServiceCalls,
     required bool logMalformedCalls,
   }) = _RuntimeSettingsImpl;
@@ -38,7 +39,7 @@ abstract class RuntimeSettings
           (jsonSerialization['logSettings'] as Map<String, dynamic>)),
       logSettingsOverrides: (jsonSerialization['logSettingsOverrides'] as List)
           .map((e) =>
-              _i2.LogSettingsOverride.fromJson((e as Map<String, dynamic>)))
+              _i3.LogSettingsOverride.fromJson((e as Map<String, dynamic>)))
           .toList(),
       logServiceCalls: jsonSerialization['logServiceCalls'] as bool,
       logMalformedCalls: jsonSerialization['logMalformedCalls'] as bool,
@@ -56,7 +57,7 @@ abstract class RuntimeSettings
   _i2.LogSettings logSettings;
 
   /// List of log setting overrides.
-  List<_i2.LogSettingsOverride> logSettingsOverrides;
+  List<_i3.LogSettingsOverride> logSettingsOverrides;
 
   /// True if service calls to Serverpod Insights should be logged.
   bool logServiceCalls;
@@ -70,7 +71,7 @@ abstract class RuntimeSettings
   RuntimeSettings copyWith({
     int? id,
     _i2.LogSettings? logSettings,
-    List<_i2.LogSettingsOverride>? logSettingsOverrides,
+    List<_i3.LogSettingsOverride>? logSettingsOverrides,
     bool? logServiceCalls,
     bool? logMalformedCalls,
   });
@@ -134,7 +135,7 @@ class _RuntimeSettingsImpl extends RuntimeSettings {
   _RuntimeSettingsImpl({
     int? id,
     required _i2.LogSettings logSettings,
-    required List<_i2.LogSettingsOverride> logSettingsOverrides,
+    required List<_i3.LogSettingsOverride> logSettingsOverrides,
     required bool logServiceCalls,
     required bool logMalformedCalls,
   }) : super._(
@@ -149,7 +150,7 @@ class _RuntimeSettingsImpl extends RuntimeSettings {
   RuntimeSettings copyWith({
     Object? id = _Undefined,
     _i2.LogSettings? logSettings,
-    List<_i2.LogSettingsOverride>? logSettingsOverrides,
+    List<_i3.LogSettingsOverride>? logSettingsOverrides,
     bool? logServiceCalls,
     bool? logMalformedCalls,
   }) {
diff --git a/packages/serverpod/lib/src/generated/server_health_result.dart b/packages/serverpod/lib/src/generated/server_health_result.dart
index b1baea7e3a..b03027be9d 100644
--- a/packages/serverpod/lib/src/generated/server_health_result.dart
+++ b/packages/serverpod/lib/src/generated/server_health_result.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'server_health_metric.dart' as _i2;
+import 'server_health_connection_info.dart' as _i3;
 
 /// Information about health and connection metrics.
 abstract class ServerHealthResult
@@ -22,7 +23,7 @@ abstract class ServerHealthResult
 
   factory ServerHealthResult({
     required List<_i2.ServerHealthMetric> metrics,
-    required List<_i2.ServerHealthConnectionInfo> connectionInfos,
+    required List<_i3.ServerHealthConnectionInfo> connectionInfos,
   }) = _ServerHealthResultImpl;
 
   factory ServerHealthResult.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -32,7 +33,7 @@ abstract class ServerHealthResult
               _i2.ServerHealthMetric.fromJson((e as Map<String, dynamic>)))
           .toList(),
       connectionInfos: (jsonSerialization['connectionInfos'] as List)
-          .map((e) => _i2.ServerHealthConnectionInfo.fromJson(
+          .map((e) => _i3.ServerHealthConnectionInfo.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
     );
@@ -42,11 +43,11 @@ abstract class ServerHealthResult
   List<_i2.ServerHealthMetric> metrics;
 
   /// List of connection metrics.
-  List<_i2.ServerHealthConnectionInfo> connectionInfos;
+  List<_i3.ServerHealthConnectionInfo> connectionInfos;
 
   ServerHealthResult copyWith({
     List<_i2.ServerHealthMetric>? metrics,
-    List<_i2.ServerHealthConnectionInfo>? connectionInfos,
+    List<_i3.ServerHealthConnectionInfo>? connectionInfos,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -74,7 +75,7 @@ abstract class ServerHealthResult
 class _ServerHealthResultImpl extends ServerHealthResult {
   _ServerHealthResultImpl({
     required List<_i2.ServerHealthMetric> metrics,
-    required List<_i2.ServerHealthConnectionInfo> connectionInfos,
+    required List<_i3.ServerHealthConnectionInfo> connectionInfos,
   }) : super._(
           metrics: metrics,
           connectionInfos: connectionInfos,
@@ -83,7 +84,7 @@ class _ServerHealthResultImpl extends ServerHealthResult {
   @override
   ServerHealthResult copyWith({
     List<_i2.ServerHealthMetric>? metrics,
-    List<_i2.ServerHealthConnectionInfo>? connectionInfos,
+    List<_i3.ServerHealthConnectionInfo>? connectionInfos,
   }) {
     return ServerHealthResult(
       metrics: metrics ?? this.metrics.map((e0) => e0.copyWith()).toList(),
diff --git a/packages/serverpod/lib/src/generated/session_log_info.dart b/packages/serverpod/lib/src/generated/session_log_info.dart
index de3de3b578..840fdf6c00 100644
--- a/packages/serverpod/lib/src/generated/session_log_info.dart
+++ b/packages/serverpod/lib/src/generated/session_log_info.dart
@@ -10,7 +10,10 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'session_log_entry.dart' as _i2;
+import 'query_log_entry.dart' as _i3;
+import 'log_entry.dart' as _i4;
+import 'message_log_entry.dart' as _i5;
 
 /// Compounded information about a session log.
 abstract class SessionLogInfo
@@ -24,9 +27,9 @@ abstract class SessionLogInfo
 
   factory SessionLogInfo({
     required _i2.SessionLogEntry sessionLogEntry,
-    required List<_i2.QueryLogEntry> queries,
-    required List<_i2.LogEntry> logs,
-    required List<_i2.MessageLogEntry> messages,
+    required List<_i3.QueryLogEntry> queries,
+    required List<_i4.LogEntry> logs,
+    required List<_i5.MessageLogEntry> messages,
   }) = _SessionLogInfoImpl;
 
   factory SessionLogInfo.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -34,13 +37,13 @@ abstract class SessionLogInfo
       sessionLogEntry: _i2.SessionLogEntry.fromJson(
           (jsonSerialization['sessionLogEntry'] as Map<String, dynamic>)),
       queries: (jsonSerialization['queries'] as List)
-          .map((e) => _i2.QueryLogEntry.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i3.QueryLogEntry.fromJson((e as Map<String, dynamic>)))
           .toList(),
       logs: (jsonSerialization['logs'] as List)
-          .map((e) => _i2.LogEntry.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i4.LogEntry.fromJson((e as Map<String, dynamic>)))
           .toList(),
       messages: (jsonSerialization['messages'] as List)
-          .map((e) => _i2.MessageLogEntry.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i5.MessageLogEntry.fromJson((e as Map<String, dynamic>)))
           .toList(),
     );
   }
@@ -49,19 +52,19 @@ abstract class SessionLogInfo
   _i2.SessionLogEntry sessionLogEntry;
 
   /// List of queries made during the session.
-  List<_i2.QueryLogEntry> queries;
+  List<_i3.QueryLogEntry> queries;
 
   /// List of log entries made during the session.
-  List<_i2.LogEntry> logs;
+  List<_i4.LogEntry> logs;
 
   /// List of messages sent during the session.
-  List<_i2.MessageLogEntry> messages;
+  List<_i5.MessageLogEntry> messages;
 
   SessionLogInfo copyWith({
     _i2.SessionLogEntry? sessionLogEntry,
-    List<_i2.QueryLogEntry>? queries,
-    List<_i2.LogEntry>? logs,
-    List<_i2.MessageLogEntry>? messages,
+    List<_i3.QueryLogEntry>? queries,
+    List<_i4.LogEntry>? logs,
+    List<_i5.MessageLogEntry>? messages,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -92,9 +95,9 @@ abstract class SessionLogInfo
 class _SessionLogInfoImpl extends SessionLogInfo {
   _SessionLogInfoImpl({
     required _i2.SessionLogEntry sessionLogEntry,
-    required List<_i2.QueryLogEntry> queries,
-    required List<_i2.LogEntry> logs,
-    required List<_i2.MessageLogEntry> messages,
+    required List<_i3.QueryLogEntry> queries,
+    required List<_i4.LogEntry> logs,
+    required List<_i5.MessageLogEntry> messages,
   }) : super._(
           sessionLogEntry: sessionLogEntry,
           queries: queries,
@@ -105,9 +108,9 @@ class _SessionLogInfoImpl extends SessionLogInfo {
   @override
   SessionLogInfo copyWith({
     _i2.SessionLogEntry? sessionLogEntry,
-    List<_i2.QueryLogEntry>? queries,
-    List<_i2.LogEntry>? logs,
-    List<_i2.MessageLogEntry>? messages,
+    List<_i3.QueryLogEntry>? queries,
+    List<_i4.LogEntry>? logs,
+    List<_i5.MessageLogEntry>? messages,
   }) {
     return SessionLogInfo(
       sessionLogEntry: sessionLogEntry ?? this.sessionLogEntry.copyWith(),
diff --git a/packages/serverpod/lib/src/generated/session_log_result.dart b/packages/serverpod/lib/src/generated/session_log_result.dart
index e88ecd8fc7..373000ca4f 100644
--- a/packages/serverpod/lib/src/generated/session_log_result.dart
+++ b/packages/serverpod/lib/src/generated/session_log_result.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'session_log_info.dart' as _i2;
 
 /// A list of SessionLogInfo.
 abstract class SessionLogResult
diff --git a/packages/serverpod_service_client/lib/src/protocol/caches_info.dart b/packages/serverpod_service_client/lib/src/protocol/caches_info.dart
index fe55e4e31e..e29948d605 100644
--- a/packages/serverpod_service_client/lib/src/protocol/caches_info.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/caches_info.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'cache_info.dart' as _i2;
 
 /// High level information about the caches.
 abstract class CachesInfo implements _i1.SerializableModel {
diff --git a/packages/serverpod_service_client/lib/src/protocol/cluster_info.dart b/packages/serverpod_service_client/lib/src/protocol/cluster_info.dart
index 46793acbf8..35fe9d2a5e 100644
--- a/packages/serverpod_service_client/lib/src/protocol/cluster_info.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/cluster_info.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'cluster_server_info.dart' as _i2;
 
 /// Information about a cluster of servers.
 abstract class ClusterInfo implements _i1.SerializableModel {
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/bulk_data.dart b/packages/serverpod_service_client/lib/src/protocol/database/bulk_data.dart
index d680c7250d..875560da89 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/bulk_data.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/bulk_data.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/table_definition.dart' as _i2;
 
 abstract class BulkData implements _i1.SerializableModel {
   BulkData._({
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/bulk_query_result.dart b/packages/serverpod_service_client/lib/src/protocol/database/bulk_query_result.dart
index 1ba4260396..a1be22959a 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/bulk_query_result.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/bulk_query_result.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/bulk_query_column_description.dart' as _i2;
 
 abstract class BulkQueryResult implements _i1.SerializableModel {
   BulkQueryResult._({
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/column_definition.dart b/packages/serverpod_service_client/lib/src/protocol/database/column_definition.dart
index 818465b36c..c4f2994e41 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/column_definition.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/column_definition.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/column_type.dart' as _i2;
 
 /// The definition of a (desired) column in the database.
 abstract class ColumnDefinition implements _i1.SerializableModel {
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/database_definition.dart b/packages/serverpod_service_client/lib/src/protocol/database/database_definition.dart
index e1ca62e5b7..b4fcd1a0a4 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/database_definition.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/database_definition.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/table_definition.dart' as _i2;
+import '../database/database_migration_version.dart' as _i3;
 
 /// Defines the structure of the database used by Serverpod.
 abstract class DatabaseDefinition implements _i1.SerializableModel {
@@ -26,7 +27,7 @@ abstract class DatabaseDefinition implements _i1.SerializableModel {
     String? name,
     required String moduleName,
     required List<_i2.TableDefinition> tables,
-    required List<_i2.DatabaseMigrationVersion> installedModules,
+    required List<_i3.DatabaseMigrationVersion> installedModules,
     required int migrationApiVersion,
   }) = _DatabaseDefinitionImpl;
 
@@ -38,7 +39,7 @@ abstract class DatabaseDefinition implements _i1.SerializableModel {
           .map((e) => _i2.TableDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       installedModules: (jsonSerialization['installedModules'] as List)
-          .map((e) => _i2.DatabaseMigrationVersion.fromJson(
+          .map((e) => _i3.DatabaseMigrationVersion.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
       migrationApiVersion: jsonSerialization['migrationApiVersion'] as int,
@@ -57,7 +58,7 @@ abstract class DatabaseDefinition implements _i1.SerializableModel {
 
   /// Modules installed in the database, together with their version. Only
   /// set if known.
-  List<_i2.DatabaseMigrationVersion> installedModules;
+  List<_i3.DatabaseMigrationVersion> installedModules;
 
   /// The version of the database definition.
   int migrationApiVersion;
@@ -66,7 +67,7 @@ abstract class DatabaseDefinition implements _i1.SerializableModel {
     String? name,
     String? moduleName,
     List<_i2.TableDefinition>? tables,
-    List<_i2.DatabaseMigrationVersion>? installedModules,
+    List<_i3.DatabaseMigrationVersion>? installedModules,
     int? migrationApiVersion,
   });
   @override
@@ -94,7 +95,7 @@ class _DatabaseDefinitionImpl extends DatabaseDefinition {
     String? name,
     required String moduleName,
     required List<_i2.TableDefinition> tables,
-    required List<_i2.DatabaseMigrationVersion> installedModules,
+    required List<_i3.DatabaseMigrationVersion> installedModules,
     required int migrationApiVersion,
   }) : super._(
           name: name,
@@ -109,7 +110,7 @@ class _DatabaseDefinitionImpl extends DatabaseDefinition {
     Object? name = _Undefined,
     String? moduleName,
     List<_i2.TableDefinition>? tables,
-    List<_i2.DatabaseMigrationVersion>? installedModules,
+    List<_i3.DatabaseMigrationVersion>? installedModules,
     int? migrationApiVersion,
   }) {
     return DatabaseDefinition(
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/database_definitions.dart b/packages/serverpod_service_client/lib/src/protocol/database/database_definitions.dart
index a8b6a5d244..03a201c4d9 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/database_definitions.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/database_definitions.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/table_definition.dart' as _i2;
+import '../database/database_migration_version.dart' as _i3;
 
 /// Defines the current state of the database, including information about
 /// installed modules and migrations.
@@ -25,8 +26,8 @@ abstract class DatabaseDefinitions implements _i1.SerializableModel {
   factory DatabaseDefinitions({
     required List<_i2.TableDefinition> target,
     required List<_i2.TableDefinition> live,
-    required List<_i2.DatabaseMigrationVersion> installedMigrations,
-    required List<_i2.DatabaseMigrationVersion> latestAvailableMigrations,
+    required List<_i3.DatabaseMigrationVersion> installedMigrations,
+    required List<_i3.DatabaseMigrationVersion> latestAvailableMigrations,
   }) = _DatabaseDefinitionsImpl;
 
   factory DatabaseDefinitions.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -38,12 +39,12 @@ abstract class DatabaseDefinitions implements _i1.SerializableModel {
           .map((e) => _i2.TableDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       installedMigrations: (jsonSerialization['installedMigrations'] as List)
-          .map((e) => _i2.DatabaseMigrationVersion.fromJson(
+          .map((e) => _i3.DatabaseMigrationVersion.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
       latestAvailableMigrations:
           (jsonSerialization['latestAvailableMigrations'] as List)
-              .map((e) => _i2.DatabaseMigrationVersion.fromJson(
+              .map((e) => _i3.DatabaseMigrationVersion.fromJson(
                   (e as Map<String, dynamic>)))
               .toList(),
     );
@@ -56,16 +57,16 @@ abstract class DatabaseDefinitions implements _i1.SerializableModel {
   List<_i2.TableDefinition> live;
 
   /// The migrations that are installed in the database.
-  List<_i2.DatabaseMigrationVersion> installedMigrations;
+  List<_i3.DatabaseMigrationVersion> installedMigrations;
 
   /// The latest available migrations that can be applied.
-  List<_i2.DatabaseMigrationVersion> latestAvailableMigrations;
+  List<_i3.DatabaseMigrationVersion> latestAvailableMigrations;
 
   DatabaseDefinitions copyWith({
     List<_i2.TableDefinition>? target,
     List<_i2.TableDefinition>? live,
-    List<_i2.DatabaseMigrationVersion>? installedMigrations,
-    List<_i2.DatabaseMigrationVersion>? latestAvailableMigrations,
+    List<_i3.DatabaseMigrationVersion>? installedMigrations,
+    List<_i3.DatabaseMigrationVersion>? latestAvailableMigrations,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -89,8 +90,8 @@ class _DatabaseDefinitionsImpl extends DatabaseDefinitions {
   _DatabaseDefinitionsImpl({
     required List<_i2.TableDefinition> target,
     required List<_i2.TableDefinition> live,
-    required List<_i2.DatabaseMigrationVersion> installedMigrations,
-    required List<_i2.DatabaseMigrationVersion> latestAvailableMigrations,
+    required List<_i3.DatabaseMigrationVersion> installedMigrations,
+    required List<_i3.DatabaseMigrationVersion> latestAvailableMigrations,
   }) : super._(
           target: target,
           live: live,
@@ -102,8 +103,8 @@ class _DatabaseDefinitionsImpl extends DatabaseDefinitions {
   DatabaseDefinitions copyWith({
     List<_i2.TableDefinition>? target,
     List<_i2.TableDefinition>? live,
-    List<_i2.DatabaseMigrationVersion>? installedMigrations,
-    List<_i2.DatabaseMigrationVersion>? latestAvailableMigrations,
+    List<_i3.DatabaseMigrationVersion>? installedMigrations,
+    List<_i3.DatabaseMigrationVersion>? latestAvailableMigrations,
   }) {
     return DatabaseDefinitions(
       target: target ?? this.target.map((e0) => e0.copyWith()).toList(),
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/database_migration.dart b/packages/serverpod_service_client/lib/src/protocol/database/database_migration.dart
index 31f67ca58c..7c824f5ad1 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/database_migration.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/database_migration.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/database_migration_action.dart' as _i2;
+import '../database/database_migration_warning.dart' as _i3;
 
 abstract class DatabaseMigration implements _i1.SerializableModel {
   DatabaseMigration._({
@@ -21,7 +22,7 @@ abstract class DatabaseMigration implements _i1.SerializableModel {
 
   factory DatabaseMigration({
     required List<_i2.DatabaseMigrationAction> actions,
-    required List<_i2.DatabaseMigrationWarning> warnings,
+    required List<_i3.DatabaseMigrationWarning> warnings,
     required int migrationApiVersion,
   }) = _DatabaseMigrationImpl;
 
@@ -32,7 +33,7 @@ abstract class DatabaseMigration implements _i1.SerializableModel {
               _i2.DatabaseMigrationAction.fromJson((e as Map<String, dynamic>)))
           .toList(),
       warnings: (jsonSerialization['warnings'] as List)
-          .map((e) => _i2.DatabaseMigrationWarning.fromJson(
+          .map((e) => _i3.DatabaseMigrationWarning.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
       migrationApiVersion: jsonSerialization['migrationApiVersion'] as int,
@@ -41,13 +42,13 @@ abstract class DatabaseMigration implements _i1.SerializableModel {
 
   List<_i2.DatabaseMigrationAction> actions;
 
-  List<_i2.DatabaseMigrationWarning> warnings;
+  List<_i3.DatabaseMigrationWarning> warnings;
 
   int migrationApiVersion;
 
   DatabaseMigration copyWith({
     List<_i2.DatabaseMigrationAction>? actions,
-    List<_i2.DatabaseMigrationWarning>? warnings,
+    List<_i3.DatabaseMigrationWarning>? warnings,
     int? migrationApiVersion,
   });
   @override
@@ -68,7 +69,7 @@ abstract class DatabaseMigration implements _i1.SerializableModel {
 class _DatabaseMigrationImpl extends DatabaseMigration {
   _DatabaseMigrationImpl({
     required List<_i2.DatabaseMigrationAction> actions,
-    required List<_i2.DatabaseMigrationWarning> warnings,
+    required List<_i3.DatabaseMigrationWarning> warnings,
     required int migrationApiVersion,
   }) : super._(
           actions: actions,
@@ -79,7 +80,7 @@ class _DatabaseMigrationImpl extends DatabaseMigration {
   @override
   DatabaseMigration copyWith({
     List<_i2.DatabaseMigrationAction>? actions,
-    List<_i2.DatabaseMigrationWarning>? warnings,
+    List<_i3.DatabaseMigrationWarning>? warnings,
     int? migrationApiVersion,
   }) {
     return DatabaseMigration(
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/database_migration_action.dart b/packages/serverpod_service_client/lib/src/protocol/database/database_migration_action.dart
index 6f9b87e7d4..8b5549b2ee 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/database_migration_action.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/database_migration_action.dart
@@ -10,7 +10,9 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/database_migration_action_type.dart' as _i2;
+import '../database/table_migration.dart' as _i3;
+import '../database/table_definition.dart' as _i4;
 
 abstract class DatabaseMigrationAction implements _i1.SerializableModel {
   DatabaseMigrationAction._({
@@ -23,8 +25,8 @@ abstract class DatabaseMigrationAction implements _i1.SerializableModel {
   factory DatabaseMigrationAction({
     required _i2.DatabaseMigrationActionType type,
     String? deleteTable,
-    _i2.TableMigration? alterTable,
-    _i2.TableDefinition? createTable,
+    _i3.TableMigration? alterTable,
+    _i4.TableDefinition? createTable,
   }) = _DatabaseMigrationActionImpl;
 
   factory DatabaseMigrationAction.fromJson(
@@ -35,11 +37,11 @@ abstract class DatabaseMigrationAction implements _i1.SerializableModel {
       deleteTable: jsonSerialization['deleteTable'] as String?,
       alterTable: jsonSerialization['alterTable'] == null
           ? null
-          : _i2.TableMigration.fromJson(
+          : _i3.TableMigration.fromJson(
               (jsonSerialization['alterTable'] as Map<String, dynamic>)),
       createTable: jsonSerialization['createTable'] == null
           ? null
-          : _i2.TableDefinition.fromJson(
+          : _i4.TableDefinition.fromJson(
               (jsonSerialization['createTable'] as Map<String, dynamic>)),
     );
   }
@@ -48,15 +50,15 @@ abstract class DatabaseMigrationAction implements _i1.SerializableModel {
 
   String? deleteTable;
 
-  _i2.TableMigration? alterTable;
+  _i3.TableMigration? alterTable;
 
-  _i2.TableDefinition? createTable;
+  _i4.TableDefinition? createTable;
 
   DatabaseMigrationAction copyWith({
     _i2.DatabaseMigrationActionType? type,
     String? deleteTable,
-    _i2.TableMigration? alterTable,
-    _i2.TableDefinition? createTable,
+    _i3.TableMigration? alterTable,
+    _i4.TableDefinition? createTable,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -80,8 +82,8 @@ class _DatabaseMigrationActionImpl extends DatabaseMigrationAction {
   _DatabaseMigrationActionImpl({
     required _i2.DatabaseMigrationActionType type,
     String? deleteTable,
-    _i2.TableMigration? alterTable,
-    _i2.TableDefinition? createTable,
+    _i3.TableMigration? alterTable,
+    _i4.TableDefinition? createTable,
   }) : super._(
           type: type,
           deleteTable: deleteTable,
@@ -99,10 +101,10 @@ class _DatabaseMigrationActionImpl extends DatabaseMigrationAction {
     return DatabaseMigrationAction(
       type: type ?? this.type,
       deleteTable: deleteTable is String? ? deleteTable : this.deleteTable,
-      alterTable: alterTable is _i2.TableMigration?
+      alterTable: alterTable is _i3.TableMigration?
           ? alterTable
           : this.alterTable?.copyWith(),
-      createTable: createTable is _i2.TableDefinition?
+      createTable: createTable is _i4.TableDefinition?
           ? createTable
           : this.createTable?.copyWith(),
     );
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/database_migration_warning.dart b/packages/serverpod_service_client/lib/src/protocol/database/database_migration_warning.dart
index 5aebafe731..b89db95a7f 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/database_migration_warning.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/database_migration_warning.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/database_migration_warning_type.dart' as _i2;
 
 abstract class DatabaseMigrationWarning implements _i1.SerializableModel {
   DatabaseMigrationWarning._({
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/filter/filter.dart b/packages/serverpod_service_client/lib/src/protocol/database/filter/filter.dart
index c4833b332c..472a026f7e 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/filter/filter.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/filter/filter.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../database/filter/filter_constraint.dart' as _i2;
 
 abstract class Filter implements _i1.SerializableModel {
   Filter._({
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/filter/filter_constraint.dart b/packages/serverpod_service_client/lib/src/protocol/database/filter/filter_constraint.dart
index d3ea35c6da..7a615965f7 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/filter/filter_constraint.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/filter/filter_constraint.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../database/filter/filter_constraint_type.dart' as _i2;
 
 abstract class FilterConstraint implements _i1.SerializableModel {
   FilterConstraint._({
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/foreign_key_definition.dart b/packages/serverpod_service_client/lib/src/protocol/database/foreign_key_definition.dart
index 5109a198b7..eb5bf54783 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/foreign_key_definition.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/foreign_key_definition.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/foreign_key_action.dart' as _i2;
+import '../database/foreign_key_match_type.dart' as _i3;
 
 /// Represents a foreign key.
 abstract class ForeignKeyDefinition implements _i1.SerializableModel {
@@ -33,7 +34,7 @@ abstract class ForeignKeyDefinition implements _i1.SerializableModel {
     required List<String> referenceColumns,
     _i2.ForeignKeyAction? onUpdate,
     _i2.ForeignKeyAction? onDelete,
-    _i2.ForeignKeyMatchType? matchType,
+    _i3.ForeignKeyMatchType? matchType,
   }) = _ForeignKeyDefinitionImpl;
 
   factory ForeignKeyDefinition.fromJson(
@@ -58,7 +59,7 @@ abstract class ForeignKeyDefinition implements _i1.SerializableModel {
               (jsonSerialization['onDelete'] as int)),
       matchType: jsonSerialization['matchType'] == null
           ? null
-          : _i2.ForeignKeyMatchType.fromJson(
+          : _i3.ForeignKeyMatchType.fromJson(
               (jsonSerialization['matchType'] as int)),
     );
   }
@@ -85,7 +86,7 @@ abstract class ForeignKeyDefinition implements _i1.SerializableModel {
   _i2.ForeignKeyAction? onDelete;
 
   /// The match type of the foreign key
-  _i2.ForeignKeyMatchType? matchType;
+  _i3.ForeignKeyMatchType? matchType;
 
   ForeignKeyDefinition copyWith({
     String? constraintName,
@@ -95,7 +96,7 @@ abstract class ForeignKeyDefinition implements _i1.SerializableModel {
     List<String>? referenceColumns,
     _i2.ForeignKeyAction? onUpdate,
     _i2.ForeignKeyAction? onDelete,
-    _i2.ForeignKeyMatchType? matchType,
+    _i3.ForeignKeyMatchType? matchType,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -128,7 +129,7 @@ class _ForeignKeyDefinitionImpl extends ForeignKeyDefinition {
     required List<String> referenceColumns,
     _i2.ForeignKeyAction? onUpdate,
     _i2.ForeignKeyAction? onDelete,
-    _i2.ForeignKeyMatchType? matchType,
+    _i3.ForeignKeyMatchType? matchType,
   }) : super._(
           constraintName: constraintName,
           columns: columns,
@@ -161,7 +162,7 @@ class _ForeignKeyDefinitionImpl extends ForeignKeyDefinition {
       onUpdate: onUpdate is _i2.ForeignKeyAction? ? onUpdate : this.onUpdate,
       onDelete: onDelete is _i2.ForeignKeyAction? ? onDelete : this.onDelete,
       matchType:
-          matchType is _i2.ForeignKeyMatchType? ? matchType : this.matchType,
+          matchType is _i3.ForeignKeyMatchType? ? matchType : this.matchType,
     );
   }
 }
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/index_definition.dart b/packages/serverpod_service_client/lib/src/protocol/database/index_definition.dart
index e234072ba1..5fd5019f5e 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/index_definition.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/index_definition.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/index_element_definition.dart' as _i2;
 
 /// The definition of a (desired) index in the database.
 abstract class IndexDefinition implements _i1.SerializableModel {
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/index_element_definition.dart b/packages/serverpod_service_client/lib/src/protocol/database/index_element_definition.dart
index 1df9574925..5fa67e2cb1 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/index_element_definition.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/index_element_definition.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/index_element_definition_type.dart' as _i2;
 
 /// Defines an element of an index.
 abstract class IndexElementDefinition implements _i1.SerializableModel {
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/table_definition.dart b/packages/serverpod_service_client/lib/src/protocol/database/table_definition.dart
index 90bd158292..d869a3e0b4 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/table_definition.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/table_definition.dart
@@ -10,7 +10,9 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/column_definition.dart' as _i2;
+import '../database/foreign_key_definition.dart' as _i3;
+import '../database/index_definition.dart' as _i4;
 
 /// The definition of a (desired) table in the database.
 abstract class TableDefinition implements _i1.SerializableModel {
@@ -33,8 +35,8 @@ abstract class TableDefinition implements _i1.SerializableModel {
     required String schema,
     String? tableSpace,
     required List<_i2.ColumnDefinition> columns,
-    required List<_i2.ForeignKeyDefinition> foreignKeys,
-    required List<_i2.IndexDefinition> indexes,
+    required List<_i3.ForeignKeyDefinition> foreignKeys,
+    required List<_i4.IndexDefinition> indexes,
     bool? managed,
   }) = _TableDefinitionImpl;
 
@@ -51,10 +53,10 @@ abstract class TableDefinition implements _i1.SerializableModel {
           .toList(),
       foreignKeys: (jsonSerialization['foreignKeys'] as List)
           .map((e) =>
-              _i2.ForeignKeyDefinition.fromJson((e as Map<String, dynamic>)))
+              _i3.ForeignKeyDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       indexes: (jsonSerialization['indexes'] as List)
-          .map((e) => _i2.IndexDefinition.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i4.IndexDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       managed: jsonSerialization['managed'] as bool?,
     );
@@ -80,10 +82,10 @@ abstract class TableDefinition implements _i1.SerializableModel {
   List<_i2.ColumnDefinition> columns;
 
   /// All the foreign keys.
-  List<_i2.ForeignKeyDefinition> foreignKeys;
+  List<_i3.ForeignKeyDefinition> foreignKeys;
 
   /// All the indexes of this table.
-  List<_i2.IndexDefinition> indexes;
+  List<_i4.IndexDefinition> indexes;
 
   /// Indicates if the table should be managed by Serverpod.
   /// Null, if this is unknown.
@@ -96,8 +98,8 @@ abstract class TableDefinition implements _i1.SerializableModel {
     String? schema,
     String? tableSpace,
     List<_i2.ColumnDefinition>? columns,
-    List<_i2.ForeignKeyDefinition>? foreignKeys,
-    List<_i2.IndexDefinition>? indexes,
+    List<_i3.ForeignKeyDefinition>? foreignKeys,
+    List<_i4.IndexDefinition>? indexes,
     bool? managed,
   });
   @override
@@ -131,8 +133,8 @@ class _TableDefinitionImpl extends TableDefinition {
     required String schema,
     String? tableSpace,
     required List<_i2.ColumnDefinition> columns,
-    required List<_i2.ForeignKeyDefinition> foreignKeys,
-    required List<_i2.IndexDefinition> indexes,
+    required List<_i3.ForeignKeyDefinition> foreignKeys,
+    required List<_i4.IndexDefinition> indexes,
     bool? managed,
   }) : super._(
           name: name,
@@ -154,8 +156,8 @@ class _TableDefinitionImpl extends TableDefinition {
     String? schema,
     Object? tableSpace = _Undefined,
     List<_i2.ColumnDefinition>? columns,
-    List<_i2.ForeignKeyDefinition>? foreignKeys,
-    List<_i2.IndexDefinition>? indexes,
+    List<_i3.ForeignKeyDefinition>? foreignKeys,
+    List<_i4.IndexDefinition>? indexes,
     Object? managed = _Undefined,
   }) {
     return TableDefinition(
diff --git a/packages/serverpod_service_client/lib/src/protocol/database/table_migration.dart b/packages/serverpod_service_client/lib/src/protocol/database/table_migration.dart
index b3d344f73c..6a1676d7e7 100644
--- a/packages/serverpod_service_client/lib/src/protocol/database/table_migration.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/database/table_migration.dart
@@ -10,7 +10,11 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../database/column_definition.dart' as _i2;
+import '../database/column_migration.dart' as _i3;
+import '../database/index_definition.dart' as _i4;
+import '../database/foreign_key_definition.dart' as _i5;
+import '../database/database_migration_warning.dart' as _i6;
 
 abstract class TableMigration implements _i1.SerializableModel {
   TableMigration._({
@@ -35,12 +39,12 @@ abstract class TableMigration implements _i1.SerializableModel {
     required String schema,
     required List<_i2.ColumnDefinition> addColumns,
     required List<String> deleteColumns,
-    required List<_i2.ColumnMigration> modifyColumns,
-    required List<_i2.IndexDefinition> addIndexes,
+    required List<_i3.ColumnMigration> modifyColumns,
+    required List<_i4.IndexDefinition> addIndexes,
     required List<String> deleteIndexes,
-    required List<_i2.ForeignKeyDefinition> addForeignKeys,
+    required List<_i5.ForeignKeyDefinition> addForeignKeys,
     required List<String> deleteForeignKeys,
-    required List<_i2.DatabaseMigrationWarning> warnings,
+    required List<_i6.DatabaseMigrationWarning> warnings,
   }) = _TableMigrationImpl;
 
   factory TableMigration.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -57,23 +61,23 @@ abstract class TableMigration implements _i1.SerializableModel {
           .map((e) => e as String)
           .toList(),
       modifyColumns: (jsonSerialization['modifyColumns'] as List)
-          .map((e) => _i2.ColumnMigration.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i3.ColumnMigration.fromJson((e as Map<String, dynamic>)))
           .toList(),
       addIndexes: (jsonSerialization['addIndexes'] as List)
-          .map((e) => _i2.IndexDefinition.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i4.IndexDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       deleteIndexes: (jsonSerialization['deleteIndexes'] as List)
           .map((e) => e as String)
           .toList(),
       addForeignKeys: (jsonSerialization['addForeignKeys'] as List)
           .map((e) =>
-              _i2.ForeignKeyDefinition.fromJson((e as Map<String, dynamic>)))
+              _i5.ForeignKeyDefinition.fromJson((e as Map<String, dynamic>)))
           .toList(),
       deleteForeignKeys: (jsonSerialization['deleteForeignKeys'] as List)
           .map((e) => e as String)
           .toList(),
       warnings: (jsonSerialization['warnings'] as List)
-          .map((e) => _i2.DatabaseMigrationWarning.fromJson(
+          .map((e) => _i6.DatabaseMigrationWarning.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
     );
@@ -91,17 +95,17 @@ abstract class TableMigration implements _i1.SerializableModel {
 
   List<String> deleteColumns;
 
-  List<_i2.ColumnMigration> modifyColumns;
+  List<_i3.ColumnMigration> modifyColumns;
 
-  List<_i2.IndexDefinition> addIndexes;
+  List<_i4.IndexDefinition> addIndexes;
 
   List<String> deleteIndexes;
 
-  List<_i2.ForeignKeyDefinition> addForeignKeys;
+  List<_i5.ForeignKeyDefinition> addForeignKeys;
 
   List<String> deleteForeignKeys;
 
-  List<_i2.DatabaseMigrationWarning> warnings;
+  List<_i6.DatabaseMigrationWarning> warnings;
 
   TableMigration copyWith({
     String? name,
@@ -110,12 +114,12 @@ abstract class TableMigration implements _i1.SerializableModel {
     String? schema,
     List<_i2.ColumnDefinition>? addColumns,
     List<String>? deleteColumns,
-    List<_i2.ColumnMigration>? modifyColumns,
-    List<_i2.IndexDefinition>? addIndexes,
+    List<_i3.ColumnMigration>? modifyColumns,
+    List<_i4.IndexDefinition>? addIndexes,
     List<String>? deleteIndexes,
-    List<_i2.ForeignKeyDefinition>? addForeignKeys,
+    List<_i5.ForeignKeyDefinition>? addForeignKeys,
     List<String>? deleteForeignKeys,
-    List<_i2.DatabaseMigrationWarning>? warnings,
+    List<_i6.DatabaseMigrationWarning>? warnings,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -151,12 +155,12 @@ class _TableMigrationImpl extends TableMigration {
     required String schema,
     required List<_i2.ColumnDefinition> addColumns,
     required List<String> deleteColumns,
-    required List<_i2.ColumnMigration> modifyColumns,
-    required List<_i2.IndexDefinition> addIndexes,
+    required List<_i3.ColumnMigration> modifyColumns,
+    required List<_i4.IndexDefinition> addIndexes,
     required List<String> deleteIndexes,
-    required List<_i2.ForeignKeyDefinition> addForeignKeys,
+    required List<_i5.ForeignKeyDefinition> addForeignKeys,
     required List<String> deleteForeignKeys,
-    required List<_i2.DatabaseMigrationWarning> warnings,
+    required List<_i6.DatabaseMigrationWarning> warnings,
   }) : super._(
           name: name,
           dartName: dartName,
@@ -180,12 +184,12 @@ class _TableMigrationImpl extends TableMigration {
     String? schema,
     List<_i2.ColumnDefinition>? addColumns,
     List<String>? deleteColumns,
-    List<_i2.ColumnMigration>? modifyColumns,
-    List<_i2.IndexDefinition>? addIndexes,
+    List<_i3.ColumnMigration>? modifyColumns,
+    List<_i4.IndexDefinition>? addIndexes,
     List<String>? deleteIndexes,
-    List<_i2.ForeignKeyDefinition>? addForeignKeys,
+    List<_i5.ForeignKeyDefinition>? addForeignKeys,
     List<String>? deleteForeignKeys,
-    List<_i2.DatabaseMigrationWarning>? warnings,
+    List<_i6.DatabaseMigrationWarning>? warnings,
   }) {
     return TableMigration(
       name: name ?? this.name,
diff --git a/packages/serverpod_service_client/lib/src/protocol/log_entry.dart b/packages/serverpod_service_client/lib/src/protocol/log_entry.dart
index 3288f251b9..93c85d9957 100644
--- a/packages/serverpod_service_client/lib/src/protocol/log_entry.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/log_entry.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_level.dart' as _i2;
 
 /// Bindings to a log entry in the database.
 abstract class LogEntry implements _i1.SerializableModel {
diff --git a/packages/serverpod_service_client/lib/src/protocol/log_result.dart b/packages/serverpod_service_client/lib/src/protocol/log_result.dart
index 78161bea47..e820021715 100644
--- a/packages/serverpod_service_client/lib/src/protocol/log_result.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/log_result.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_entry.dart' as _i2;
 
 /// A list of log entries, used to return logging data.
 abstract class LogResult implements _i1.SerializableModel {
diff --git a/packages/serverpod_service_client/lib/src/protocol/log_settings.dart b/packages/serverpod_service_client/lib/src/protocol/log_settings.dart
index c61c40da0c..1a34f9a8a0 100644
--- a/packages/serverpod_service_client/lib/src/protocol/log_settings.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/log_settings.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_level.dart' as _i2;
 
 /// Log settings for the server.
 abstract class LogSettings implements _i1.SerializableModel {
diff --git a/packages/serverpod_service_client/lib/src/protocol/log_settings_override.dart b/packages/serverpod_service_client/lib/src/protocol/log_settings_override.dart
index f1e24be6f0..a1b4be08ae 100644
--- a/packages/serverpod_service_client/lib/src/protocol/log_settings_override.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/log_settings_override.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_settings.dart' as _i2;
 
 /// Information about an override for log settings for either an entire
 /// endpoint or a specific method.
diff --git a/packages/serverpod_service_client/lib/src/protocol/protocol.dart b/packages/serverpod_service_client/lib/src/protocol/protocol.dart
index 2b43c963f7..3e659ae644 100644
--- a/packages/serverpod_service_client/lib/src/protocol/protocol.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/protocol.dart
@@ -65,9 +65,8 @@ import 'session_log_entry.dart' as _i53;
 import 'session_log_filter.dart' as _i54;
 import 'session_log_info.dart' as _i55;
 import 'session_log_result.dart' as _i56;
-import 'protocol.dart' as _i57;
 import 'package:serverpod_service_client/src/protocol/database/table_definition.dart'
-    as _i58;
+    as _i57;
 export 'cache_info.dart';
 export 'caches_info.dart';
 export 'cloud_storage.dart';
@@ -504,107 +503,107 @@ class Protocol extends _i1.SerializationManager {
           ? (data as List).map((e) => deserialize<String>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i57.ClusterServerInfo>) {
+    if (t == List<_i7.ClusterServerInfo>) {
       return (data as List)
-          .map((e) => deserialize<_i57.ClusterServerInfo>(e))
+          .map((e) => deserialize<_i7.ClusterServerInfo>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.BulkQueryColumnDescription>) {
+    if (t == List<_i10.BulkQueryColumnDescription>) {
       return (data as List)
-          .map((e) => deserialize<_i57.BulkQueryColumnDescription>(e))
+          .map((e) => deserialize<_i10.BulkQueryColumnDescription>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.TableDefinition>) {
+    if (t == List<_i33.TableDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i57.TableDefinition>(e))
+          .map((e) => deserialize<_i33.TableDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.DatabaseMigrationVersion>) {
+    if (t == List<_i20.DatabaseMigrationVersion>) {
       return (data as List)
-          .map((e) => deserialize<_i57.DatabaseMigrationVersion>(e))
+          .map((e) => deserialize<_i20.DatabaseMigrationVersion>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.DatabaseMigrationAction>) {
+    if (t == List<_i18.DatabaseMigrationAction>) {
       return (data as List)
-          .map((e) => deserialize<_i57.DatabaseMigrationAction>(e))
+          .map((e) => deserialize<_i18.DatabaseMigrationAction>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.DatabaseMigrationWarning>) {
+    if (t == List<_i21.DatabaseMigrationWarning>) {
       return (data as List)
-          .map((e) => deserialize<_i57.DatabaseMigrationWarning>(e))
+          .map((e) => deserialize<_i21.DatabaseMigrationWarning>(e))
           .toList() as dynamic;
     }
     if (t == List<String>) {
       return (data as List).map((e) => deserialize<String>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i57.FilterConstraint>) {
+    if (t == List<_i25.FilterConstraint>) {
       return (data as List)
-          .map((e) => deserialize<_i57.FilterConstraint>(e))
+          .map((e) => deserialize<_i25.FilterConstraint>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.IndexElementDefinition>) {
+    if (t == List<_i31.IndexElementDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i57.IndexElementDefinition>(e))
+          .map((e) => deserialize<_i31.IndexElementDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.ColumnDefinition>) {
+    if (t == List<_i12.ColumnDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i57.ColumnDefinition>(e))
+          .map((e) => deserialize<_i12.ColumnDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.ForeignKeyDefinition>) {
+    if (t == List<_i28.ForeignKeyDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i57.ForeignKeyDefinition>(e))
+          .map((e) => deserialize<_i28.ForeignKeyDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.IndexDefinition>) {
+    if (t == List<_i30.IndexDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i57.IndexDefinition>(e))
+          .map((e) => deserialize<_i30.IndexDefinition>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.ColumnMigration>) {
+    if (t == List<_i13.ColumnMigration>) {
       return (data as List)
-          .map((e) => deserialize<_i57.ColumnMigration>(e))
+          .map((e) => deserialize<_i13.ColumnMigration>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.LogEntry>) {
-      return (data as List).map((e) => deserialize<_i57.LogEntry>(e)).toList()
+    if (t == List<_i39.LogEntry>) {
+      return (data as List).map((e) => deserialize<_i39.LogEntry>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i57.LogSettingsOverride>) {
+    if (t == List<_i43.LogSettingsOverride>) {
       return (data as List)
-          .map((e) => deserialize<_i57.LogSettingsOverride>(e))
+          .map((e) => deserialize<_i43.LogSettingsOverride>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.ServerHealthMetric>) {
+    if (t == List<_i50.ServerHealthMetric>) {
       return (data as List)
-          .map((e) => deserialize<_i57.ServerHealthMetric>(e))
+          .map((e) => deserialize<_i50.ServerHealthMetric>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.ServerHealthConnectionInfo>) {
+    if (t == List<_i49.ServerHealthConnectionInfo>) {
       return (data as List)
-          .map((e) => deserialize<_i57.ServerHealthConnectionInfo>(e))
+          .map((e) => deserialize<_i49.ServerHealthConnectionInfo>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.QueryLogEntry>) {
+    if (t == List<_i46.QueryLogEntry>) {
       return (data as List)
-          .map((e) => deserialize<_i57.QueryLogEntry>(e))
+          .map((e) => deserialize<_i46.QueryLogEntry>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.MessageLogEntry>) {
+    if (t == List<_i44.MessageLogEntry>) {
       return (data as List)
-          .map((e) => deserialize<_i57.MessageLogEntry>(e))
+          .map((e) => deserialize<_i44.MessageLogEntry>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i57.SessionLogInfo>) {
+    if (t == List<_i55.SessionLogInfo>) {
       return (data as List)
-          .map((e) => deserialize<_i57.SessionLogInfo>(e))
+          .map((e) => deserialize<_i55.SessionLogInfo>(e))
           .toList() as dynamic;
     }
-    if (t == List<_i58.TableDefinition>) {
+    if (t == List<_i57.TableDefinition>) {
       return (data as List)
-          .map((e) => deserialize<_i58.TableDefinition>(e))
+          .map((e) => deserialize<_i57.TableDefinition>(e))
           .toList() as dynamic;
     }
     if (t == List<String>) {
diff --git a/packages/serverpod_service_client/lib/src/protocol/runtime_settings.dart b/packages/serverpod_service_client/lib/src/protocol/runtime_settings.dart
index 2013e9c4b6..2b63074fba 100644
--- a/packages/serverpod_service_client/lib/src/protocol/runtime_settings.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/runtime_settings.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'log_settings.dart' as _i2;
+import 'log_settings_override.dart' as _i3;
 
 /// Runtime settings of the server.
 abstract class RuntimeSettings implements _i1.SerializableModel {
@@ -25,7 +26,7 @@ abstract class RuntimeSettings implements _i1.SerializableModel {
   factory RuntimeSettings({
     int? id,
     required _i2.LogSettings logSettings,
-    required List<_i2.LogSettingsOverride> logSettingsOverrides,
+    required List<_i3.LogSettingsOverride> logSettingsOverrides,
     required bool logServiceCalls,
     required bool logMalformedCalls,
   }) = _RuntimeSettingsImpl;
@@ -37,7 +38,7 @@ abstract class RuntimeSettings implements _i1.SerializableModel {
           (jsonSerialization['logSettings'] as Map<String, dynamic>)),
       logSettingsOverrides: (jsonSerialization['logSettingsOverrides'] as List)
           .map((e) =>
-              _i2.LogSettingsOverride.fromJson((e as Map<String, dynamic>)))
+              _i3.LogSettingsOverride.fromJson((e as Map<String, dynamic>)))
           .toList(),
       logServiceCalls: jsonSerialization['logServiceCalls'] as bool,
       logMalformedCalls: jsonSerialization['logMalformedCalls'] as bool,
@@ -53,7 +54,7 @@ abstract class RuntimeSettings implements _i1.SerializableModel {
   _i2.LogSettings logSettings;
 
   /// List of log setting overrides.
-  List<_i2.LogSettingsOverride> logSettingsOverrides;
+  List<_i3.LogSettingsOverride> logSettingsOverrides;
 
   /// True if service calls to Serverpod Insights should be logged.
   bool logServiceCalls;
@@ -64,7 +65,7 @@ abstract class RuntimeSettings implements _i1.SerializableModel {
   RuntimeSettings copyWith({
     int? id,
     _i2.LogSettings? logSettings,
-    List<_i2.LogSettingsOverride>? logSettingsOverrides,
+    List<_i3.LogSettingsOverride>? logSettingsOverrides,
     bool? logServiceCalls,
     bool? logMalformedCalls,
   });
@@ -92,7 +93,7 @@ class _RuntimeSettingsImpl extends RuntimeSettings {
   _RuntimeSettingsImpl({
     int? id,
     required _i2.LogSettings logSettings,
-    required List<_i2.LogSettingsOverride> logSettingsOverrides,
+    required List<_i3.LogSettingsOverride> logSettingsOverrides,
     required bool logServiceCalls,
     required bool logMalformedCalls,
   }) : super._(
@@ -107,7 +108,7 @@ class _RuntimeSettingsImpl extends RuntimeSettings {
   RuntimeSettings copyWith({
     Object? id = _Undefined,
     _i2.LogSettings? logSettings,
-    List<_i2.LogSettingsOverride>? logSettingsOverrides,
+    List<_i3.LogSettingsOverride>? logSettingsOverrides,
     bool? logServiceCalls,
     bool? logMalformedCalls,
   }) {
diff --git a/packages/serverpod_service_client/lib/src/protocol/server_health_result.dart b/packages/serverpod_service_client/lib/src/protocol/server_health_result.dart
index e1cecf1d1f..5de7b5a056 100644
--- a/packages/serverpod_service_client/lib/src/protocol/server_health_result.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/server_health_result.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'server_health_metric.dart' as _i2;
+import 'server_health_connection_info.dart' as _i3;
 
 /// Information about health and connection metrics.
 abstract class ServerHealthResult implements _i1.SerializableModel {
@@ -21,7 +22,7 @@ abstract class ServerHealthResult implements _i1.SerializableModel {
 
   factory ServerHealthResult({
     required List<_i2.ServerHealthMetric> metrics,
-    required List<_i2.ServerHealthConnectionInfo> connectionInfos,
+    required List<_i3.ServerHealthConnectionInfo> connectionInfos,
   }) = _ServerHealthResultImpl;
 
   factory ServerHealthResult.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -31,7 +32,7 @@ abstract class ServerHealthResult implements _i1.SerializableModel {
               _i2.ServerHealthMetric.fromJson((e as Map<String, dynamic>)))
           .toList(),
       connectionInfos: (jsonSerialization['connectionInfos'] as List)
-          .map((e) => _i2.ServerHealthConnectionInfo.fromJson(
+          .map((e) => _i3.ServerHealthConnectionInfo.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
     );
@@ -41,11 +42,11 @@ abstract class ServerHealthResult implements _i1.SerializableModel {
   List<_i2.ServerHealthMetric> metrics;
 
   /// List of connection metrics.
-  List<_i2.ServerHealthConnectionInfo> connectionInfos;
+  List<_i3.ServerHealthConnectionInfo> connectionInfos;
 
   ServerHealthResult copyWith({
     List<_i2.ServerHealthMetric>? metrics,
-    List<_i2.ServerHealthConnectionInfo>? connectionInfos,
+    List<_i3.ServerHealthConnectionInfo>? connectionInfos,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -64,7 +65,7 @@ abstract class ServerHealthResult implements _i1.SerializableModel {
 class _ServerHealthResultImpl extends ServerHealthResult {
   _ServerHealthResultImpl({
     required List<_i2.ServerHealthMetric> metrics,
-    required List<_i2.ServerHealthConnectionInfo> connectionInfos,
+    required List<_i3.ServerHealthConnectionInfo> connectionInfos,
   }) : super._(
           metrics: metrics,
           connectionInfos: connectionInfos,
@@ -73,7 +74,7 @@ class _ServerHealthResultImpl extends ServerHealthResult {
   @override
   ServerHealthResult copyWith({
     List<_i2.ServerHealthMetric>? metrics,
-    List<_i2.ServerHealthConnectionInfo>? connectionInfos,
+    List<_i3.ServerHealthConnectionInfo>? connectionInfos,
   }) {
     return ServerHealthResult(
       metrics: metrics ?? this.metrics.map((e0) => e0.copyWith()).toList(),
diff --git a/packages/serverpod_service_client/lib/src/protocol/session_log_info.dart b/packages/serverpod_service_client/lib/src/protocol/session_log_info.dart
index ba6e0b19ed..91f61471ba 100644
--- a/packages/serverpod_service_client/lib/src/protocol/session_log_info.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/session_log_info.dart
@@ -10,7 +10,10 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'session_log_entry.dart' as _i2;
+import 'query_log_entry.dart' as _i3;
+import 'log_entry.dart' as _i4;
+import 'message_log_entry.dart' as _i5;
 
 /// Compounded information about a session log.
 abstract class SessionLogInfo implements _i1.SerializableModel {
@@ -23,9 +26,9 @@ abstract class SessionLogInfo implements _i1.SerializableModel {
 
   factory SessionLogInfo({
     required _i2.SessionLogEntry sessionLogEntry,
-    required List<_i2.QueryLogEntry> queries,
-    required List<_i2.LogEntry> logs,
-    required List<_i2.MessageLogEntry> messages,
+    required List<_i3.QueryLogEntry> queries,
+    required List<_i4.LogEntry> logs,
+    required List<_i5.MessageLogEntry> messages,
   }) = _SessionLogInfoImpl;
 
   factory SessionLogInfo.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -33,13 +36,13 @@ abstract class SessionLogInfo implements _i1.SerializableModel {
       sessionLogEntry: _i2.SessionLogEntry.fromJson(
           (jsonSerialization['sessionLogEntry'] as Map<String, dynamic>)),
       queries: (jsonSerialization['queries'] as List)
-          .map((e) => _i2.QueryLogEntry.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i3.QueryLogEntry.fromJson((e as Map<String, dynamic>)))
           .toList(),
       logs: (jsonSerialization['logs'] as List)
-          .map((e) => _i2.LogEntry.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i4.LogEntry.fromJson((e as Map<String, dynamic>)))
           .toList(),
       messages: (jsonSerialization['messages'] as List)
-          .map((e) => _i2.MessageLogEntry.fromJson((e as Map<String, dynamic>)))
+          .map((e) => _i5.MessageLogEntry.fromJson((e as Map<String, dynamic>)))
           .toList(),
     );
   }
@@ -48,19 +51,19 @@ abstract class SessionLogInfo implements _i1.SerializableModel {
   _i2.SessionLogEntry sessionLogEntry;
 
   /// List of queries made during the session.
-  List<_i2.QueryLogEntry> queries;
+  List<_i3.QueryLogEntry> queries;
 
   /// List of log entries made during the session.
-  List<_i2.LogEntry> logs;
+  List<_i4.LogEntry> logs;
 
   /// List of messages sent during the session.
-  List<_i2.MessageLogEntry> messages;
+  List<_i5.MessageLogEntry> messages;
 
   SessionLogInfo copyWith({
     _i2.SessionLogEntry? sessionLogEntry,
-    List<_i2.QueryLogEntry>? queries,
-    List<_i2.LogEntry>? logs,
-    List<_i2.MessageLogEntry>? messages,
+    List<_i3.QueryLogEntry>? queries,
+    List<_i4.LogEntry>? logs,
+    List<_i5.MessageLogEntry>? messages,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -81,9 +84,9 @@ abstract class SessionLogInfo implements _i1.SerializableModel {
 class _SessionLogInfoImpl extends SessionLogInfo {
   _SessionLogInfoImpl({
     required _i2.SessionLogEntry sessionLogEntry,
-    required List<_i2.QueryLogEntry> queries,
-    required List<_i2.LogEntry> logs,
-    required List<_i2.MessageLogEntry> messages,
+    required List<_i3.QueryLogEntry> queries,
+    required List<_i4.LogEntry> logs,
+    required List<_i5.MessageLogEntry> messages,
   }) : super._(
           sessionLogEntry: sessionLogEntry,
           queries: queries,
@@ -94,9 +97,9 @@ class _SessionLogInfoImpl extends SessionLogInfo {
   @override
   SessionLogInfo copyWith({
     _i2.SessionLogEntry? sessionLogEntry,
-    List<_i2.QueryLogEntry>? queries,
-    List<_i2.LogEntry>? logs,
-    List<_i2.MessageLogEntry>? messages,
+    List<_i3.QueryLogEntry>? queries,
+    List<_i4.LogEntry>? logs,
+    List<_i5.MessageLogEntry>? messages,
   }) {
     return SessionLogInfo(
       sessionLogEntry: sessionLogEntry ?? this.sessionLogEntry.copyWith(),
diff --git a/packages/serverpod_service_client/lib/src/protocol/session_log_result.dart b/packages/serverpod_service_client/lib/src/protocol/session_log_result.dart
index a5ee127d90..14531f6c40 100644
--- a/packages/serverpod_service_client/lib/src/protocol/session_log_result.dart
+++ b/packages/serverpod_service_client/lib/src/protocol/session_log_result.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'session_log_info.dart' as _i2;
 
 /// A list of SessionLogInfo.
 abstract class SessionLogResult implements _i1.SerializableModel {
diff --git a/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default.dart b/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default.dart
index 6f8ff54313..5644cfb472 100644
--- a/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default.dart
@@ -10,27 +10,28 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
+import '../../defaults/enum/enums/by_index_enum.dart' as _i3;
 
 abstract class EnumDefault implements _i1.SerializableModel {
   EnumDefault._({
     this.id,
     _i2.ByNameEnum? byNameEnumDefault,
     _i2.ByNameEnum? byNameEnumDefaultNull,
-    _i2.ByIndexEnum? byIndexEnumDefault,
-    _i2.ByIndexEnum? byIndexEnumDefaultNull,
+    _i3.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefaultNull,
   })  : byNameEnumDefault = byNameEnumDefault ?? _i2.ByNameEnum.byName1,
         byNameEnumDefaultNull = byNameEnumDefaultNull ?? _i2.ByNameEnum.byName2,
-        byIndexEnumDefault = byIndexEnumDefault ?? _i2.ByIndexEnum.byIndex1,
+        byIndexEnumDefault = byIndexEnumDefault ?? _i3.ByIndexEnum.byIndex1,
         byIndexEnumDefaultNull =
-            byIndexEnumDefaultNull ?? _i2.ByIndexEnum.byIndex2;
+            byIndexEnumDefaultNull ?? _i3.ByIndexEnum.byIndex2;
 
   factory EnumDefault({
     int? id,
     _i2.ByNameEnum? byNameEnumDefault,
     _i2.ByNameEnum? byNameEnumDefaultNull,
-    _i2.ByIndexEnum? byIndexEnumDefault,
-    _i2.ByIndexEnum? byIndexEnumDefaultNull,
+    _i3.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefaultNull,
   }) = _EnumDefaultImpl;
 
   factory EnumDefault.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -42,12 +43,12 @@ abstract class EnumDefault implements _i1.SerializableModel {
           ? null
           : _i2.ByNameEnum.fromJson(
               (jsonSerialization['byNameEnumDefaultNull'] as String)),
-      byIndexEnumDefault: _i2.ByIndexEnum.fromJson(
+      byIndexEnumDefault: _i3.ByIndexEnum.fromJson(
           (jsonSerialization['byIndexEnumDefault'] as int)),
       byIndexEnumDefaultNull:
           jsonSerialization['byIndexEnumDefaultNull'] == null
               ? null
-              : _i2.ByIndexEnum.fromJson(
+              : _i3.ByIndexEnum.fromJson(
                   (jsonSerialization['byIndexEnumDefaultNull'] as int)),
     );
   }
@@ -61,16 +62,16 @@ abstract class EnumDefault implements _i1.SerializableModel {
 
   _i2.ByNameEnum? byNameEnumDefaultNull;
 
-  _i2.ByIndexEnum byIndexEnumDefault;
+  _i3.ByIndexEnum byIndexEnumDefault;
 
-  _i2.ByIndexEnum? byIndexEnumDefaultNull;
+  _i3.ByIndexEnum? byIndexEnumDefaultNull;
 
   EnumDefault copyWith({
     int? id,
     _i2.ByNameEnum? byNameEnumDefault,
     _i2.ByNameEnum? byNameEnumDefaultNull,
-    _i2.ByIndexEnum? byIndexEnumDefault,
-    _i2.ByIndexEnum? byIndexEnumDefaultNull,
+    _i3.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefaultNull,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -98,8 +99,8 @@ class _EnumDefaultImpl extends EnumDefault {
     int? id,
     _i2.ByNameEnum? byNameEnumDefault,
     _i2.ByNameEnum? byNameEnumDefaultNull,
-    _i2.ByIndexEnum? byIndexEnumDefault,
-    _i2.ByIndexEnum? byIndexEnumDefaultNull,
+    _i3.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefaultNull,
   }) : super._(
           id: id,
           byNameEnumDefault: byNameEnumDefault,
@@ -113,7 +114,7 @@ class _EnumDefaultImpl extends EnumDefault {
     Object? id = _Undefined,
     _i2.ByNameEnum? byNameEnumDefault,
     Object? byNameEnumDefaultNull = _Undefined,
-    _i2.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefault,
     Object? byIndexEnumDefaultNull = _Undefined,
   }) {
     return EnumDefault(
@@ -123,7 +124,7 @@ class _EnumDefaultImpl extends EnumDefault {
           ? byNameEnumDefaultNull
           : this.byNameEnumDefaultNull,
       byIndexEnumDefault: byIndexEnumDefault ?? this.byIndexEnumDefault,
-      byIndexEnumDefaultNull: byIndexEnumDefaultNull is _i2.ByIndexEnum?
+      byIndexEnumDefaultNull: byIndexEnumDefaultNull is _i3.ByIndexEnum?
           ? byIndexEnumDefaultNull
           : this.byIndexEnumDefaultNull,
     );
diff --git a/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_mix.dart b/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_mix.dart
index 3afb5b6aae..ad8ab6df27 100644
--- a/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_mix.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_mix.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
 
 abstract class EnumDefaultMix implements _i1.SerializableModel {
   EnumDefaultMix._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_model.dart b/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_model.dart
index 594ea1bc70..ef81aeec99 100644
--- a/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_model.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_model.dart
@@ -10,30 +10,31 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
+import '../../defaults/enum/enums/by_index_enum.dart' as _i3;
 
 abstract class EnumDefaultModel implements _i1.SerializableModel {
   EnumDefaultModel._({
     this.id,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     _i2.ByNameEnum? byNameEnumDefaultModelNull,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
-    _i2.ByIndexEnum? byIndexEnumDefaultModelNull,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModelNull,
   })  : byNameEnumDefaultModel =
             byNameEnumDefaultModel ?? _i2.ByNameEnum.byName1,
         byNameEnumDefaultModelNull =
             byNameEnumDefaultModelNull ?? _i2.ByNameEnum.byName2,
         byIndexEnumDefaultModel =
-            byIndexEnumDefaultModel ?? _i2.ByIndexEnum.byIndex1,
+            byIndexEnumDefaultModel ?? _i3.ByIndexEnum.byIndex1,
         byIndexEnumDefaultModelNull =
-            byIndexEnumDefaultModelNull ?? _i2.ByIndexEnum.byIndex2;
+            byIndexEnumDefaultModelNull ?? _i3.ByIndexEnum.byIndex2;
 
   factory EnumDefaultModel({
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     _i2.ByNameEnum? byNameEnumDefaultModelNull,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
-    _i2.ByIndexEnum? byIndexEnumDefaultModelNull,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModelNull,
   }) = _EnumDefaultModelImpl;
 
   factory EnumDefaultModel.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -46,12 +47,12 @@ abstract class EnumDefaultModel implements _i1.SerializableModel {
               ? null
               : _i2.ByNameEnum.fromJson(
                   (jsonSerialization['byNameEnumDefaultModelNull'] as String)),
-      byIndexEnumDefaultModel: _i2.ByIndexEnum.fromJson(
+      byIndexEnumDefaultModel: _i3.ByIndexEnum.fromJson(
           (jsonSerialization['byIndexEnumDefaultModel'] as int)),
       byIndexEnumDefaultModelNull:
           jsonSerialization['byIndexEnumDefaultModelNull'] == null
               ? null
-              : _i2.ByIndexEnum.fromJson(
+              : _i3.ByIndexEnum.fromJson(
                   (jsonSerialization['byIndexEnumDefaultModelNull'] as int)),
     );
   }
@@ -65,16 +66,16 @@ abstract class EnumDefaultModel implements _i1.SerializableModel {
 
   _i2.ByNameEnum? byNameEnumDefaultModelNull;
 
-  _i2.ByIndexEnum byIndexEnumDefaultModel;
+  _i3.ByIndexEnum byIndexEnumDefaultModel;
 
-  _i2.ByIndexEnum? byIndexEnumDefaultModelNull;
+  _i3.ByIndexEnum? byIndexEnumDefaultModelNull;
 
   EnumDefaultModel copyWith({
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     _i2.ByNameEnum? byNameEnumDefaultModelNull,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
-    _i2.ByIndexEnum? byIndexEnumDefaultModelNull,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModelNull,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -102,8 +103,8 @@ class _EnumDefaultModelImpl extends EnumDefaultModel {
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     _i2.ByNameEnum? byNameEnumDefaultModelNull,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
-    _i2.ByIndexEnum? byIndexEnumDefaultModelNull,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModelNull,
   }) : super._(
           id: id,
           byNameEnumDefaultModel: byNameEnumDefaultModel,
@@ -117,7 +118,7 @@ class _EnumDefaultModelImpl extends EnumDefaultModel {
     Object? id = _Undefined,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     Object? byNameEnumDefaultModelNull = _Undefined,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
     Object? byIndexEnumDefaultModelNull = _Undefined,
   }) {
     return EnumDefaultModel(
@@ -130,7 +131,7 @@ class _EnumDefaultModelImpl extends EnumDefaultModel {
       byIndexEnumDefaultModel:
           byIndexEnumDefaultModel ?? this.byIndexEnumDefaultModel,
       byIndexEnumDefaultModelNull:
-          byIndexEnumDefaultModelNull is _i2.ByIndexEnum?
+          byIndexEnumDefaultModelNull is _i3.ByIndexEnum?
               ? byIndexEnumDefaultModelNull
               : this.byIndexEnumDefaultModelNull,
     );
diff --git a/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_persist.dart b/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_persist.dart
index bd9cc93d6a..b8d004a73c 100644
--- a/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_persist.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/defaults/enum/enum_default_persist.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
+import '../../defaults/enum/enums/by_index_enum.dart' as _i3;
 
 abstract class EnumDefaultPersist implements _i1.SerializableModel {
   EnumDefaultPersist._({
@@ -22,7 +23,7 @@ abstract class EnumDefaultPersist implements _i1.SerializableModel {
   factory EnumDefaultPersist({
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultPersist,
-    _i2.ByIndexEnum? byIndexEnumDefaultPersist,
+    _i3.ByIndexEnum? byIndexEnumDefaultPersist,
   }) = _EnumDefaultPersistImpl;
 
   factory EnumDefaultPersist.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -36,7 +37,7 @@ abstract class EnumDefaultPersist implements _i1.SerializableModel {
       byIndexEnumDefaultPersist:
           jsonSerialization['byIndexEnumDefaultPersist'] == null
               ? null
-              : _i2.ByIndexEnum.fromJson(
+              : _i3.ByIndexEnum.fromJson(
                   (jsonSerialization['byIndexEnumDefaultPersist'] as int)),
     );
   }
@@ -48,12 +49,12 @@ abstract class EnumDefaultPersist implements _i1.SerializableModel {
 
   _i2.ByNameEnum? byNameEnumDefaultPersist;
 
-  _i2.ByIndexEnum? byIndexEnumDefaultPersist;
+  _i3.ByIndexEnum? byIndexEnumDefaultPersist;
 
   EnumDefaultPersist copyWith({
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultPersist,
-    _i2.ByIndexEnum? byIndexEnumDefaultPersist,
+    _i3.ByIndexEnum? byIndexEnumDefaultPersist,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -78,7 +79,7 @@ class _EnumDefaultPersistImpl extends EnumDefaultPersist {
   _EnumDefaultPersistImpl({
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultPersist,
-    _i2.ByIndexEnum? byIndexEnumDefaultPersist,
+    _i3.ByIndexEnum? byIndexEnumDefaultPersist,
   }) : super._(
           id: id,
           byNameEnumDefaultPersist: byNameEnumDefaultPersist,
@@ -96,7 +97,7 @@ class _EnumDefaultPersistImpl extends EnumDefaultPersist {
       byNameEnumDefaultPersist: byNameEnumDefaultPersist is _i2.ByNameEnum?
           ? byNameEnumDefaultPersist
           : this.byNameEnumDefaultPersist,
-      byIndexEnumDefaultPersist: byIndexEnumDefaultPersist is _i2.ByIndexEnum?
+      byIndexEnumDefaultPersist: byIndexEnumDefaultPersist is _i3.ByIndexEnum?
           ? byIndexEnumDefaultPersist
           : this.byIndexEnumDefaultPersist,
     );
diff --git a/tests/serverpod_test_client/lib/src/protocol/defaults/exception/default_exception.dart b/tests/serverpod_test_client/lib/src/protocol/defaults/exception/default_exception.dart
index c58426601c..63849e2da4 100644
--- a/tests/serverpod_test_client/lib/src/protocol/defaults/exception/default_exception.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/defaults/exception/default_exception.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
 import 'package:uuid/uuid.dart' as _i3;
 
 abstract class DefaultException
diff --git a/tests/serverpod_test_client/lib/src/protocol/empty_model/relation_empy_model.dart b/tests/serverpod_test_client/lib/src/protocol/empty_model/relation_empy_model.dart
index 59fbd18423..0c42a844ea 100644
--- a/tests/serverpod_test_client/lib/src/protocol/empty_model/relation_empy_model.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/empty_model/relation_empy_model.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../empty_model/empty_model_relation_item.dart' as _i2;
 
 abstract class RelationEmptyModel implements _i1.SerializableModel {
   RelationEmptyModel._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/city_with_long_table_name.dart b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/city_with_long_table_name.dart
index 54cee99a98..51f64b7876 100644
--- a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/city_with_long_table_name.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/city_with_long_table_name.dart
@@ -10,7 +10,10 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/deep_includes/person_with_long_table_name.dart'
+    as _i2;
+import '../../long_identifiers/deep_includes/organization_with_long_table_name.dart'
+    as _i3;
 
 abstract class CityWithLongTableName implements _i1.SerializableModel {
   CityWithLongTableName._({
@@ -24,7 +27,7 @@ abstract class CityWithLongTableName implements _i1.SerializableModel {
     int? id,
     required String name,
     List<_i2.PersonWithLongTableName>? citizens,
-    List<_i2.OrganizationWithLongTableName>? organizations,
+    List<_i3.OrganizationWithLongTableName>? organizations,
   }) = _CityWithLongTableNameImpl;
 
   factory CityWithLongTableName.fromJson(
@@ -37,7 +40,7 @@ abstract class CityWithLongTableName implements _i1.SerializableModel {
               _i2.PersonWithLongTableName.fromJson((e as Map<String, dynamic>)))
           .toList(),
       organizations: (jsonSerialization['organizations'] as List?)
-          ?.map((e) => _i2.OrganizationWithLongTableName.fromJson(
+          ?.map((e) => _i3.OrganizationWithLongTableName.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
     );
@@ -52,13 +55,13 @@ abstract class CityWithLongTableName implements _i1.SerializableModel {
 
   List<_i2.PersonWithLongTableName>? citizens;
 
-  List<_i2.OrganizationWithLongTableName>? organizations;
+  List<_i3.OrganizationWithLongTableName>? organizations;
 
   CityWithLongTableName copyWith({
     int? id,
     String? name,
     List<_i2.PersonWithLongTableName>? citizens,
-    List<_i2.OrganizationWithLongTableName>? organizations,
+    List<_i3.OrganizationWithLongTableName>? organizations,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -85,7 +88,7 @@ class _CityWithLongTableNameImpl extends CityWithLongTableName {
     int? id,
     required String name,
     List<_i2.PersonWithLongTableName>? citizens,
-    List<_i2.OrganizationWithLongTableName>? organizations,
+    List<_i3.OrganizationWithLongTableName>? organizations,
   }) : super._(
           id: id,
           name: name,
@@ -106,7 +109,7 @@ class _CityWithLongTableNameImpl extends CityWithLongTableName {
       citizens: citizens is List<_i2.PersonWithLongTableName>?
           ? citizens
           : this.citizens?.map((e0) => e0.copyWith()).toList(),
-      organizations: organizations is List<_i2.OrganizationWithLongTableName>?
+      organizations: organizations is List<_i3.OrganizationWithLongTableName>?
           ? organizations
           : this.organizations?.map((e0) => e0.copyWith()).toList(),
     );
diff --git a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/organization_with_long_table_name.dart b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/organization_with_long_table_name.dart
index a8dcfdbd5c..35e4a909ed 100644
--- a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/organization_with_long_table_name.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/organization_with_long_table_name.dart
@@ -10,7 +10,10 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/deep_includes/person_with_long_table_name.dart'
+    as _i2;
+import '../../long_identifiers/deep_includes/city_with_long_table_name.dart'
+    as _i3;
 
 abstract class OrganizationWithLongTableName implements _i1.SerializableModel {
   OrganizationWithLongTableName._({
@@ -26,7 +29,7 @@ abstract class OrganizationWithLongTableName implements _i1.SerializableModel {
     required String name,
     List<_i2.PersonWithLongTableName>? people,
     int? cityId,
-    _i2.CityWithLongTableName? city,
+    _i3.CityWithLongTableName? city,
   }) = _OrganizationWithLongTableNameImpl;
 
   factory OrganizationWithLongTableName.fromJson(
@@ -41,7 +44,7 @@ abstract class OrganizationWithLongTableName implements _i1.SerializableModel {
       cityId: jsonSerialization['cityId'] as int?,
       city: jsonSerialization['city'] == null
           ? null
-          : _i2.CityWithLongTableName.fromJson(
+          : _i3.CityWithLongTableName.fromJson(
               (jsonSerialization['city'] as Map<String, dynamic>)),
     );
   }
@@ -57,14 +60,14 @@ abstract class OrganizationWithLongTableName implements _i1.SerializableModel {
 
   int? cityId;
 
-  _i2.CityWithLongTableName? city;
+  _i3.CityWithLongTableName? city;
 
   OrganizationWithLongTableName copyWith({
     int? id,
     String? name,
     List<_i2.PersonWithLongTableName>? people,
     int? cityId,
-    _i2.CityWithLongTableName? city,
+    _i3.CityWithLongTableName? city,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -92,7 +95,7 @@ class _OrganizationWithLongTableNameImpl extends OrganizationWithLongTableName {
     required String name,
     List<_i2.PersonWithLongTableName>? people,
     int? cityId,
-    _i2.CityWithLongTableName? city,
+    _i3.CityWithLongTableName? city,
   }) : super._(
           id: id,
           name: name,
@@ -116,7 +119,7 @@ class _OrganizationWithLongTableNameImpl extends OrganizationWithLongTableName {
           ? people
           : this.people?.map((e0) => e0.copyWith()).toList(),
       cityId: cityId is int? ? cityId : this.cityId,
-      city: city is _i2.CityWithLongTableName? ? city : this.city?.copyWith(),
+      city: city is _i3.CityWithLongTableName? ? city : this.city?.copyWith(),
     );
   }
 }
diff --git a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/person_with_long_table_name.dart b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/person_with_long_table_name.dart
index 46e88dd0ed..4bdf689eed 100644
--- a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/person_with_long_table_name.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/deep_includes/person_with_long_table_name.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/deep_includes/organization_with_long_table_name.dart'
+    as _i2;
 
 abstract class PersonWithLongTableName implements _i1.SerializableModel {
   PersonWithLongTableName._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/long_implicit_id_field_collection.dart b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/long_implicit_id_field_collection.dart
index 9aed7f9427..bc938ddee3 100644
--- a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/long_implicit_id_field_collection.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/long_implicit_id_field_collection.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/models_with_relations/long_implicit_id_field.dart'
+    as _i2;
 
 abstract class LongImplicitIdFieldCollection implements _i1.SerializableModel {
   LongImplicitIdFieldCollection._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/relation_to_mutiple_max_field_name.dart b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/relation_to_mutiple_max_field_name.dart
index a23dbe7326..14c986744e 100644
--- a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/relation_to_mutiple_max_field_name.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/relation_to_mutiple_max_field_name.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/multiple_max_field_name.dart' as _i2;
 
 abstract class RelationToMultipleMaxFieldName implements _i1.SerializableModel {
   RelationToMultipleMaxFieldName._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/user_note_collection.dart b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/user_note_collection.dart
index d2cfa4f2ac..b975609c74 100644
--- a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/user_note_collection.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/user_note_collection.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/models_with_relations/user_note.dart' as _i2;
 
 abstract class UserNoteCollection implements _i1.SerializableModel {
   UserNoteCollection._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/user_note_collection_with_a_long_name.dart b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/user_note_collection_with_a_long_name.dart
index 77b93c11f4..45af116553 100644
--- a/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/user_note_collection_with_a_long_name.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/long_identifiers/models_with_relations/user_note_collection_with_a_long_name.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/models_with_relations/user_note_with_a_long_name.dart'
+    as _i2;
 
 abstract class UserNoteCollectionWithALongName
     implements _i1.SerializableModel {
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/city.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/city.dart
index d0a2cdccde..6bf9c8ae51 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/city.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/city.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../models_with_list_relations/person.dart' as _i2;
+import '../models_with_list_relations/organization.dart' as _i3;
 
 abstract class City implements _i1.SerializableModel {
   City._({
@@ -24,7 +25,7 @@ abstract class City implements _i1.SerializableModel {
     int? id,
     required String name,
     List<_i2.Person>? citizens,
-    List<_i2.Organization>? organizations,
+    List<_i3.Organization>? organizations,
   }) = _CityImpl;
 
   factory City.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -35,7 +36,7 @@ abstract class City implements _i1.SerializableModel {
           ?.map((e) => _i2.Person.fromJson((e as Map<String, dynamic>)))
           .toList(),
       organizations: (jsonSerialization['organizations'] as List?)
-          ?.map((e) => _i2.Organization.fromJson((e as Map<String, dynamic>)))
+          ?.map((e) => _i3.Organization.fromJson((e as Map<String, dynamic>)))
           .toList(),
     );
   }
@@ -49,13 +50,13 @@ abstract class City implements _i1.SerializableModel {
 
   List<_i2.Person>? citizens;
 
-  List<_i2.Organization>? organizations;
+  List<_i3.Organization>? organizations;
 
   City copyWith({
     int? id,
     String? name,
     List<_i2.Person>? citizens,
-    List<_i2.Organization>? organizations,
+    List<_i3.Organization>? organizations,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -82,7 +83,7 @@ class _CityImpl extends City {
     int? id,
     required String name,
     List<_i2.Person>? citizens,
-    List<_i2.Organization>? organizations,
+    List<_i3.Organization>? organizations,
   }) : super._(
           id: id,
           name: name,
@@ -103,7 +104,7 @@ class _CityImpl extends City {
       citizens: citizens is List<_i2.Person>?
           ? citizens
           : this.citizens?.map((e0) => e0.copyWith()).toList(),
-      organizations: organizations is List<_i2.Organization>?
+      organizations: organizations is List<_i3.Organization>?
           ? organizations
           : this.organizations?.map((e0) => e0.copyWith()).toList(),
     );
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/organization.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/organization.dart
index 0be8650316..037f86dc03 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/organization.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/organization.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../models_with_list_relations/person.dart' as _i2;
+import '../models_with_list_relations/city.dart' as _i3;
 
 abstract class Organization implements _i1.SerializableModel {
   Organization._({
@@ -26,7 +27,7 @@ abstract class Organization implements _i1.SerializableModel {
     required String name,
     List<_i2.Person>? people,
     int? cityId,
-    _i2.City? city,
+    _i3.City? city,
   }) = _OrganizationImpl;
 
   factory Organization.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -39,7 +40,7 @@ abstract class Organization implements _i1.SerializableModel {
       cityId: jsonSerialization['cityId'] as int?,
       city: jsonSerialization['city'] == null
           ? null
-          : _i2.City.fromJson(
+          : _i3.City.fromJson(
               (jsonSerialization['city'] as Map<String, dynamic>)),
     );
   }
@@ -55,14 +56,14 @@ abstract class Organization implements _i1.SerializableModel {
 
   int? cityId;
 
-  _i2.City? city;
+  _i3.City? city;
 
   Organization copyWith({
     int? id,
     String? name,
     List<_i2.Person>? people,
     int? cityId,
-    _i2.City? city,
+    _i3.City? city,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -90,7 +91,7 @@ class _OrganizationImpl extends Organization {
     required String name,
     List<_i2.Person>? people,
     int? cityId,
-    _i2.City? city,
+    _i3.City? city,
   }) : super._(
           id: id,
           name: name,
@@ -114,7 +115,7 @@ class _OrganizationImpl extends Organization {
           ? people
           : this.people?.map((e0) => e0.copyWith()).toList(),
       cityId: cityId is int? ? cityId : this.cityId,
-      city: city is _i2.City? ? city : this.city?.copyWith(),
+      city: city is _i3.City? ? city : this.city?.copyWith(),
     );
   }
 }
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/person.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/person.dart
index ef4fa1cf8c..9a7cfb51aa 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/person.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_list_relations/person.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../models_with_list_relations/organization.dart' as _i2;
 
 abstract class Person implements _i1.SerializableModel {
   Person._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/course.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/course.dart
index d1fce19530..0d2bf62ab5 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/course.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/course.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/many_to_many/enrollment.dart' as _i2;
 
 abstract class Course implements _i1.SerializableModel {
   Course._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/enrollment.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/enrollment.dart
index d1104e245d..0d1ac007ca 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/enrollment.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/enrollment.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/many_to_many/student.dart' as _i2;
+import '../../models_with_relations/many_to_many/course.dart' as _i3;
 
 abstract class Enrollment implements _i1.SerializableModel {
   Enrollment._({
@@ -26,7 +27,7 @@ abstract class Enrollment implements _i1.SerializableModel {
     required int studentId,
     _i2.Student? student,
     required int courseId,
-    _i2.Course? course,
+    _i3.Course? course,
   }) = _EnrollmentImpl;
 
   factory Enrollment.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -40,7 +41,7 @@ abstract class Enrollment implements _i1.SerializableModel {
       courseId: jsonSerialization['courseId'] as int,
       course: jsonSerialization['course'] == null
           ? null
-          : _i2.Course.fromJson(
+          : _i3.Course.fromJson(
               (jsonSerialization['course'] as Map<String, dynamic>)),
     );
   }
@@ -56,14 +57,14 @@ abstract class Enrollment implements _i1.SerializableModel {
 
   int courseId;
 
-  _i2.Course? course;
+  _i3.Course? course;
 
   Enrollment copyWith({
     int? id,
     int? studentId,
     _i2.Student? student,
     int? courseId,
-    _i2.Course? course,
+    _i3.Course? course,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -90,7 +91,7 @@ class _EnrollmentImpl extends Enrollment {
     required int studentId,
     _i2.Student? student,
     required int courseId,
-    _i2.Course? course,
+    _i3.Course? course,
   }) : super._(
           id: id,
           studentId: studentId,
@@ -112,7 +113,7 @@ class _EnrollmentImpl extends Enrollment {
       studentId: studentId ?? this.studentId,
       student: student is _i2.Student? ? student : this.student?.copyWith(),
       courseId: courseId ?? this.courseId,
-      course: course is _i2.Course? ? course : this.course?.copyWith(),
+      course: course is _i3.Course? ? course : this.course?.copyWith(),
     );
   }
 }
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/student.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/student.dart
index 78eaccea21..e2ed92a982 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/student.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/many_to_many/student.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/many_to_many/enrollment.dart' as _i2;
 
 abstract class Student implements _i1.SerializableModel {
   Student._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/arena.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/arena.dart
index ab8744c4a4..6f4b6c3ad5 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/arena.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/arena.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/nested_one_to_many/team.dart' as _i2;
 
 abstract class Arena implements _i1.SerializableModel {
   Arena._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/player.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/player.dart
index cbffe0c9f4..4b8753a105 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/player.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/player.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/nested_one_to_many/team.dart' as _i2;
 
 abstract class Player implements _i1.SerializableModel {
   Player._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/team.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/team.dart
index 653cd07297..269cf8b169 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/team.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/nested_one_to_many/team.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/nested_one_to_many/arena.dart' as _i2;
+import '../../models_with_relations/nested_one_to_many/player.dart' as _i3;
 
 abstract class Team implements _i1.SerializableModel {
   Team._({
@@ -26,7 +27,7 @@ abstract class Team implements _i1.SerializableModel {
     required String name,
     int? arenaId,
     _i2.Arena? arena,
-    List<_i2.Player>? players,
+    List<_i3.Player>? players,
   }) = _TeamImpl;
 
   factory Team.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -39,7 +40,7 @@ abstract class Team implements _i1.SerializableModel {
           : _i2.Arena.fromJson(
               (jsonSerialization['arena'] as Map<String, dynamic>)),
       players: (jsonSerialization['players'] as List?)
-          ?.map((e) => _i2.Player.fromJson((e as Map<String, dynamic>)))
+          ?.map((e) => _i3.Player.fromJson((e as Map<String, dynamic>)))
           .toList(),
     );
   }
@@ -55,14 +56,14 @@ abstract class Team implements _i1.SerializableModel {
 
   _i2.Arena? arena;
 
-  List<_i2.Player>? players;
+  List<_i3.Player>? players;
 
   Team copyWith({
     int? id,
     String? name,
     int? arenaId,
     _i2.Arena? arena,
-    List<_i2.Player>? players,
+    List<_i3.Player>? players,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -90,7 +91,7 @@ class _TeamImpl extends Team {
     required String name,
     int? arenaId,
     _i2.Arena? arena,
-    List<_i2.Player>? players,
+    List<_i3.Player>? players,
   }) : super._(
           id: id,
           name: name,
@@ -112,7 +113,7 @@ class _TeamImpl extends Team {
       name: name ?? this.name,
       arenaId: arenaId is int? ? arenaId : this.arenaId,
       arena: arena is _i2.Arena? ? arena : this.arena?.copyWith(),
-      players: players is List<_i2.Player>?
+      players: players is List<_i3.Player>?
           ? players
           : this.players?.map((e0) => e0.copyWith()).toList(),
     );
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/comment.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/comment.dart
index 2bb80ce68f..11f1dcfbd0 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/comment.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/comment.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_many/order.dart' as _i2;
 
 abstract class Comment implements _i1.SerializableModel {
   Comment._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/customer.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/customer.dart
index a12683dfae..6221f64444 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/customer.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/customer.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_many/order.dart' as _i2;
 
 abstract class Customer implements _i1.SerializableModel {
   Customer._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/order.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/order.dart
index d881d7b3f0..bdac40c953 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/order.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_many/order.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_many/customer.dart' as _i2;
+import '../../models_with_relations/one_to_many/comment.dart' as _i3;
 
 abstract class Order implements _i1.SerializableModel {
   Order._({
@@ -26,7 +27,7 @@ abstract class Order implements _i1.SerializableModel {
     required String description,
     required int customerId,
     _i2.Customer? customer,
-    List<_i2.Comment>? comments,
+    List<_i3.Comment>? comments,
   }) = _OrderImpl;
 
   factory Order.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -39,7 +40,7 @@ abstract class Order implements _i1.SerializableModel {
           : _i2.Customer.fromJson(
               (jsonSerialization['customer'] as Map<String, dynamic>)),
       comments: (jsonSerialization['comments'] as List?)
-          ?.map((e) => _i2.Comment.fromJson((e as Map<String, dynamic>)))
+          ?.map((e) => _i3.Comment.fromJson((e as Map<String, dynamic>)))
           .toList(),
     );
   }
@@ -55,14 +56,14 @@ abstract class Order implements _i1.SerializableModel {
 
   _i2.Customer? customer;
 
-  List<_i2.Comment>? comments;
+  List<_i3.Comment>? comments;
 
   Order copyWith({
     int? id,
     String? description,
     int? customerId,
     _i2.Customer? customer,
-    List<_i2.Comment>? comments,
+    List<_i3.Comment>? comments,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -90,7 +91,7 @@ class _OrderImpl extends Order {
     required String description,
     required int customerId,
     _i2.Customer? customer,
-    List<_i2.Comment>? comments,
+    List<_i3.Comment>? comments,
   }) : super._(
           id: id,
           description: description,
@@ -113,7 +114,7 @@ class _OrderImpl extends Order {
       customerId: customerId ?? this.customerId,
       customer:
           customer is _i2.Customer? ? customer : this.customer?.copyWith(),
-      comments: comments is List<_i2.Comment>?
+      comments: comments is List<_i3.Comment>?
           ? comments
           : this.comments?.map((e0) => e0.copyWith()).toList(),
     );
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/address.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/address.dart
index 0b29c30e12..6fcd9caf74 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/address.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/address.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_one/citizen.dart' as _i2;
 
 abstract class Address implements _i1.SerializableModel {
   Address._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/citizen.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/citizen.dart
index 434bb23ee1..0e81de8274 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/citizen.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/citizen.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_one/address.dart' as _i2;
+import '../../models_with_relations/one_to_one/company.dart' as _i3;
 
 abstract class Citizen implements _i1.SerializableModel {
   Citizen._({
@@ -28,9 +29,9 @@ abstract class Citizen implements _i1.SerializableModel {
     required String name,
     _i2.Address? address,
     required int companyId,
-    _i2.Company? company,
+    _i3.Company? company,
     int? oldCompanyId,
-    _i2.Company? oldCompany,
+    _i3.Company? oldCompany,
   }) = _CitizenImpl;
 
   factory Citizen.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -44,12 +45,12 @@ abstract class Citizen implements _i1.SerializableModel {
       companyId: jsonSerialization['companyId'] as int,
       company: jsonSerialization['company'] == null
           ? null
-          : _i2.Company.fromJson(
+          : _i3.Company.fromJson(
               (jsonSerialization['company'] as Map<String, dynamic>)),
       oldCompanyId: jsonSerialization['oldCompanyId'] as int?,
       oldCompany: jsonSerialization['oldCompany'] == null
           ? null
-          : _i2.Company.fromJson(
+          : _i3.Company.fromJson(
               (jsonSerialization['oldCompany'] as Map<String, dynamic>)),
     );
   }
@@ -65,20 +66,20 @@ abstract class Citizen implements _i1.SerializableModel {
 
   int companyId;
 
-  _i2.Company? company;
+  _i3.Company? company;
 
   int? oldCompanyId;
 
-  _i2.Company? oldCompany;
+  _i3.Company? oldCompany;
 
   Citizen copyWith({
     int? id,
     String? name,
     _i2.Address? address,
     int? companyId,
-    _i2.Company? company,
+    _i3.Company? company,
     int? oldCompanyId,
-    _i2.Company? oldCompany,
+    _i3.Company? oldCompany,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -107,9 +108,9 @@ class _CitizenImpl extends Citizen {
     required String name,
     _i2.Address? address,
     required int companyId,
-    _i2.Company? company,
+    _i3.Company? company,
     int? oldCompanyId,
-    _i2.Company? oldCompany,
+    _i3.Company? oldCompany,
   }) : super._(
           id: id,
           name: name,
@@ -135,10 +136,10 @@ class _CitizenImpl extends Citizen {
       name: name ?? this.name,
       address: address is _i2.Address? ? address : this.address?.copyWith(),
       companyId: companyId ?? this.companyId,
-      company: company is _i2.Company? ? company : this.company?.copyWith(),
+      company: company is _i3.Company? ? company : this.company?.copyWith(),
       oldCompanyId: oldCompanyId is int? ? oldCompanyId : this.oldCompanyId,
       oldCompany:
-          oldCompany is _i2.Company? ? oldCompany : this.oldCompany?.copyWith(),
+          oldCompany is _i3.Company? ? oldCompany : this.oldCompany?.copyWith(),
     );
   }
 }
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/company.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/company.dart
index 852c02e67b..43fce318fb 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/company.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/company.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_one/town.dart' as _i2;
 
 abstract class Company implements _i1.SerializableModel {
   Company._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/town.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/town.dart
index 48799e681f..7f8caeb44d 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/town.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/one_to_one/town.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_one/citizen.dart' as _i2;
 
 abstract class Town implements _i1.SerializableModel {
   Town._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/many_to_many/blocking.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/many_to_many/blocking.dart
index 8808b51983..80a0706a58 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/many_to_many/blocking.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/many_to_many/blocking.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../../protocol.dart' as _i2;
+import '../../../models_with_relations/self_relation/many_to_many/member.dart'
+    as _i2;
 
 abstract class Blocking implements _i1.SerializableModel {
   Blocking._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/many_to_many/member.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/many_to_many/member.dart
index adabecbbd7..a6c51f68eb 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/many_to_many/member.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/many_to_many/member.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../../protocol.dart' as _i2;
+import '../../../models_with_relations/self_relation/many_to_many/blocking.dart'
+    as _i2;
 
 abstract class Member implements _i1.SerializableModel {
   Member._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/one_to_many/cat.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/one_to_many/cat.dart
index ed5e6ab02c..e56cf47fdf 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/one_to_many/cat.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/one_to_many/cat.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../../protocol.dart' as _i2;
+import '../../../models_with_relations/self_relation/one_to_many/cat.dart'
+    as _i2;
 
 abstract class Cat implements _i1.SerializableModel {
   Cat._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/one_to_one/post.dart b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/one_to_one/post.dart
index 8dbc2b70aa..e3f4b31ab3 100644
--- a/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/one_to_one/post.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/models_with_relations/self_relation/one_to_one/post.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../../../protocol.dart' as _i2;
+import '../../../models_with_relations/self_relation/one_to_one/post.dart'
+    as _i2;
 
 abstract class Post implements _i1.SerializableModel {
   Post._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/nullability.dart b/tests/serverpod_test_client/lib/src/protocol/nullability.dart
index f0f4b75eaf..9a156abc73 100644
--- a/tests/serverpod_test_client/lib/src/protocol/nullability.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/nullability.dart
@@ -11,7 +11,7 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
 import 'dart:typed_data' as _i2;
-import 'protocol.dart' as _i3;
+import 'simple_data.dart' as _i3;
 
 abstract class Nullability implements _i1.SerializableModel {
   Nullability._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/object_field_persist.dart b/tests/serverpod_test_client/lib/src/protocol/object_field_persist.dart
index 2bc9ff85c2..d79777570a 100644
--- a/tests/serverpod_test_client/lib/src/protocol/object_field_persist.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/object_field_persist.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class ObjectFieldPersist implements _i1.SerializableModel {
   ObjectFieldPersist._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/object_with_enum.dart b/tests/serverpod_test_client/lib/src/protocol/object_with_enum.dart
index f0b4054e18..abff546f3d 100644
--- a/tests/serverpod_test_client/lib/src/protocol/object_with_enum.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/object_with_enum.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'test_enum.dart' as _i2;
 
 abstract class ObjectWithEnum implements _i1.SerializableModel {
   ObjectWithEnum._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/object_with_maps.dart b/tests/serverpod_test_client/lib/src/protocol/object_with_maps.dart
index 7b45316514..e00ec0ad90 100644
--- a/tests/serverpod_test_client/lib/src/protocol/object_with_maps.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/object_with_maps.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 import 'dart:typed_data' as _i3;
 
 abstract class ObjectWithMaps implements _i1.SerializableModel {
diff --git a/tests/serverpod_test_client/lib/src/protocol/object_with_object.dart b/tests/serverpod_test_client/lib/src/protocol/object_with_object.dart
index f3610ef146..4ec4500bba 100644
--- a/tests/serverpod_test_client/lib/src/protocol/object_with_object.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/object_with_object.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class ObjectWithObject implements _i1.SerializableModel {
   ObjectWithObject._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/protocol.dart b/tests/serverpod_test_client/lib/src/protocol/protocol.dart
index 49842f9d49..78e2b711fa 100644
--- a/tests/serverpod_test_client/lib/src/protocol/protocol.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/protocol.dart
@@ -130,17 +130,16 @@ import 'types.dart' as _i110;
 import 'types_list.dart' as _i111;
 import 'types_map.dart' as _i112;
 import 'unique_data.dart' as _i113;
-import 'protocol.dart' as _i114;
 import 'package:serverpod_test_module_client/serverpod_test_module_client.dart'
-    as _i115;
-import 'dart:typed_data' as _i116;
-import 'package:serverpod_test_client/src/custom_classes.dart' as _i117;
-import 'package:serverpod_test_client/src/protocol/simple_data.dart' as _i118;
-import 'package:serverpod_test_client/src/protocol/test_enum.dart' as _i119;
+    as _i114;
+import 'dart:typed_data' as _i115;
+import 'package:serverpod_test_client/src/custom_classes.dart' as _i116;
+import 'package:serverpod_test_client/src/protocol/simple_data.dart' as _i117;
+import 'package:serverpod_test_client/src/protocol/test_enum.dart' as _i118;
 import 'package:serverpod_test_client/src/protocol_custom_classes.dart'
-    as _i120;
-import 'package:serverpod_test_shared/serverpod_test_shared.dart' as _i121;
-import 'package:serverpod_auth_client/serverpod_auth_client.dart' as _i122;
+    as _i119;
+import 'package:serverpod_test_shared/serverpod_test_shared.dart' as _i120;
+import 'package:serverpod_auth_client/serverpod_auth_client.dart' as _i121;
 export 'defaults/boolean/bool_default.dart';
 export 'defaults/boolean/bool_default_mix.dart';
 export 'defaults/boolean/bool_default_model.dart';
@@ -995,10 +994,10 @@ class Protocol extends _i1.SerializationManager {
     if (t == _i1.getType<_i113.UniqueData?>()) {
       return (data != null ? _i113.UniqueData.fromJson(data) : null) as T;
     }
-    if (t == _i1.getType<List<_i114.EmptyModelRelationItem>?>()) {
+    if (t == _i1.getType<List<_i38.EmptyModelRelationItem>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.EmptyModelRelationItem>(e))
+              .map((e) => deserialize<_i38.EmptyModelRelationItem>(e))
               .toList()
           : null) as dynamic;
     }
@@ -1006,118 +1005,118 @@ class Protocol extends _i1.SerializationManager {
       return (data as List).map((e) => deserialize<String>(e)).toList()
           as dynamic;
     }
-    if (t == _i1.getType<List<_i114.PersonWithLongTableName>?>()) {
+    if (t == _i1.getType<List<_i48.PersonWithLongTableName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.PersonWithLongTableName>(e))
+              .map((e) => deserialize<_i48.PersonWithLongTableName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.OrganizationWithLongTableName>?>()) {
+    if (t == _i1.getType<List<_i47.OrganizationWithLongTableName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.OrganizationWithLongTableName>(e))
+              .map((e) => deserialize<_i47.OrganizationWithLongTableName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.PersonWithLongTableName>?>()) {
+    if (t == _i1.getType<List<_i48.PersonWithLongTableName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.PersonWithLongTableName>(e))
+              .map((e) => deserialize<_i48.PersonWithLongTableName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.LongImplicitIdField>?>()) {
+    if (t == _i1.getType<List<_i50.LongImplicitIdField>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.LongImplicitIdField>(e))
+              .map((e) => deserialize<_i50.LongImplicitIdField>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.MultipleMaxFieldName>?>()) {
+    if (t == _i1.getType<List<_i57.MultipleMaxFieldName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.MultipleMaxFieldName>(e))
+              .map((e) => deserialize<_i57.MultipleMaxFieldName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.UserNote>?>()) {
+    if (t == _i1.getType<List<_i53.UserNote>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.UserNote>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i53.UserNote>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.UserNoteWithALongName>?>()) {
+    if (t == _i1.getType<List<_i56.UserNoteWithALongName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.UserNoteWithALongName>(e))
+              .map((e) => deserialize<_i56.UserNoteWithALongName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Person>?>()) {
+    if (t == _i1.getType<List<_i60.Person>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Person>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i60.Person>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Organization>?>()) {
+    if (t == _i1.getType<List<_i59.Organization>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.Organization>(e))
+              .map((e) => deserialize<_i59.Organization>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Person>?>()) {
+    if (t == _i1.getType<List<_i60.Person>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Person>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i60.Person>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Enrollment>?>()) {
+    if (t == _i1.getType<List<_i62.Enrollment>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Enrollment>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i62.Enrollment>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Enrollment>?>()) {
+    if (t == _i1.getType<List<_i62.Enrollment>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Enrollment>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i62.Enrollment>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Player>?>()) {
+    if (t == _i1.getType<List<_i67.Player>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Player>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i67.Player>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Order>?>()) {
+    if (t == _i1.getType<List<_i71.Order>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Order>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i71.Order>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Comment>?>()) {
+    if (t == _i1.getType<List<_i69.Comment>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Comment>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i69.Comment>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Blocking>?>()) {
+    if (t == _i1.getType<List<_i76.Blocking>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Blocking>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i76.Blocking>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Blocking>?>()) {
+    if (t == _i1.getType<List<_i76.Blocking>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Blocking>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i76.Blocking>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Cat>?>()) {
+    if (t == _i1.getType<List<_i78.Cat>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Cat>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i78.Cat>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i115.ModuleClass>) {
+    if (t == List<_i114.ModuleClass>) {
       return (data as List)
-          .map((e) => deserialize<_i115.ModuleClass>(e))
+          .map((e) => deserialize<_i114.ModuleClass>(e))
           .toList() as dynamic;
     }
-    if (t == Map<String, _i115.ModuleClass>) {
+    if (t == Map<String, _i114.ModuleClass>) {
       return (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i115.ModuleClass>(v)))
+              deserialize<String>(k), deserialize<_i114.ModuleClass>(v)))
           as dynamic;
     }
     if (t == List<int>) {
@@ -1137,25 +1136,25 @@ class Protocol extends _i1.SerializationManager {
           ? (data as List).map((e) => deserialize<int?>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i114.SimpleData>) {
+    if (t == List<_i103.SimpleData>) {
       return (data as List)
-          .map((e) => deserialize<_i114.SimpleData>(e))
+          .map((e) => deserialize<_i103.SimpleData>(e))
           .toList() as dynamic;
     }
-    if (t == _i1.getType<List<_i114.SimpleData>?>()) {
+    if (t == _i1.getType<List<_i103.SimpleData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.SimpleData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i103.SimpleData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i114.SimpleData?>) {
+    if (t == List<_i103.SimpleData?>) {
       return (data as List)
-          .map((e) => deserialize<_i114.SimpleData?>(e))
+          .map((e) => deserialize<_i103.SimpleData?>(e))
           .toList() as dynamic;
     }
-    if (t == _i1.getType<List<_i114.SimpleData?>?>()) {
+    if (t == _i1.getType<List<_i103.SimpleData?>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.SimpleData?>(e))
+              .map((e) => deserialize<_i103.SimpleData?>(e))
               .toList()
           : null) as dynamic;
     }
@@ -1177,22 +1176,22 @@ class Protocol extends _i1.SerializationManager {
           ? (data as List).map((e) => deserialize<DateTime?>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i116.ByteData>) {
-      return (data as List).map((e) => deserialize<_i116.ByteData>(e)).toList()
+    if (t == List<_i115.ByteData>) {
+      return (data as List).map((e) => deserialize<_i115.ByteData>(e)).toList()
           as dynamic;
     }
-    if (t == _i1.getType<List<_i116.ByteData>?>()) {
+    if (t == _i1.getType<List<_i115.ByteData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i116.ByteData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i115.ByteData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i116.ByteData?>) {
-      return (data as List).map((e) => deserialize<_i116.ByteData?>(e)).toList()
+    if (t == List<_i115.ByteData?>) {
+      return (data as List).map((e) => deserialize<_i115.ByteData?>(e)).toList()
           as dynamic;
     }
-    if (t == _i1.getType<List<_i116.ByteData?>?>()) {
+    if (t == _i1.getType<List<_i115.ByteData?>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i116.ByteData?>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i115.ByteData?>(e)).toList()
           : null) as dynamic;
     }
     if (t == List<Duration>) {
@@ -1253,25 +1252,25 @@ class Protocol extends _i1.SerializationManager {
               (k, v) => MapEntry(deserialize<String>(k), deserialize<int?>(v)))
           : null) as dynamic;
     }
-    if (t == _i117.CustomClass3) {
-      return _i117.CustomClass3.fromJson(data) as T;
+    if (t == _i116.CustomClass3) {
+      return _i116.CustomClass3.fromJson(data) as T;
     }
-    if (t == List<_i114.TestEnum>) {
-      return (data as List).map((e) => deserialize<_i114.TestEnum>(e)).toList()
+    if (t == List<_i108.TestEnum>) {
+      return (data as List).map((e) => deserialize<_i108.TestEnum>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i114.TestEnum?>) {
-      return (data as List).map((e) => deserialize<_i114.TestEnum?>(e)).toList()
+    if (t == List<_i108.TestEnum?>) {
+      return (data as List).map((e) => deserialize<_i108.TestEnum?>(e)).toList()
           as dynamic;
     }
-    if (t == List<List<_i114.TestEnum>>) {
+    if (t == List<List<_i108.TestEnum>>) {
       return (data as List)
-          .map((e) => deserialize<List<_i114.TestEnum>>(e))
+          .map((e) => deserialize<List<_i108.TestEnum>>(e))
           .toList() as dynamic;
     }
-    if (t == Map<String, _i114.SimpleData>) {
+    if (t == Map<String, _i103.SimpleData>) {
       return (data as Map).map((k, v) => MapEntry(
-          deserialize<String>(k), deserialize<_i114.SimpleData>(v))) as dynamic;
+          deserialize<String>(k), deserialize<_i103.SimpleData>(v))) as dynamic;
     }
     if (t == Map<String, String>) {
       return (data as Map).map((k, v) =>
@@ -1282,9 +1281,9 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<String>(k), deserialize<DateTime>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i116.ByteData>) {
+    if (t == Map<String, _i115.ByteData>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i116.ByteData>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i115.ByteData>(v)))
           as dynamic;
     }
     if (t == Map<String, Duration>) {
@@ -1297,9 +1296,9 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<String>(k), deserialize<_i1.UuidValue>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i114.SimpleData?>) {
+    if (t == Map<String, _i103.SimpleData?>) {
       return (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i114.SimpleData?>(v)))
+              deserialize<String>(k), deserialize<_i103.SimpleData?>(v)))
           as dynamic;
     }
     if (t == Map<String, String?>) {
@@ -1311,9 +1310,9 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<String>(k), deserialize<DateTime?>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i116.ByteData?>) {
+    if (t == Map<String, _i115.ByteData?>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i116.ByteData?>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i115.ByteData?>(v)))
           as dynamic;
     }
     if (t == Map<String, Duration?>) {
@@ -1331,53 +1330,53 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<int>(e['k']), deserialize<int>(e['v']))))
           as dynamic;
     }
-    if (t == _i1.getType<List<_i114.SimpleData>?>()) {
+    if (t == _i1.getType<List<_i103.SimpleData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.SimpleData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i103.SimpleData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.SimpleData?>?>()) {
+    if (t == _i1.getType<List<_i103.SimpleData?>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.SimpleData?>(e))
+              .map((e) => deserialize<_i103.SimpleData?>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<List<_i114.SimpleData>>?>()) {
+    if (t == _i1.getType<List<List<_i103.SimpleData>>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<List<_i114.SimpleData>>(e))
+              .map((e) => deserialize<List<_i103.SimpleData>>(e))
               .toList()
           : null) as dynamic;
     }
     if (t ==
-        _i1.getType<Map<String, List<List<Map<int, _i114.SimpleData>>?>>?>()) {
+        _i1.getType<Map<String, List<List<Map<int, _i103.SimpleData>>?>>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(deserialize<String>(k),
-              deserialize<List<List<Map<int, _i114.SimpleData>>?>>(v)))
+              deserialize<List<List<Map<int, _i103.SimpleData>>?>>(v)))
           : null) as dynamic;
     }
-    if (t == List<List<Map<int, _i114.SimpleData>>?>) {
+    if (t == List<List<Map<int, _i103.SimpleData>>?>) {
       return (data as List)
-          .map((e) => deserialize<List<Map<int, _i114.SimpleData>>?>(e))
+          .map((e) => deserialize<List<Map<int, _i103.SimpleData>>?>(e))
           .toList() as dynamic;
     }
-    if (t == _i1.getType<List<Map<int, _i114.SimpleData>>?>()) {
+    if (t == _i1.getType<List<Map<int, _i103.SimpleData>>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<Map<int, _i114.SimpleData>>(e))
+              .map((e) => deserialize<Map<int, _i103.SimpleData>>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == Map<int, _i114.SimpleData>) {
+    if (t == Map<int, _i103.SimpleData>) {
       return Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<int>(e['k']), deserialize<_i114.SimpleData>(e['v']))))
+              deserialize<int>(e['k']), deserialize<_i103.SimpleData>(e['v']))))
           as dynamic;
     }
-    if (t == _i1.getType<Map<String, Map<int, _i114.SimpleData>>?>()) {
+    if (t == _i1.getType<Map<String, Map<int, _i103.SimpleData>>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(deserialize<String>(k),
-              deserialize<Map<int, _i114.SimpleData>>(v)))
+              deserialize<Map<int, _i103.SimpleData>>(v)))
           : null) as dynamic;
     }
     if (t == _i1.getType<List<int>?>()) {
@@ -1405,9 +1404,9 @@ class Protocol extends _i1.SerializationManager {
           ? (data as List).map((e) => deserialize<String>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i116.ByteData>?>()) {
+    if (t == _i1.getType<List<_i115.ByteData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i116.ByteData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i115.ByteData>(e)).toList()
           : null) as dynamic;
     }
     if (t == _i1.getType<List<Duration>?>()) {
@@ -1420,44 +1419,44 @@ class Protocol extends _i1.SerializationManager {
           ? (data as List).map((e) => deserialize<_i1.UuidValue>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.TestEnum>?>()) {
+    if (t == _i1.getType<List<_i108.TestEnum>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.TestEnum>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i108.TestEnum>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.TestEnumStringified>?>()) {
+    if (t == _i1.getType<List<_i109.TestEnumStringified>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i114.TestEnumStringified>(e))
+              .map((e) => deserialize<_i109.TestEnumStringified>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i114.Types>?>()) {
+    if (t == _i1.getType<List<_i110.Types>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i114.Types>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i110.Types>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<Map<String, _i114.Types>>?>()) {
+    if (t == _i1.getType<List<Map<String, _i110.Types>>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<Map<String, _i114.Types>>(e))
+              .map((e) => deserialize<Map<String, _i110.Types>>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == Map<String, _i114.Types>) {
+    if (t == Map<String, _i110.Types>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i114.Types>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i110.Types>(v)))
           as dynamic;
     }
-    if (t == _i1.getType<List<List<_i114.Types>>?>()) {
+    if (t == _i1.getType<List<List<_i110.Types>>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<List<_i114.Types>>(e))
+              .map((e) => deserialize<List<_i110.Types>>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == List<_i114.Types>) {
-      return (data as List).map((e) => deserialize<_i114.Types>(e)).toList()
+    if (t == List<_i110.Types>) {
+      return (data as List).map((e) => deserialize<_i110.Types>(e)).toList()
           as dynamic;
     }
     if (t == _i1.getType<Map<int, String>?>()) {
@@ -1490,10 +1489,10 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<String>(k), deserialize<String>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<_i116.ByteData, String>?>()) {
+    if (t == _i1.getType<Map<_i115.ByteData, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i116.ByteData>(e['k']),
+              deserialize<_i115.ByteData>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
@@ -1509,42 +1508,42 @@ class Protocol extends _i1.SerializationManager {
               deserialize<_i1.UuidValue>(e['k']), deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<_i114.TestEnum, String>?>()) {
+    if (t == _i1.getType<Map<_i108.TestEnum, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i114.TestEnum>(e['k']),
+              deserialize<_i108.TestEnum>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<_i114.TestEnumStringified, String>?>()) {
+    if (t == _i1.getType<Map<_i109.TestEnumStringified, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i114.TestEnumStringified>(e['k']),
+              deserialize<_i109.TestEnumStringified>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<_i114.Types, String>?>()) {
+    if (t == _i1.getType<Map<_i110.Types, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i114.Types>(e['k']), deserialize<String>(e['v']))))
+              deserialize<_i110.Types>(e['k']), deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<Map<_i114.Types, String>, String>?>()) {
+    if (t == _i1.getType<Map<Map<_i110.Types, String>, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<Map<_i114.Types, String>>(e['k']),
+              deserialize<Map<_i110.Types, String>>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == Map<_i114.Types, String>) {
+    if (t == Map<_i110.Types, String>) {
       return Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i114.Types>(e['k']), deserialize<String>(e['v']))))
+              deserialize<_i110.Types>(e['k']), deserialize<String>(e['v']))))
           as dynamic;
     }
-    if (t == _i1.getType<Map<List<_i114.Types>, String>?>()) {
+    if (t == _i1.getType<Map<List<_i110.Types>, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<List<_i114.Types>>(e['k']),
+              deserialize<List<_i110.Types>>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
@@ -1578,10 +1577,10 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<String>(k), deserialize<String>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i116.ByteData>?>()) {
+    if (t == _i1.getType<Map<String, _i115.ByteData>?>()) {
       return (data != null
           ? (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i116.ByteData>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i115.ByteData>(v)))
           : null) as dynamic;
     }
     if (t == _i1.getType<Map<String, Duration>?>()) {
@@ -1596,34 +1595,34 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<String>(k), deserialize<_i1.UuidValue>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i114.TestEnum>?>()) {
+    if (t == _i1.getType<Map<String, _i108.TestEnum>?>()) {
       return (data != null
           ? (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i114.TestEnum>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i108.TestEnum>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i114.TestEnumStringified>?>()) {
+    if (t == _i1.getType<Map<String, _i109.TestEnumStringified>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(deserialize<String>(k),
-              deserialize<_i114.TestEnumStringified>(v)))
+              deserialize<_i109.TestEnumStringified>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i114.Types>?>()) {
+    if (t == _i1.getType<Map<String, _i110.Types>?>()) {
       return (data != null
           ? (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i114.Types>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i110.Types>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, Map<String, _i114.Types>>?>()) {
+    if (t == _i1.getType<Map<String, Map<String, _i110.Types>>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<Map<String, _i114.Types>>(v)))
+              deserialize<String>(k), deserialize<Map<String, _i110.Types>>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, List<_i114.Types>>?>()) {
+    if (t == _i1.getType<Map<String, List<_i110.Types>>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<List<_i114.Types>>(v)))
+              deserialize<String>(k), deserialize<List<_i110.Types>>(v)))
           : null) as dynamic;
     }
     if (t == _i1.getType<List<String>?>()) {
@@ -1635,9 +1634,9 @@ class Protocol extends _i1.SerializationManager {
       return (data as List).map((e) => deserialize<String>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i118.SimpleData>) {
+    if (t == List<_i117.SimpleData>) {
       return (data as List)
-          .map((e) => deserialize<_i118.SimpleData>(e))
+          .map((e) => deserialize<_i117.SimpleData>(e))
           .toList() as dynamic;
     }
     if (t == List<int>) {
@@ -1728,40 +1727,40 @@ class Protocol extends _i1.SerializationManager {
       return (data as List).map((e) => deserialize<DateTime?>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i116.ByteData>) {
-      return (data as List).map((e) => deserialize<_i116.ByteData>(e)).toList()
+    if (t == List<_i115.ByteData>) {
+      return (data as List).map((e) => deserialize<_i115.ByteData>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i116.ByteData?>) {
-      return (data as List).map((e) => deserialize<_i116.ByteData?>(e)).toList()
+    if (t == List<_i115.ByteData?>) {
+      return (data as List).map((e) => deserialize<_i115.ByteData?>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i118.SimpleData?>) {
+    if (t == List<_i117.SimpleData?>) {
       return (data as List)
-          .map((e) => deserialize<_i118.SimpleData?>(e))
+          .map((e) => deserialize<_i117.SimpleData?>(e))
           .toList() as dynamic;
     }
-    if (t == _i1.getType<List<_i118.SimpleData>?>()) {
+    if (t == _i1.getType<List<_i117.SimpleData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i118.SimpleData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i117.SimpleData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i118.SimpleData>?>()) {
+    if (t == _i1.getType<List<_i117.SimpleData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i118.SimpleData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i117.SimpleData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i118.SimpleData?>?>()) {
+    if (t == _i1.getType<List<_i117.SimpleData?>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i118.SimpleData?>(e))
+              .map((e) => deserialize<_i117.SimpleData?>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i118.SimpleData?>?>()) {
+    if (t == _i1.getType<List<_i117.SimpleData?>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i118.SimpleData?>(e))
+              .map((e) => deserialize<_i117.SimpleData?>(e))
               .toList()
           : null) as dynamic;
     }
@@ -1816,14 +1815,14 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<int>(e['k']), deserialize<int>(e['v']))))
           as dynamic;
     }
-    if (t == Map<_i119.TestEnum, int>) {
+    if (t == Map<_i118.TestEnum, int>) {
       return Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i119.TestEnum>(e['k']), deserialize<int>(e['v']))))
+              deserialize<_i118.TestEnum>(e['k']), deserialize<int>(e['v']))))
           as dynamic;
     }
-    if (t == Map<String, _i119.TestEnum>) {
+    if (t == Map<String, _i118.TestEnum>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i119.TestEnum>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i118.TestEnum>(v)))
           as dynamic;
     }
     if (t == Map<String, double>) {
@@ -1862,47 +1861,47 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<String>(k), deserialize<DateTime?>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i116.ByteData>) {
+    if (t == Map<String, _i115.ByteData>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i116.ByteData>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i115.ByteData>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i116.ByteData?>) {
+    if (t == Map<String, _i115.ByteData?>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i116.ByteData?>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i115.ByteData?>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i118.SimpleData>) {
+    if (t == Map<String, _i117.SimpleData>) {
       return (data as Map).map((k, v) => MapEntry(
-          deserialize<String>(k), deserialize<_i118.SimpleData>(v))) as dynamic;
+          deserialize<String>(k), deserialize<_i117.SimpleData>(v))) as dynamic;
     }
-    if (t == Map<String, _i118.SimpleData?>) {
+    if (t == Map<String, _i117.SimpleData?>) {
       return (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i118.SimpleData?>(v)))
+              deserialize<String>(k), deserialize<_i117.SimpleData?>(v)))
           as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i118.SimpleData>?>()) {
+    if (t == _i1.getType<Map<String, _i117.SimpleData>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i118.SimpleData>(v)))
+              deserialize<String>(k), deserialize<_i117.SimpleData>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i118.SimpleData>?>()) {
+    if (t == _i1.getType<Map<String, _i117.SimpleData>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i118.SimpleData>(v)))
+              deserialize<String>(k), deserialize<_i117.SimpleData>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i118.SimpleData?>?>()) {
+    if (t == _i1.getType<Map<String, _i117.SimpleData?>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i118.SimpleData?>(v)))
+              deserialize<String>(k), deserialize<_i117.SimpleData?>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i118.SimpleData?>?>()) {
+    if (t == _i1.getType<Map<String, _i117.SimpleData?>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i118.SimpleData?>(v)))
+              deserialize<String>(k), deserialize<_i117.SimpleData?>(v)))
           : null) as dynamic;
     }
     if (t == Map<String, Duration>) {
@@ -1915,47 +1914,47 @@ class Protocol extends _i1.SerializationManager {
               MapEntry(deserialize<String>(k), deserialize<Duration?>(v)))
           as dynamic;
     }
-    if (t == _i117.CustomClass) {
-      return _i117.CustomClass.fromJson(data) as T;
+    if (t == _i116.CustomClass) {
+      return _i116.CustomClass.fromJson(data) as T;
     }
-    if (t == _i117.CustomClass2) {
-      return _i117.CustomClass2.fromJson(data) as T;
+    if (t == _i116.CustomClass2) {
+      return _i116.CustomClass2.fromJson(data) as T;
     }
-    if (t == _i120.ProtocolCustomClass) {
-      return _i120.ProtocolCustomClass.fromJson(data) as T;
+    if (t == _i119.ProtocolCustomClass) {
+      return _i119.ProtocolCustomClass.fromJson(data) as T;
     }
-    if (t == _i121.ExternalCustomClass) {
-      return _i121.ExternalCustomClass.fromJson(data) as T;
+    if (t == _i120.ExternalCustomClass) {
+      return _i120.ExternalCustomClass.fromJson(data) as T;
     }
-    if (t == _i121.FreezedCustomClass) {
-      return _i121.FreezedCustomClass.fromJson(data) as T;
+    if (t == _i120.FreezedCustomClass) {
+      return _i120.FreezedCustomClass.fromJson(data) as T;
     }
-    if (t == _i1.getType<_i117.CustomClass?>()) {
-      return (data != null ? _i117.CustomClass.fromJson(data) : null) as T;
+    if (t == _i1.getType<_i116.CustomClass?>()) {
+      return (data != null ? _i116.CustomClass.fromJson(data) : null) as T;
     }
-    if (t == _i1.getType<_i117.CustomClass2?>()) {
-      return (data != null ? _i117.CustomClass2.fromJson(data) : null) as T;
+    if (t == _i1.getType<_i116.CustomClass2?>()) {
+      return (data != null ? _i116.CustomClass2.fromJson(data) : null) as T;
     }
-    if (t == _i1.getType<_i117.CustomClass3?>()) {
-      return (data != null ? _i117.CustomClass3.fromJson(data) : null) as T;
+    if (t == _i1.getType<_i116.CustomClass3?>()) {
+      return (data != null ? _i116.CustomClass3.fromJson(data) : null) as T;
     }
-    if (t == _i1.getType<_i120.ProtocolCustomClass?>()) {
-      return (data != null ? _i120.ProtocolCustomClass.fromJson(data) : null)
+    if (t == _i1.getType<_i119.ProtocolCustomClass?>()) {
+      return (data != null ? _i119.ProtocolCustomClass.fromJson(data) : null)
           as T;
     }
-    if (t == _i1.getType<_i121.ExternalCustomClass?>()) {
-      return (data != null ? _i121.ExternalCustomClass.fromJson(data) : null)
+    if (t == _i1.getType<_i120.ExternalCustomClass?>()) {
+      return (data != null ? _i120.ExternalCustomClass.fromJson(data) : null)
           as T;
     }
-    if (t == _i1.getType<_i121.FreezedCustomClass?>()) {
-      return (data != null ? _i121.FreezedCustomClass.fromJson(data) : null)
+    if (t == _i1.getType<_i120.FreezedCustomClass?>()) {
+      return (data != null ? _i120.FreezedCustomClass.fromJson(data) : null)
           as T;
     }
     try {
-      return _i122.Protocol().deserialize<T>(data, t);
+      return _i121.Protocol().deserialize<T>(data, t);
     } on _i1.DeserializationTypeNotFoundException catch (_) {}
     try {
-      return _i115.Protocol().deserialize<T>(data, t);
+      return _i114.Protocol().deserialize<T>(data, t);
     } on _i1.DeserializationTypeNotFoundException catch (_) {}
     return super.deserialize<T>(data, t);
   }
@@ -1964,22 +1963,22 @@ class Protocol extends _i1.SerializationManager {
   String? getClassNameForObject(Object? data) {
     String? className = super.getClassNameForObject(data);
     if (className != null) return className;
-    if (data is _i117.CustomClass) {
+    if (data is _i116.CustomClass) {
       return 'CustomClass';
     }
-    if (data is _i117.CustomClass2) {
+    if (data is _i116.CustomClass2) {
       return 'CustomClass2';
     }
-    if (data is _i117.CustomClass3) {
+    if (data is _i116.CustomClass3) {
       return 'CustomClass3';
     }
-    if (data is _i120.ProtocolCustomClass) {
+    if (data is _i119.ProtocolCustomClass) {
       return 'ProtocolCustomClass';
     }
-    if (data is _i121.ExternalCustomClass) {
+    if (data is _i120.ExternalCustomClass) {
       return 'ExternalCustomClass';
     }
-    if (data is _i121.FreezedCustomClass) {
+    if (data is _i120.FreezedCustomClass) {
       return 'FreezedCustomClass';
     }
     if (data is _i2.BoolDefault) {
@@ -2324,11 +2323,11 @@ class Protocol extends _i1.SerializationManager {
     if (data is _i113.UniqueData) {
       return 'UniqueData';
     }
-    className = _i122.Protocol().getClassNameForObject(data);
+    className = _i121.Protocol().getClassNameForObject(data);
     if (className != null) {
       return 'serverpod_auth.$className';
     }
-    className = _i115.Protocol().getClassNameForObject(data);
+    className = _i114.Protocol().getClassNameForObject(data);
     if (className != null) {
       return 'serverpod_test_module.$className';
     }
@@ -2342,22 +2341,22 @@ class Protocol extends _i1.SerializationManager {
       return super.deserializeByClassName(data);
     }
     if (dataClassName == 'CustomClass') {
-      return deserialize<_i117.CustomClass>(data['data']);
+      return deserialize<_i116.CustomClass>(data['data']);
     }
     if (dataClassName == 'CustomClass2') {
-      return deserialize<_i117.CustomClass2>(data['data']);
+      return deserialize<_i116.CustomClass2>(data['data']);
     }
     if (dataClassName == 'CustomClass3') {
-      return deserialize<_i117.CustomClass3>(data['data']);
+      return deserialize<_i116.CustomClass3>(data['data']);
     }
     if (dataClassName == 'ProtocolCustomClass') {
-      return deserialize<_i120.ProtocolCustomClass>(data['data']);
+      return deserialize<_i119.ProtocolCustomClass>(data['data']);
     }
     if (dataClassName == 'ExternalCustomClass') {
-      return deserialize<_i121.ExternalCustomClass>(data['data']);
+      return deserialize<_i120.ExternalCustomClass>(data['data']);
     }
     if (dataClassName == 'FreezedCustomClass') {
-      return deserialize<_i121.FreezedCustomClass>(data['data']);
+      return deserialize<_i120.FreezedCustomClass>(data['data']);
     }
     if (dataClassName == 'BoolDefault') {
       return deserialize<_i2.BoolDefault>(data['data']);
@@ -2703,11 +2702,11 @@ class Protocol extends _i1.SerializationManager {
     }
     if (dataClassName.startsWith('serverpod_auth.')) {
       data['className'] = dataClassName.substring(15);
-      return _i122.Protocol().deserializeByClassName(data);
+      return _i121.Protocol().deserializeByClassName(data);
     }
     if (dataClassName.startsWith('serverpod_test_module.')) {
       data['className'] = dataClassName.substring(22);
-      return _i115.Protocol().deserializeByClassName(data);
+      return _i114.Protocol().deserializeByClassName(data);
     }
     return super.deserializeByClassName(data);
   }
diff --git a/tests/serverpod_test_client/lib/src/protocol/related_unique_data.dart b/tests/serverpod_test_client/lib/src/protocol/related_unique_data.dart
index a66820bb04..1539056d22 100644
--- a/tests/serverpod_test_client/lib/src/protocol/related_unique_data.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/related_unique_data.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'unique_data.dart' as _i2;
 
 abstract class RelatedUniqueData implements _i1.SerializableModel {
   RelatedUniqueData._({
diff --git a/tests/serverpod_test_client/lib/src/protocol/scopes/scope_server_only_field.dart b/tests/serverpod_test_client/lib/src/protocol/scopes/scope_server_only_field.dart
index a6ca34a3a9..4570870ec2 100644
--- a/tests/serverpod_test_client/lib/src/protocol/scopes/scope_server_only_field.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/scopes/scope_server_only_field.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../types.dart' as _i2;
+import '../scopes/scope_server_only_field.dart' as _i3;
 
 class ScopeServerOnlyField implements _i1.SerializableModel {
   ScopeServerOnlyField({
@@ -27,14 +28,14 @@ class ScopeServerOnlyField implements _i1.SerializableModel {
               (jsonSerialization['allScope'] as Map<String, dynamic>)),
       nested: jsonSerialization['nested'] == null
           ? null
-          : _i2.ScopeServerOnlyField.fromJson(
+          : _i3.ScopeServerOnlyField.fromJson(
               (jsonSerialization['nested'] as Map<String, dynamic>)),
     );
   }
 
   _i2.Types? allScope;
 
-  _i2.ScopeServerOnlyField? nested;
+  _i3.ScopeServerOnlyField? nested;
 
   ScopeServerOnlyField copyWith({
     Object? allScope = _Undefined,
@@ -42,7 +43,7 @@ class ScopeServerOnlyField implements _i1.SerializableModel {
   }) {
     return ScopeServerOnlyField(
       allScope: allScope is _i2.Types? ? allScope : this.allScope?.copyWith(),
-      nested: nested is _i2.ScopeServerOnlyField?
+      nested: nested is _i3.ScopeServerOnlyField?
           ? nested
           : this.nested?.copyWith(),
     );
diff --git a/tests/serverpod_test_client/lib/src/protocol/scopes/scope_server_only_field_child.dart b/tests/serverpod_test_client/lib/src/protocol/scopes/scope_server_only_field_child.dart
index fbcec90fc5..963eb0a6b7 100644
--- a/tests/serverpod_test_client/lib/src/protocol/scopes/scope_server_only_field_child.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/scopes/scope_server_only_field_child.dart
@@ -11,6 +11,8 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import '../protocol.dart' as _i1;
 import 'package:serverpod_client/serverpod_client.dart' as _i2;
+import '../types.dart' as _i3;
+import '../scopes/scope_server_only_field.dart' as _i4;
 
 abstract class ScopeServerOnlyFieldChild extends _i1.ScopeServerOnlyField
     implements _i2.SerializableModel {
@@ -21,8 +23,8 @@ abstract class ScopeServerOnlyFieldChild extends _i1.ScopeServerOnlyField
   });
 
   factory ScopeServerOnlyFieldChild({
-    _i1.Types? allScope,
-    _i1.ScopeServerOnlyField? nested,
+    _i3.Types? allScope,
+    _i4.ScopeServerOnlyField? nested,
     required String childFoo,
   }) = _ScopeServerOnlyFieldChildImpl;
 
@@ -31,11 +33,11 @@ abstract class ScopeServerOnlyFieldChild extends _i1.ScopeServerOnlyField
     return ScopeServerOnlyFieldChild(
       allScope: jsonSerialization['allScope'] == null
           ? null
-          : _i1.Types.fromJson(
+          : _i3.Types.fromJson(
               (jsonSerialization['allScope'] as Map<String, dynamic>)),
       nested: jsonSerialization['nested'] == null
           ? null
-          : _i1.ScopeServerOnlyField.fromJson(
+          : _i4.ScopeServerOnlyField.fromJson(
               (jsonSerialization['nested'] as Map<String, dynamic>)),
       childFoo: jsonSerialization['childFoo'] as String,
     );
@@ -68,8 +70,8 @@ class _Undefined {}
 
 class _ScopeServerOnlyFieldChildImpl extends ScopeServerOnlyFieldChild {
   _ScopeServerOnlyFieldChildImpl({
-    _i1.Types? allScope,
-    _i1.ScopeServerOnlyField? nested,
+    _i3.Types? allScope,
+    _i4.ScopeServerOnlyField? nested,
     required String childFoo,
   }) : super._(
           allScope: allScope,
@@ -84,8 +86,8 @@ class _ScopeServerOnlyFieldChildImpl extends ScopeServerOnlyFieldChild {
     String? childFoo,
   }) {
     return ScopeServerOnlyFieldChild(
-      allScope: allScope is _i1.Types? ? allScope : this.allScope?.copyWith(),
-      nested: nested is _i1.ScopeServerOnlyField?
+      allScope: allScope is _i3.Types? ? allScope : this.allScope?.copyWith(),
+      nested: nested is _i4.ScopeServerOnlyField?
           ? nested
           : this.nested?.copyWith(),
       childFoo: childFoo ?? this.childFoo,
diff --git a/tests/serverpod_test_client/lib/src/protocol/simple_data_list.dart b/tests/serverpod_test_client/lib/src/protocol/simple_data_list.dart
index cea69ea9a0..bb639207dc 100644
--- a/tests/serverpod_test_client/lib/src/protocol/simple_data_list.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/simple_data_list.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class SimpleDataList implements _i1.SerializableModel {
   SimpleDataList._({required this.rows});
diff --git a/tests/serverpod_test_client/lib/src/protocol/simple_data_map.dart b/tests/serverpod_test_client/lib/src/protocol/simple_data_map.dart
index 9fb3658528..59ea6d2b38 100644
--- a/tests/serverpod_test_client/lib/src/protocol/simple_data_map.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/simple_data_map.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class SimpleDataMap implements _i1.SerializableModel {
   SimpleDataMap._({required this.data});
diff --git a/tests/serverpod_test_client/lib/src/protocol/simple_data_object.dart b/tests/serverpod_test_client/lib/src/protocol/simple_data_object.dart
index b00b15144a..a0573c79e8 100644
--- a/tests/serverpod_test_client/lib/src/protocol/simple_data_object.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/simple_data_object.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class SimpleDataObject implements _i1.SerializableModel {
   SimpleDataObject._({required this.object});
diff --git a/tests/serverpod_test_client/lib/src/protocol/types.dart b/tests/serverpod_test_client/lib/src/protocol/types.dart
index 7d0e147fc4..fb9f182d1e 100644
--- a/tests/serverpod_test_client/lib/src/protocol/types.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/types.dart
@@ -11,7 +11,8 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
 import 'dart:typed_data' as _i2;
-import 'protocol.dart' as _i3;
+import 'test_enum.dart' as _i3;
+import 'test_enum_stringified.dart' as _i4;
 
 abstract class Types implements _i1.SerializableModel {
   Types._({
@@ -39,7 +40,7 @@ abstract class Types implements _i1.SerializableModel {
     Duration? aDuration,
     _i1.UuidValue? aUuid,
     _i3.TestEnum? anEnum,
-    _i3.TestEnumStringified? aStringifiedEnum,
+    _i4.TestEnumStringified? aStringifiedEnum,
   }) = _TypesImpl;
 
   factory Types.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -66,7 +67,7 @@ abstract class Types implements _i1.SerializableModel {
           : _i3.TestEnum.fromJson((jsonSerialization['anEnum'] as int)),
       aStringifiedEnum: jsonSerialization['aStringifiedEnum'] == null
           ? null
-          : _i3.TestEnumStringified.fromJson(
+          : _i4.TestEnumStringified.fromJson(
               (jsonSerialization['aStringifiedEnum'] as String)),
     );
   }
@@ -94,7 +95,7 @@ abstract class Types implements _i1.SerializableModel {
 
   _i3.TestEnum? anEnum;
 
-  _i3.TestEnumStringified? aStringifiedEnum;
+  _i4.TestEnumStringified? aStringifiedEnum;
 
   Types copyWith({
     int? id,
@@ -107,7 +108,7 @@ abstract class Types implements _i1.SerializableModel {
     Duration? aDuration,
     _i1.UuidValue? aUuid,
     _i3.TestEnum? anEnum,
-    _i3.TestEnumStringified? aStringifiedEnum,
+    _i4.TestEnumStringified? aStringifiedEnum,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -147,7 +148,7 @@ class _TypesImpl extends Types {
     Duration? aDuration,
     _i1.UuidValue? aUuid,
     _i3.TestEnum? anEnum,
-    _i3.TestEnumStringified? aStringifiedEnum,
+    _i4.TestEnumStringified? aStringifiedEnum,
   }) : super._(
           id: id,
           anInt: anInt,
@@ -188,7 +189,7 @@ class _TypesImpl extends Types {
       aDuration: aDuration is Duration? ? aDuration : this.aDuration,
       aUuid: aUuid is _i1.UuidValue? ? aUuid : this.aUuid,
       anEnum: anEnum is _i3.TestEnum? ? anEnum : this.anEnum,
-      aStringifiedEnum: aStringifiedEnum is _i3.TestEnumStringified?
+      aStringifiedEnum: aStringifiedEnum is _i4.TestEnumStringified?
           ? aStringifiedEnum
           : this.aStringifiedEnum,
     );
diff --git a/tests/serverpod_test_client/lib/src/protocol/types_list.dart b/tests/serverpod_test_client/lib/src/protocol/types_list.dart
index 172cff403d..9f324bb963 100644
--- a/tests/serverpod_test_client/lib/src/protocol/types_list.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/types_list.dart
@@ -11,7 +11,9 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
 import 'dart:typed_data' as _i2;
-import 'protocol.dart' as _i3;
+import 'test_enum.dart' as _i3;
+import 'test_enum_stringified.dart' as _i4;
+import 'types.dart' as _i5;
 
 abstract class TypesList implements _i1.SerializableModel {
   TypesList._({
@@ -40,10 +42,10 @@ abstract class TypesList implements _i1.SerializableModel {
     List<Duration>? aDuration,
     List<_i1.UuidValue>? aUuid,
     List<_i3.TestEnum>? anEnum,
-    List<_i3.TestEnumStringified>? aStringifiedEnum,
-    List<_i3.Types>? anObject,
-    List<Map<String, _i3.Types>>? aMap,
-    List<List<_i3.Types>>? aList,
+    List<_i4.TestEnumStringified>? aStringifiedEnum,
+    List<_i5.Types>? anObject,
+    List<Map<String, _i5.Types>>? aMap,
+    List<List<_i5.Types>>? aList,
   }) = _TypesListImpl;
 
   factory TypesList.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -74,20 +76,20 @@ abstract class TypesList implements _i1.SerializableModel {
           ?.map((e) => _i3.TestEnum.fromJson((e as int)))
           .toList(),
       aStringifiedEnum: (jsonSerialization['aStringifiedEnum'] as List?)
-          ?.map((e) => _i3.TestEnumStringified.fromJson((e as String)))
+          ?.map((e) => _i4.TestEnumStringified.fromJson((e as String)))
           .toList(),
       anObject: (jsonSerialization['anObject'] as List?)
-          ?.map((e) => _i3.Types.fromJson((e as Map<String, dynamic>)))
+          ?.map((e) => _i5.Types.fromJson((e as Map<String, dynamic>)))
           .toList(),
       aMap: (jsonSerialization['aMap'] as List?)
           ?.map((e) => (e as Map).map((k, v) => MapEntry(
                 k as String,
-                _i3.Types.fromJson((v as Map<String, dynamic>)),
+                _i5.Types.fromJson((v as Map<String, dynamic>)),
               )))
           .toList(),
       aList: (jsonSerialization['aList'] as List?)
           ?.map((e) => (e as List)
-              .map((e) => _i3.Types.fromJson((e as Map<String, dynamic>)))
+              .map((e) => _i5.Types.fromJson((e as Map<String, dynamic>)))
               .toList())
           .toList(),
     );
@@ -111,13 +113,13 @@ abstract class TypesList implements _i1.SerializableModel {
 
   List<_i3.TestEnum>? anEnum;
 
-  List<_i3.TestEnumStringified>? aStringifiedEnum;
+  List<_i4.TestEnumStringified>? aStringifiedEnum;
 
-  List<_i3.Types>? anObject;
+  List<_i5.Types>? anObject;
 
-  List<Map<String, _i3.Types>>? aMap;
+  List<Map<String, _i5.Types>>? aMap;
 
-  List<List<_i3.Types>>? aList;
+  List<List<_i5.Types>>? aList;
 
   TypesList copyWith({
     List<int>? anInt,
@@ -129,10 +131,10 @@ abstract class TypesList implements _i1.SerializableModel {
     List<Duration>? aDuration,
     List<_i1.UuidValue>? aUuid,
     List<_i3.TestEnum>? anEnum,
-    List<_i3.TestEnumStringified>? aStringifiedEnum,
-    List<_i3.Types>? anObject,
-    List<Map<String, _i3.Types>>? aMap,
-    List<List<_i3.Types>>? aList,
+    List<_i4.TestEnumStringified>? aStringifiedEnum,
+    List<_i5.Types>? anObject,
+    List<Map<String, _i5.Types>>? aMap,
+    List<List<_i5.Types>>? aList,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -183,10 +185,10 @@ class _TypesListImpl extends TypesList {
     List<Duration>? aDuration,
     List<_i1.UuidValue>? aUuid,
     List<_i3.TestEnum>? anEnum,
-    List<_i3.TestEnumStringified>? aStringifiedEnum,
-    List<_i3.Types>? anObject,
-    List<Map<String, _i3.Types>>? aMap,
-    List<List<_i3.Types>>? aList,
+    List<_i4.TestEnumStringified>? aStringifiedEnum,
+    List<_i5.Types>? anObject,
+    List<Map<String, _i5.Types>>? aMap,
+    List<List<_i5.Types>>? aList,
   }) : super._(
           anInt: anInt,
           aBool: aBool,
@@ -244,13 +246,13 @@ class _TypesListImpl extends TypesList {
       anEnum: anEnum is List<_i3.TestEnum>?
           ? anEnum
           : this.anEnum?.map((e0) => e0).toList(),
-      aStringifiedEnum: aStringifiedEnum is List<_i3.TestEnumStringified>?
+      aStringifiedEnum: aStringifiedEnum is List<_i4.TestEnumStringified>?
           ? aStringifiedEnum
           : this.aStringifiedEnum?.map((e0) => e0).toList(),
-      anObject: anObject is List<_i3.Types>?
+      anObject: anObject is List<_i5.Types>?
           ? anObject
           : this.anObject?.map((e0) => e0.copyWith()).toList(),
-      aMap: aMap is List<Map<String, _i3.Types>>?
+      aMap: aMap is List<Map<String, _i5.Types>>?
           ? aMap
           : this
               .aMap
@@ -263,7 +265,7 @@ class _TypesListImpl extends TypesList {
                         value1.copyWith(),
                       )))
               .toList(),
-      aList: aList is List<List<_i3.Types>>?
+      aList: aList is List<List<_i5.Types>>?
           ? aList
           : this
               .aList
diff --git a/tests/serverpod_test_client/lib/src/protocol/types_map.dart b/tests/serverpod_test_client/lib/src/protocol/types_map.dart
index 3314490e65..3e90d0d3ab 100644
--- a/tests/serverpod_test_client/lib/src/protocol/types_map.dart
+++ b/tests/serverpod_test_client/lib/src/protocol/types_map.dart
@@ -11,7 +11,9 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod_client/serverpod_client.dart' as _i1;
 import 'dart:typed_data' as _i2;
-import 'protocol.dart' as _i3;
+import 'test_enum.dart' as _i3;
+import 'test_enum_stringified.dart' as _i4;
+import 'types.dart' as _i5;
 
 abstract class TypesMap implements _i1.SerializableModel {
   TypesMap._({
@@ -53,10 +55,10 @@ abstract class TypesMap implements _i1.SerializableModel {
     Map<Duration, String>? aDurationKey,
     Map<_i1.UuidValue, String>? aUuidKey,
     Map<_i3.TestEnum, String>? anEnumKey,
-    Map<_i3.TestEnumStringified, String>? aStringifiedEnumKey,
-    Map<_i3.Types, String>? anObjectKey,
-    Map<Map<_i3.Types, String>, String>? aMapKey,
-    Map<List<_i3.Types>, String>? aListKey,
+    Map<_i4.TestEnumStringified, String>? aStringifiedEnumKey,
+    Map<_i5.Types, String>? anObjectKey,
+    Map<Map<_i5.Types, String>, String>? aMapKey,
+    Map<List<_i5.Types>, String>? aListKey,
     Map<String, int>? anIntValue,
     Map<String, bool>? aBoolValue,
     Map<String, double>? aDoubleValue,
@@ -66,10 +68,10 @@ abstract class TypesMap implements _i1.SerializableModel {
     Map<String, Duration>? aDurationValue,
     Map<String, _i1.UuidValue>? aUuidValue,
     Map<String, _i3.TestEnum>? anEnumValue,
-    Map<String, _i3.TestEnumStringified>? aStringifiedEnumValue,
-    Map<String, _i3.Types>? anObjectValue,
-    Map<String, Map<String, _i3.Types>>? aMapValue,
-    Map<String, List<_i3.Types>>? aListValue,
+    Map<String, _i4.TestEnumStringified>? aStringifiedEnumValue,
+    Map<String, _i5.Types>? anObjectValue,
+    Map<String, Map<String, _i5.Types>>? aMapValue,
+    Map<String, List<_i5.Types>>? aListValue,
   }) = _TypesMapImpl;
 
   factory TypesMap.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -125,41 +127,41 @@ abstract class TypesMap implements _i1.SerializableModel {
                     _i3.TestEnum.fromJson((e['k'] as int)): e['v'] as String
                   }),
       aStringifiedEnumKey: (jsonSerialization['aStringifiedEnumKey'] as List?)
-          ?.fold<Map<_i3.TestEnumStringified, String>>(
+          ?.fold<Map<_i4.TestEnumStringified, String>>(
               {},
               (t, e) => {
                     ...t,
-                    _i3.TestEnumStringified.fromJson((e['k'] as String)):
+                    _i4.TestEnumStringified.fromJson((e['k'] as String)):
                         e['v'] as String
                   }),
       anObjectKey: (jsonSerialization['anObjectKey'] as List?)
-          ?.fold<Map<_i3.Types, String>>(
+          ?.fold<Map<_i5.Types, String>>(
               {},
               (t, e) => {
                     ...t,
-                    _i3.Types.fromJson((e['k'] as Map<String, dynamic>)):
+                    _i5.Types.fromJson((e['k'] as Map<String, dynamic>)):
                         e['v'] as String
                   }),
       aMapKey: (jsonSerialization['aMapKey'] as List?)?.fold<
-              Map<Map<_i3.Types, String>, String>>(
+              Map<Map<_i5.Types, String>, String>>(
           {},
           (t, e) => {
                 ...t,
-                (e['k'] as List).fold<Map<_i3.Types, String>>(
+                (e['k'] as List).fold<Map<_i5.Types, String>>(
                     {},
                     (t, e) => {
                           ...t,
-                          _i3.Types.fromJson((e['k'] as Map<String, dynamic>)):
+                          _i5.Types.fromJson((e['k'] as Map<String, dynamic>)):
                               e['v'] as String
                         }): e['v'] as String
               }),
       aListKey: (jsonSerialization['aListKey'] as List?)?.fold<
-              Map<List<_i3.Types>, String>>(
+              Map<List<_i5.Types>, String>>(
           {},
           (t, e) => {
                 ...t,
                 (e['k'] as List)
-                    .map((e) => _i3.Types.fromJson((e as Map<String, dynamic>)))
+                    .map((e) => _i5.Types.fromJson((e as Map<String, dynamic>)))
                     .toList(): e['v'] as String
               }),
       anIntValue:
@@ -211,26 +213,26 @@ abstract class TypesMap implements _i1.SerializableModel {
           (jsonSerialization['aStringifiedEnumValue'] as Map?)
               ?.map((k, v) => MapEntry(
                     k as String,
-                    _i3.TestEnumStringified.fromJson((v as String)),
+                    _i4.TestEnumStringified.fromJson((v as String)),
                   )),
       anObjectValue:
           (jsonSerialization['anObjectValue'] as Map?)?.map((k, v) => MapEntry(
                 k as String,
-                _i3.Types.fromJson((v as Map<String, dynamic>)),
+                _i5.Types.fromJson((v as Map<String, dynamic>)),
               )),
       aMapValue:
           (jsonSerialization['aMapValue'] as Map?)?.map((k, v) => MapEntry(
                 k as String,
                 (v as Map).map((k, v) => MapEntry(
                       k as String,
-                      _i3.Types.fromJson((v as Map<String, dynamic>)),
+                      _i5.Types.fromJson((v as Map<String, dynamic>)),
                     )),
               )),
       aListValue:
           (jsonSerialization['aListValue'] as Map?)?.map((k, v) => MapEntry(
                 k as String,
                 (v as List)
-                    .map((e) => _i3.Types.fromJson((e as Map<String, dynamic>)))
+                    .map((e) => _i5.Types.fromJson((e as Map<String, dynamic>)))
                     .toList(),
               )),
     );
@@ -254,13 +256,13 @@ abstract class TypesMap implements _i1.SerializableModel {
 
   Map<_i3.TestEnum, String>? anEnumKey;
 
-  Map<_i3.TestEnumStringified, String>? aStringifiedEnumKey;
+  Map<_i4.TestEnumStringified, String>? aStringifiedEnumKey;
 
-  Map<_i3.Types, String>? anObjectKey;
+  Map<_i5.Types, String>? anObjectKey;
 
-  Map<Map<_i3.Types, String>, String>? aMapKey;
+  Map<Map<_i5.Types, String>, String>? aMapKey;
 
-  Map<List<_i3.Types>, String>? aListKey;
+  Map<List<_i5.Types>, String>? aListKey;
 
   Map<String, int>? anIntValue;
 
@@ -280,13 +282,13 @@ abstract class TypesMap implements _i1.SerializableModel {
 
   Map<String, _i3.TestEnum>? anEnumValue;
 
-  Map<String, _i3.TestEnumStringified>? aStringifiedEnumValue;
+  Map<String, _i4.TestEnumStringified>? aStringifiedEnumValue;
 
-  Map<String, _i3.Types>? anObjectValue;
+  Map<String, _i5.Types>? anObjectValue;
 
-  Map<String, Map<String, _i3.Types>>? aMapValue;
+  Map<String, Map<String, _i5.Types>>? aMapValue;
 
-  Map<String, List<_i3.Types>>? aListValue;
+  Map<String, List<_i5.Types>>? aListValue;
 
   TypesMap copyWith({
     Map<int, String>? anIntKey,
@@ -298,10 +300,10 @@ abstract class TypesMap implements _i1.SerializableModel {
     Map<Duration, String>? aDurationKey,
     Map<_i1.UuidValue, String>? aUuidKey,
     Map<_i3.TestEnum, String>? anEnumKey,
-    Map<_i3.TestEnumStringified, String>? aStringifiedEnumKey,
-    Map<_i3.Types, String>? anObjectKey,
-    Map<Map<_i3.Types, String>, String>? aMapKey,
-    Map<List<_i3.Types>, String>? aListKey,
+    Map<_i4.TestEnumStringified, String>? aStringifiedEnumKey,
+    Map<_i5.Types, String>? anObjectKey,
+    Map<Map<_i5.Types, String>, String>? aMapKey,
+    Map<List<_i5.Types>, String>? aListKey,
     Map<String, int>? anIntValue,
     Map<String, bool>? aBoolValue,
     Map<String, double>? aDoubleValue,
@@ -311,10 +313,10 @@ abstract class TypesMap implements _i1.SerializableModel {
     Map<String, Duration>? aDurationValue,
     Map<String, _i1.UuidValue>? aUuidValue,
     Map<String, _i3.TestEnum>? anEnumValue,
-    Map<String, _i3.TestEnumStringified>? aStringifiedEnumValue,
-    Map<String, _i3.Types>? anObjectValue,
-    Map<String, Map<String, _i3.Types>>? aMapValue,
-    Map<String, List<_i3.Types>>? aListValue,
+    Map<String, _i4.TestEnumStringified>? aStringifiedEnumValue,
+    Map<String, _i5.Types>? anObjectValue,
+    Map<String, Map<String, _i5.Types>>? aMapValue,
+    Map<String, List<_i5.Types>>? aListValue,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -394,10 +396,10 @@ class _TypesMapImpl extends TypesMap {
     Map<Duration, String>? aDurationKey,
     Map<_i1.UuidValue, String>? aUuidKey,
     Map<_i3.TestEnum, String>? anEnumKey,
-    Map<_i3.TestEnumStringified, String>? aStringifiedEnumKey,
-    Map<_i3.Types, String>? anObjectKey,
-    Map<Map<_i3.Types, String>, String>? aMapKey,
-    Map<List<_i3.Types>, String>? aListKey,
+    Map<_i4.TestEnumStringified, String>? aStringifiedEnumKey,
+    Map<_i5.Types, String>? anObjectKey,
+    Map<Map<_i5.Types, String>, String>? aMapKey,
+    Map<List<_i5.Types>, String>? aListKey,
     Map<String, int>? anIntValue,
     Map<String, bool>? aBoolValue,
     Map<String, double>? aDoubleValue,
@@ -407,10 +409,10 @@ class _TypesMapImpl extends TypesMap {
     Map<String, Duration>? aDurationValue,
     Map<String, _i1.UuidValue>? aUuidValue,
     Map<String, _i3.TestEnum>? anEnumValue,
-    Map<String, _i3.TestEnumStringified>? aStringifiedEnumValue,
-    Map<String, _i3.Types>? anObjectValue,
-    Map<String, Map<String, _i3.Types>>? aMapValue,
-    Map<String, List<_i3.Types>>? aListValue,
+    Map<String, _i4.TestEnumStringified>? aStringifiedEnumValue,
+    Map<String, _i5.Types>? anObjectValue,
+    Map<String, Map<String, _i5.Types>>? aMapValue,
+    Map<String, List<_i5.Types>>? aListValue,
   }) : super._(
           anIntKey: anIntKey,
           aBoolKey: aBoolKey,
@@ -561,7 +563,7 @@ class _TypesMapImpl extends TypesMap {
                     value0,
                   )),
       aStringifiedEnumKey:
-          aStringifiedEnumKey is Map<_i3.TestEnumStringified, String>?
+          aStringifiedEnumKey is Map<_i4.TestEnumStringified, String>?
               ? aStringifiedEnumKey
               : this.aStringifiedEnumKey?.map((
                     key0,
@@ -571,7 +573,7 @@ class _TypesMapImpl extends TypesMap {
                         key0,
                         value0,
                       )),
-      anObjectKey: anObjectKey is Map<_i3.Types, String>?
+      anObjectKey: anObjectKey is Map<_i5.Types, String>?
           ? anObjectKey
           : this.anObjectKey?.map((
                 key0,
@@ -581,7 +583,7 @@ class _TypesMapImpl extends TypesMap {
                     key0.copyWith(),
                     value0,
                   )),
-      aMapKey: aMapKey is Map<Map<_i3.Types, String>, String>?
+      aMapKey: aMapKey is Map<Map<_i5.Types, String>, String>?
           ? aMapKey
           : this.aMapKey?.map((
                 key0,
@@ -598,7 +600,7 @@ class _TypesMapImpl extends TypesMap {
                         )),
                     value0,
                   )),
-      aListKey: aListKey is Map<List<_i3.Types>, String>?
+      aListKey: aListKey is Map<List<_i5.Types>, String>?
           ? aListKey
           : this.aListKey?.map((
                 key0,
@@ -699,7 +701,7 @@ class _TypesMapImpl extends TypesMap {
                     value0,
                   )),
       aStringifiedEnumValue:
-          aStringifiedEnumValue is Map<String, _i3.TestEnumStringified>?
+          aStringifiedEnumValue is Map<String, _i4.TestEnumStringified>?
               ? aStringifiedEnumValue
               : this.aStringifiedEnumValue?.map((
                     key0,
@@ -709,7 +711,7 @@ class _TypesMapImpl extends TypesMap {
                         key0,
                         value0,
                       )),
-      anObjectValue: anObjectValue is Map<String, _i3.Types>?
+      anObjectValue: anObjectValue is Map<String, _i5.Types>?
           ? anObjectValue
           : this.anObjectValue?.map((
                 key0,
@@ -719,7 +721,7 @@ class _TypesMapImpl extends TypesMap {
                     key0,
                     value0.copyWith(),
                   )),
-      aMapValue: aMapValue is Map<String, Map<String, _i3.Types>>?
+      aMapValue: aMapValue is Map<String, Map<String, _i5.Types>>?
           ? aMapValue
           : this.aMapValue?.map((
                 key0,
@@ -736,7 +738,7 @@ class _TypesMapImpl extends TypesMap {
                           value1.copyWith(),
                         )),
                   )),
-      aListValue: aListValue is Map<String, List<_i3.Types>>?
+      aListValue: aListValue is Map<String, List<_i5.Types>>?
           ? aListValue
           : this.aListValue?.map((
                 key0,
diff --git a/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default.dart b/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default.dart
index bd1c54c34d..2ac5dcd7b7 100644
--- a/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default.dart
+++ b/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default.dart
@@ -10,27 +10,28 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
+import '../../defaults/enum/enums/by_index_enum.dart' as _i3;
 
 abstract class EnumDefault implements _i1.TableRow, _i1.ProtocolSerialization {
   EnumDefault._({
     this.id,
     _i2.ByNameEnum? byNameEnumDefault,
     _i2.ByNameEnum? byNameEnumDefaultNull,
-    _i2.ByIndexEnum? byIndexEnumDefault,
-    _i2.ByIndexEnum? byIndexEnumDefaultNull,
+    _i3.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefaultNull,
   })  : byNameEnumDefault = byNameEnumDefault ?? _i2.ByNameEnum.byName1,
         byNameEnumDefaultNull = byNameEnumDefaultNull ?? _i2.ByNameEnum.byName2,
-        byIndexEnumDefault = byIndexEnumDefault ?? _i2.ByIndexEnum.byIndex1,
+        byIndexEnumDefault = byIndexEnumDefault ?? _i3.ByIndexEnum.byIndex1,
         byIndexEnumDefaultNull =
-            byIndexEnumDefaultNull ?? _i2.ByIndexEnum.byIndex2;
+            byIndexEnumDefaultNull ?? _i3.ByIndexEnum.byIndex2;
 
   factory EnumDefault({
     int? id,
     _i2.ByNameEnum? byNameEnumDefault,
     _i2.ByNameEnum? byNameEnumDefaultNull,
-    _i2.ByIndexEnum? byIndexEnumDefault,
-    _i2.ByIndexEnum? byIndexEnumDefaultNull,
+    _i3.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefaultNull,
   }) = _EnumDefaultImpl;
 
   factory EnumDefault.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -42,12 +43,12 @@ abstract class EnumDefault implements _i1.TableRow, _i1.ProtocolSerialization {
           ? null
           : _i2.ByNameEnum.fromJson(
               (jsonSerialization['byNameEnumDefaultNull'] as String)),
-      byIndexEnumDefault: _i2.ByIndexEnum.fromJson(
+      byIndexEnumDefault: _i3.ByIndexEnum.fromJson(
           (jsonSerialization['byIndexEnumDefault'] as int)),
       byIndexEnumDefaultNull:
           jsonSerialization['byIndexEnumDefaultNull'] == null
               ? null
-              : _i2.ByIndexEnum.fromJson(
+              : _i3.ByIndexEnum.fromJson(
                   (jsonSerialization['byIndexEnumDefaultNull'] as int)),
     );
   }
@@ -63,9 +64,9 @@ abstract class EnumDefault implements _i1.TableRow, _i1.ProtocolSerialization {
 
   _i2.ByNameEnum? byNameEnumDefaultNull;
 
-  _i2.ByIndexEnum byIndexEnumDefault;
+  _i3.ByIndexEnum byIndexEnumDefault;
 
-  _i2.ByIndexEnum? byIndexEnumDefaultNull;
+  _i3.ByIndexEnum? byIndexEnumDefaultNull;
 
   @override
   _i1.Table get table => t;
@@ -74,8 +75,8 @@ abstract class EnumDefault implements _i1.TableRow, _i1.ProtocolSerialization {
     int? id,
     _i2.ByNameEnum? byNameEnumDefault,
     _i2.ByNameEnum? byNameEnumDefaultNull,
-    _i2.ByIndexEnum? byIndexEnumDefault,
-    _i2.ByIndexEnum? byIndexEnumDefaultNull,
+    _i3.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefaultNull,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -140,8 +141,8 @@ class _EnumDefaultImpl extends EnumDefault {
     int? id,
     _i2.ByNameEnum? byNameEnumDefault,
     _i2.ByNameEnum? byNameEnumDefaultNull,
-    _i2.ByIndexEnum? byIndexEnumDefault,
-    _i2.ByIndexEnum? byIndexEnumDefaultNull,
+    _i3.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefaultNull,
   }) : super._(
           id: id,
           byNameEnumDefault: byNameEnumDefault,
@@ -155,7 +156,7 @@ class _EnumDefaultImpl extends EnumDefault {
     Object? id = _Undefined,
     _i2.ByNameEnum? byNameEnumDefault,
     Object? byNameEnumDefaultNull = _Undefined,
-    _i2.ByIndexEnum? byIndexEnumDefault,
+    _i3.ByIndexEnum? byIndexEnumDefault,
     Object? byIndexEnumDefaultNull = _Undefined,
   }) {
     return EnumDefault(
@@ -165,7 +166,7 @@ class _EnumDefaultImpl extends EnumDefault {
           ? byNameEnumDefaultNull
           : this.byNameEnumDefaultNull,
       byIndexEnumDefault: byIndexEnumDefault ?? this.byIndexEnumDefault,
-      byIndexEnumDefaultNull: byIndexEnumDefaultNull is _i2.ByIndexEnum?
+      byIndexEnumDefaultNull: byIndexEnumDefaultNull is _i3.ByIndexEnum?
           ? byIndexEnumDefaultNull
           : this.byIndexEnumDefaultNull,
     );
@@ -204,9 +205,9 @@ class EnumDefaultTable extends _i1.Table {
 
   late final _i1.ColumnEnum<_i2.ByNameEnum> byNameEnumDefaultNull;
 
-  late final _i1.ColumnEnum<_i2.ByIndexEnum> byIndexEnumDefault;
+  late final _i1.ColumnEnum<_i3.ByIndexEnum> byIndexEnumDefault;
 
-  late final _i1.ColumnEnum<_i2.ByIndexEnum> byIndexEnumDefaultNull;
+  late final _i1.ColumnEnum<_i3.ByIndexEnum> byIndexEnumDefaultNull;
 
   @override
   List<_i1.Column> get columns => [
diff --git a/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_mix.dart b/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_mix.dart
index 92e70fccfc..7fc5a89a80 100644
--- a/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_mix.dart
+++ b/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_mix.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
 
 abstract class EnumDefaultMix
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_model.dart b/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_model.dart
index 566a4281a6..e6a04c94e4 100644
--- a/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_model.dart
+++ b/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_model.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
+import '../../defaults/enum/enums/by_index_enum.dart' as _i3;
 
 abstract class EnumDefaultModel
     implements _i1.TableRow, _i1.ProtocolSerialization {
@@ -18,23 +19,23 @@ abstract class EnumDefaultModel
     this.id,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     _i2.ByNameEnum? byNameEnumDefaultModelNull,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
-    _i2.ByIndexEnum? byIndexEnumDefaultModelNull,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModelNull,
   })  : byNameEnumDefaultModel =
             byNameEnumDefaultModel ?? _i2.ByNameEnum.byName1,
         byNameEnumDefaultModelNull =
             byNameEnumDefaultModelNull ?? _i2.ByNameEnum.byName2,
         byIndexEnumDefaultModel =
-            byIndexEnumDefaultModel ?? _i2.ByIndexEnum.byIndex1,
+            byIndexEnumDefaultModel ?? _i3.ByIndexEnum.byIndex1,
         byIndexEnumDefaultModelNull =
-            byIndexEnumDefaultModelNull ?? _i2.ByIndexEnum.byIndex2;
+            byIndexEnumDefaultModelNull ?? _i3.ByIndexEnum.byIndex2;
 
   factory EnumDefaultModel({
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     _i2.ByNameEnum? byNameEnumDefaultModelNull,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
-    _i2.ByIndexEnum? byIndexEnumDefaultModelNull,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModelNull,
   }) = _EnumDefaultModelImpl;
 
   factory EnumDefaultModel.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -47,12 +48,12 @@ abstract class EnumDefaultModel
               ? null
               : _i2.ByNameEnum.fromJson(
                   (jsonSerialization['byNameEnumDefaultModelNull'] as String)),
-      byIndexEnumDefaultModel: _i2.ByIndexEnum.fromJson(
+      byIndexEnumDefaultModel: _i3.ByIndexEnum.fromJson(
           (jsonSerialization['byIndexEnumDefaultModel'] as int)),
       byIndexEnumDefaultModelNull:
           jsonSerialization['byIndexEnumDefaultModelNull'] == null
               ? null
-              : _i2.ByIndexEnum.fromJson(
+              : _i3.ByIndexEnum.fromJson(
                   (jsonSerialization['byIndexEnumDefaultModelNull'] as int)),
     );
   }
@@ -68,9 +69,9 @@ abstract class EnumDefaultModel
 
   _i2.ByNameEnum? byNameEnumDefaultModelNull;
 
-  _i2.ByIndexEnum byIndexEnumDefaultModel;
+  _i3.ByIndexEnum byIndexEnumDefaultModel;
 
-  _i2.ByIndexEnum? byIndexEnumDefaultModelNull;
+  _i3.ByIndexEnum? byIndexEnumDefaultModelNull;
 
   @override
   _i1.Table get table => t;
@@ -79,8 +80,8 @@ abstract class EnumDefaultModel
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     _i2.ByNameEnum? byNameEnumDefaultModelNull,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
-    _i2.ByIndexEnum? byIndexEnumDefaultModelNull,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModelNull,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -145,8 +146,8 @@ class _EnumDefaultModelImpl extends EnumDefaultModel {
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     _i2.ByNameEnum? byNameEnumDefaultModelNull,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
-    _i2.ByIndexEnum? byIndexEnumDefaultModelNull,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModelNull,
   }) : super._(
           id: id,
           byNameEnumDefaultModel: byNameEnumDefaultModel,
@@ -160,7 +161,7 @@ class _EnumDefaultModelImpl extends EnumDefaultModel {
     Object? id = _Undefined,
     _i2.ByNameEnum? byNameEnumDefaultModel,
     Object? byNameEnumDefaultModelNull = _Undefined,
-    _i2.ByIndexEnum? byIndexEnumDefaultModel,
+    _i3.ByIndexEnum? byIndexEnumDefaultModel,
     Object? byIndexEnumDefaultModelNull = _Undefined,
   }) {
     return EnumDefaultModel(
@@ -173,7 +174,7 @@ class _EnumDefaultModelImpl extends EnumDefaultModel {
       byIndexEnumDefaultModel:
           byIndexEnumDefaultModel ?? this.byIndexEnumDefaultModel,
       byIndexEnumDefaultModelNull:
-          byIndexEnumDefaultModelNull is _i2.ByIndexEnum?
+          byIndexEnumDefaultModelNull is _i3.ByIndexEnum?
               ? byIndexEnumDefaultModelNull
               : this.byIndexEnumDefaultModelNull,
     );
@@ -209,9 +210,9 @@ class EnumDefaultModelTable extends _i1.Table {
 
   late final _i1.ColumnEnum<_i2.ByNameEnum> byNameEnumDefaultModelNull;
 
-  late final _i1.ColumnEnum<_i2.ByIndexEnum> byIndexEnumDefaultModel;
+  late final _i1.ColumnEnum<_i3.ByIndexEnum> byIndexEnumDefaultModel;
 
-  late final _i1.ColumnEnum<_i2.ByIndexEnum> byIndexEnumDefaultModelNull;
+  late final _i1.ColumnEnum<_i3.ByIndexEnum> byIndexEnumDefaultModelNull;
 
   @override
   List<_i1.Column> get columns => [
diff --git a/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_persist.dart b/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_persist.dart
index 3d8cc29b6f..37e25b66cd 100644
--- a/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_persist.dart
+++ b/tests/serverpod_test_server/lib/src/generated/defaults/enum/enum_default_persist.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
+import '../../defaults/enum/enums/by_index_enum.dart' as _i3;
 
 abstract class EnumDefaultPersist
     implements _i1.TableRow, _i1.ProtocolSerialization {
@@ -23,7 +24,7 @@ abstract class EnumDefaultPersist
   factory EnumDefaultPersist({
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultPersist,
-    _i2.ByIndexEnum? byIndexEnumDefaultPersist,
+    _i3.ByIndexEnum? byIndexEnumDefaultPersist,
   }) = _EnumDefaultPersistImpl;
 
   factory EnumDefaultPersist.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -37,7 +38,7 @@ abstract class EnumDefaultPersist
       byIndexEnumDefaultPersist:
           jsonSerialization['byIndexEnumDefaultPersist'] == null
               ? null
-              : _i2.ByIndexEnum.fromJson(
+              : _i3.ByIndexEnum.fromJson(
                   (jsonSerialization['byIndexEnumDefaultPersist'] as int)),
     );
   }
@@ -51,7 +52,7 @@ abstract class EnumDefaultPersist
 
   _i2.ByNameEnum? byNameEnumDefaultPersist;
 
-  _i2.ByIndexEnum? byIndexEnumDefaultPersist;
+  _i3.ByIndexEnum? byIndexEnumDefaultPersist;
 
   @override
   _i1.Table get table => t;
@@ -59,7 +60,7 @@ abstract class EnumDefaultPersist
   EnumDefaultPersist copyWith({
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultPersist,
-    _i2.ByIndexEnum? byIndexEnumDefaultPersist,
+    _i3.ByIndexEnum? byIndexEnumDefaultPersist,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -119,7 +120,7 @@ class _EnumDefaultPersistImpl extends EnumDefaultPersist {
   _EnumDefaultPersistImpl({
     int? id,
     _i2.ByNameEnum? byNameEnumDefaultPersist,
-    _i2.ByIndexEnum? byIndexEnumDefaultPersist,
+    _i3.ByIndexEnum? byIndexEnumDefaultPersist,
   }) : super._(
           id: id,
           byNameEnumDefaultPersist: byNameEnumDefaultPersist,
@@ -137,7 +138,7 @@ class _EnumDefaultPersistImpl extends EnumDefaultPersist {
       byNameEnumDefaultPersist: byNameEnumDefaultPersist is _i2.ByNameEnum?
           ? byNameEnumDefaultPersist
           : this.byNameEnumDefaultPersist,
-      byIndexEnumDefaultPersist: byIndexEnumDefaultPersist is _i2.ByIndexEnum?
+      byIndexEnumDefaultPersist: byIndexEnumDefaultPersist is _i3.ByIndexEnum?
           ? byIndexEnumDefaultPersist
           : this.byIndexEnumDefaultPersist,
     );
@@ -163,7 +164,7 @@ class EnumDefaultPersistTable extends _i1.Table {
 
   late final _i1.ColumnEnum<_i2.ByNameEnum> byNameEnumDefaultPersist;
 
-  late final _i1.ColumnEnum<_i2.ByIndexEnum> byIndexEnumDefaultPersist;
+  late final _i1.ColumnEnum<_i3.ByIndexEnum> byIndexEnumDefaultPersist;
 
   @override
   List<_i1.Column> get columns => [
diff --git a/tests/serverpod_test_server/lib/src/generated/defaults/exception/default_exception.dart b/tests/serverpod_test_server/lib/src/generated/defaults/exception/default_exception.dart
index aefbae1309..73e34f5a91 100644
--- a/tests/serverpod_test_server/lib/src/generated/defaults/exception/default_exception.dart
+++ b/tests/serverpod_test_server/lib/src/generated/defaults/exception/default_exception.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../defaults/enum/enums/by_name_enum.dart' as _i2;
 import 'package:uuid/uuid.dart' as _i3;
 
 abstract class DefaultException
diff --git a/tests/serverpod_test_server/lib/src/generated/empty_model/relation_empy_model.dart b/tests/serverpod_test_server/lib/src/generated/empty_model/relation_empy_model.dart
index d732ec5f61..d480d8311d 100644
--- a/tests/serverpod_test_server/lib/src/generated/empty_model/relation_empy_model.dart
+++ b/tests/serverpod_test_server/lib/src/generated/empty_model/relation_empy_model.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../empty_model/empty_model_relation_item.dart' as _i2;
 
 abstract class RelationEmptyModel
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/city_with_long_table_name.dart b/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/city_with_long_table_name.dart
index 1478eed236..ee608066cf 100644
--- a/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/city_with_long_table_name.dart
+++ b/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/city_with_long_table_name.dart
@@ -10,7 +10,10 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/deep_includes/person_with_long_table_name.dart'
+    as _i2;
+import '../../long_identifiers/deep_includes/organization_with_long_table_name.dart'
+    as _i3;
 
 abstract class CityWithLongTableName
     implements _i1.TableRow, _i1.ProtocolSerialization {
@@ -25,7 +28,7 @@ abstract class CityWithLongTableName
     int? id,
     required String name,
     List<_i2.PersonWithLongTableName>? citizens,
-    List<_i2.OrganizationWithLongTableName>? organizations,
+    List<_i3.OrganizationWithLongTableName>? organizations,
   }) = _CityWithLongTableNameImpl;
 
   factory CityWithLongTableName.fromJson(
@@ -38,7 +41,7 @@ abstract class CityWithLongTableName
               _i2.PersonWithLongTableName.fromJson((e as Map<String, dynamic>)))
           .toList(),
       organizations: (jsonSerialization['organizations'] as List?)
-          ?.map((e) => _i2.OrganizationWithLongTableName.fromJson(
+          ?.map((e) => _i3.OrganizationWithLongTableName.fromJson(
               (e as Map<String, dynamic>)))
           .toList(),
     );
@@ -55,7 +58,7 @@ abstract class CityWithLongTableName
 
   List<_i2.PersonWithLongTableName>? citizens;
 
-  List<_i2.OrganizationWithLongTableName>? organizations;
+  List<_i3.OrganizationWithLongTableName>? organizations;
 
   @override
   _i1.Table get table => t;
@@ -64,7 +67,7 @@ abstract class CityWithLongTableName
     int? id,
     String? name,
     List<_i2.PersonWithLongTableName>? citizens,
-    List<_i2.OrganizationWithLongTableName>? organizations,
+    List<_i3.OrganizationWithLongTableName>? organizations,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -93,7 +96,7 @@ abstract class CityWithLongTableName
 
   static CityWithLongTableNameInclude include({
     _i2.PersonWithLongTableNameIncludeList? citizens,
-    _i2.OrganizationWithLongTableNameIncludeList? organizations,
+    _i3.OrganizationWithLongTableNameIncludeList? organizations,
   }) {
     return CityWithLongTableNameInclude._(
       citizens: citizens,
@@ -134,7 +137,7 @@ class _CityWithLongTableNameImpl extends CityWithLongTableName {
     int? id,
     required String name,
     List<_i2.PersonWithLongTableName>? citizens,
-    List<_i2.OrganizationWithLongTableName>? organizations,
+    List<_i3.OrganizationWithLongTableName>? organizations,
   }) : super._(
           id: id,
           name: name,
@@ -155,7 +158,7 @@ class _CityWithLongTableNameImpl extends CityWithLongTableName {
       citizens: citizens is List<_i2.PersonWithLongTableName>?
           ? citizens
           : this.citizens?.map((e0) => e0.copyWith()).toList(),
-      organizations: organizations is List<_i2.OrganizationWithLongTableName>?
+      organizations: organizations is List<_i3.OrganizationWithLongTableName>?
           ? organizations
           : this.organizations?.map((e0) => e0.copyWith()).toList(),
     );
@@ -177,9 +180,9 @@ class CityWithLongTableNameTable extends _i1.Table {
 
   _i1.ManyRelation<_i2.PersonWithLongTableNameTable>? _citizens;
 
-  _i2.OrganizationWithLongTableNameTable? ___organizations;
+  _i3.OrganizationWithLongTableNameTable? ___organizations;
 
-  _i1.ManyRelation<_i2.OrganizationWithLongTableNameTable>? _organizations;
+  _i1.ManyRelation<_i3.OrganizationWithLongTableNameTable>? _organizations;
 
   _i2.PersonWithLongTableNameTable get __citizens {
     if (___citizens != null) return ___citizens!;
@@ -195,15 +198,15 @@ class CityWithLongTableNameTable extends _i1.Table {
     return ___citizens!;
   }
 
-  _i2.OrganizationWithLongTableNameTable get __organizations {
+  _i3.OrganizationWithLongTableNameTable get __organizations {
     if (___organizations != null) return ___organizations!;
     ___organizations = _i1.createRelationTable(
       relationFieldName: '__organizations',
       field: CityWithLongTableName.t.id,
-      foreignField: _i2.OrganizationWithLongTableName.t.cityId,
+      foreignField: _i3.OrganizationWithLongTableName.t.cityId,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.OrganizationWithLongTableNameTable(
+          _i3.OrganizationWithLongTableNameTable(
               tableRelation: foreignTableRelation),
     );
     return ___organizations!;
@@ -228,20 +231,20 @@ class CityWithLongTableNameTable extends _i1.Table {
     return _citizens!;
   }
 
-  _i1.ManyRelation<_i2.OrganizationWithLongTableNameTable> get organizations {
+  _i1.ManyRelation<_i3.OrganizationWithLongTableNameTable> get organizations {
     if (_organizations != null) return _organizations!;
     var relationTable = _i1.createRelationTable(
       relationFieldName: 'organizations',
       field: CityWithLongTableName.t.id,
-      foreignField: _i2.OrganizationWithLongTableName.t.cityId,
+      foreignField: _i3.OrganizationWithLongTableName.t.cityId,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.OrganizationWithLongTableNameTable(
+          _i3.OrganizationWithLongTableNameTable(
               tableRelation: foreignTableRelation),
     );
-    _organizations = _i1.ManyRelation<_i2.OrganizationWithLongTableNameTable>(
+    _organizations = _i1.ManyRelation<_i3.OrganizationWithLongTableNameTable>(
       tableWithRelations: relationTable,
-      table: _i2.OrganizationWithLongTableNameTable(
+      table: _i3.OrganizationWithLongTableNameTable(
           tableRelation: relationTable.tableRelation!.lastRelation),
     );
     return _organizations!;
@@ -268,7 +271,7 @@ class CityWithLongTableNameTable extends _i1.Table {
 class CityWithLongTableNameInclude extends _i1.IncludeObject {
   CityWithLongTableNameInclude._({
     _i2.PersonWithLongTableNameIncludeList? citizens,
-    _i2.OrganizationWithLongTableNameIncludeList? organizations,
+    _i3.OrganizationWithLongTableNameIncludeList? organizations,
   }) {
     _citizens = citizens;
     _organizations = organizations;
@@ -276,7 +279,7 @@ class CityWithLongTableNameInclude extends _i1.IncludeObject {
 
   _i2.PersonWithLongTableNameIncludeList? _citizens;
 
-  _i2.OrganizationWithLongTableNameIncludeList? _organizations;
+  _i3.OrganizationWithLongTableNameIncludeList? _organizations;
 
   @override
   Map<String, _i1.Include?> get includes => {
@@ -507,7 +510,7 @@ class CityWithLongTableNameAttachRepository {
   Future<void> organizations(
     _i1.Session session,
     CityWithLongTableName cityWithLongTableName,
-    List<_i2.OrganizationWithLongTableName> organizationWithLongTableName, {
+    List<_i3.OrganizationWithLongTableName> organizationWithLongTableName, {
     _i1.Transaction? transaction,
   }) async {
     if (organizationWithLongTableName.any((e) => e.id == null)) {
@@ -520,9 +523,9 @@ class CityWithLongTableNameAttachRepository {
     var $organizationWithLongTableName = organizationWithLongTableName
         .map((e) => e.copyWith(cityId: cityWithLongTableName.id))
         .toList();
-    await session.db.update<_i2.OrganizationWithLongTableName>(
+    await session.db.update<_i3.OrganizationWithLongTableName>(
       $organizationWithLongTableName,
-      columns: [_i2.OrganizationWithLongTableName.t.cityId],
+      columns: [_i3.OrganizationWithLongTableName.t.cityId],
       transaction: transaction,
     );
   }
@@ -562,7 +565,7 @@ class CityWithLongTableNameAttachRowRepository {
   Future<void> organizations(
     _i1.Session session,
     CityWithLongTableName cityWithLongTableName,
-    _i2.OrganizationWithLongTableName organizationWithLongTableName, {
+    _i3.OrganizationWithLongTableName organizationWithLongTableName, {
     _i1.Transaction? transaction,
   }) async {
     if (organizationWithLongTableName.id == null) {
@@ -574,9 +577,9 @@ class CityWithLongTableNameAttachRowRepository {
 
     var $organizationWithLongTableName = organizationWithLongTableName.copyWith(
         cityId: cityWithLongTableName.id);
-    await session.db.updateRow<_i2.OrganizationWithLongTableName>(
+    await session.db.updateRow<_i3.OrganizationWithLongTableName>(
       $organizationWithLongTableName,
-      columns: [_i2.OrganizationWithLongTableName.t.cityId],
+      columns: [_i3.OrganizationWithLongTableName.t.cityId],
       transaction: transaction,
     );
   }
@@ -613,7 +616,7 @@ class CityWithLongTableNameDetachRepository {
 
   Future<void> organizations(
     _i1.Session session,
-    List<_i2.OrganizationWithLongTableName> organizationWithLongTableName, {
+    List<_i3.OrganizationWithLongTableName> organizationWithLongTableName, {
     _i1.Transaction? transaction,
   }) async {
     if (organizationWithLongTableName.any((e) => e.id == null)) {
@@ -623,9 +626,9 @@ class CityWithLongTableNameDetachRepository {
     var $organizationWithLongTableName = organizationWithLongTableName
         .map((e) => e.copyWith(cityId: null))
         .toList();
-    await session.db.update<_i2.OrganizationWithLongTableName>(
+    await session.db.update<_i3.OrganizationWithLongTableName>(
       $organizationWithLongTableName,
-      columns: [_i2.OrganizationWithLongTableName.t.cityId],
+      columns: [_i3.OrganizationWithLongTableName.t.cityId],
       transaction: transaction,
     );
   }
@@ -659,7 +662,7 @@ class CityWithLongTableNameDetachRowRepository {
 
   Future<void> organizations(
     _i1.Session session,
-    _i2.OrganizationWithLongTableName organizationWithLongTableName, {
+    _i3.OrganizationWithLongTableName organizationWithLongTableName, {
     _i1.Transaction? transaction,
   }) async {
     if (organizationWithLongTableName.id == null) {
@@ -668,9 +671,9 @@ class CityWithLongTableNameDetachRowRepository {
 
     var $organizationWithLongTableName =
         organizationWithLongTableName.copyWith(cityId: null);
-    await session.db.updateRow<_i2.OrganizationWithLongTableName>(
+    await session.db.updateRow<_i3.OrganizationWithLongTableName>(
       $organizationWithLongTableName,
-      columns: [_i2.OrganizationWithLongTableName.t.cityId],
+      columns: [_i3.OrganizationWithLongTableName.t.cityId],
       transaction: transaction,
     );
   }
diff --git a/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/organization_with_long_table_name.dart b/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/organization_with_long_table_name.dart
index 4bdbbd64f8..cbdb466f1a 100644
--- a/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/organization_with_long_table_name.dart
+++ b/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/organization_with_long_table_name.dart
@@ -10,7 +10,10 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/deep_includes/person_with_long_table_name.dart'
+    as _i2;
+import '../../long_identifiers/deep_includes/city_with_long_table_name.dart'
+    as _i3;
 
 abstract class OrganizationWithLongTableName
     implements _i1.TableRow, _i1.ProtocolSerialization {
@@ -27,7 +30,7 @@ abstract class OrganizationWithLongTableName
     required String name,
     List<_i2.PersonWithLongTableName>? people,
     int? cityId,
-    _i2.CityWithLongTableName? city,
+    _i3.CityWithLongTableName? city,
   }) = _OrganizationWithLongTableNameImpl;
 
   factory OrganizationWithLongTableName.fromJson(
@@ -42,7 +45,7 @@ abstract class OrganizationWithLongTableName
       cityId: jsonSerialization['cityId'] as int?,
       city: jsonSerialization['city'] == null
           ? null
-          : _i2.CityWithLongTableName.fromJson(
+          : _i3.CityWithLongTableName.fromJson(
               (jsonSerialization['city'] as Map<String, dynamic>)),
     );
   }
@@ -60,7 +63,7 @@ abstract class OrganizationWithLongTableName
 
   int? cityId;
 
-  _i2.CityWithLongTableName? city;
+  _i3.CityWithLongTableName? city;
 
   @override
   _i1.Table get table => t;
@@ -70,7 +73,7 @@ abstract class OrganizationWithLongTableName
     String? name,
     List<_i2.PersonWithLongTableName>? people,
     int? cityId,
-    _i2.CityWithLongTableName? city,
+    _i3.CityWithLongTableName? city,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -98,7 +101,7 @@ abstract class OrganizationWithLongTableName
 
   static OrganizationWithLongTableNameInclude include({
     _i2.PersonWithLongTableNameIncludeList? people,
-    _i2.CityWithLongTableNameInclude? city,
+    _i3.CityWithLongTableNameInclude? city,
   }) {
     return OrganizationWithLongTableNameInclude._(
       people: people,
@@ -140,7 +143,7 @@ class _OrganizationWithLongTableNameImpl extends OrganizationWithLongTableName {
     required String name,
     List<_i2.PersonWithLongTableName>? people,
     int? cityId,
-    _i2.CityWithLongTableName? city,
+    _i3.CityWithLongTableName? city,
   }) : super._(
           id: id,
           name: name,
@@ -164,7 +167,7 @@ class _OrganizationWithLongTableNameImpl extends OrganizationWithLongTableName {
           ? people
           : this.people?.map((e0) => e0.copyWith()).toList(),
       cityId: cityId is int? ? cityId : this.cityId,
-      city: city is _i2.CityWithLongTableName? ? city : this.city?.copyWith(),
+      city: city is _i3.CityWithLongTableName? ? city : this.city?.copyWith(),
     );
   }
 }
@@ -192,7 +195,7 @@ class OrganizationWithLongTableNameTable extends _i1.Table {
 
   late final _i1.ColumnInt cityId;
 
-  _i2.CityWithLongTableNameTable? _city;
+  _i3.CityWithLongTableNameTable? _city;
 
   _i2.PersonWithLongTableNameTable get __people {
     if (___people != null) return ___people!;
@@ -207,15 +210,15 @@ class OrganizationWithLongTableNameTable extends _i1.Table {
     return ___people!;
   }
 
-  _i2.CityWithLongTableNameTable get city {
+  _i3.CityWithLongTableNameTable get city {
     if (_city != null) return _city!;
     _city = _i1.createRelationTable(
       relationFieldName: 'city',
       field: OrganizationWithLongTableName.t.cityId,
-      foreignField: _i2.CityWithLongTableName.t.id,
+      foreignField: _i3.CityWithLongTableName.t.id,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.CityWithLongTableNameTable(tableRelation: foreignTableRelation),
+          _i3.CityWithLongTableNameTable(tableRelation: foreignTableRelation),
     );
     return _city!;
   }
@@ -260,7 +263,7 @@ class OrganizationWithLongTableNameTable extends _i1.Table {
 class OrganizationWithLongTableNameInclude extends _i1.IncludeObject {
   OrganizationWithLongTableNameInclude._({
     _i2.PersonWithLongTableNameIncludeList? people,
-    _i2.CityWithLongTableNameInclude? city,
+    _i3.CityWithLongTableNameInclude? city,
   }) {
     _people = people;
     _city = city;
@@ -268,7 +271,7 @@ class OrganizationWithLongTableNameInclude extends _i1.IncludeObject {
 
   _i2.PersonWithLongTableNameIncludeList? _people;
 
-  _i2.CityWithLongTableNameInclude? _city;
+  _i3.CityWithLongTableNameInclude? _city;
 
   @override
   Map<String, _i1.Include?> get includes => {
@@ -498,7 +501,7 @@ class OrganizationWithLongTableNameAttachRowRepository {
   Future<void> city(
     _i1.Session session,
     OrganizationWithLongTableName organizationWithLongTableName,
-    _i2.CityWithLongTableName city, {
+    _i3.CityWithLongTableName city, {
     _i1.Transaction? transaction,
   }) async {
     if (organizationWithLongTableName.id == null) {
diff --git a/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/person_with_long_table_name.dart b/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/person_with_long_table_name.dart
index cc959eb51e..d294b7dba4 100644
--- a/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/person_with_long_table_name.dart
+++ b/tests/serverpod_test_server/lib/src/generated/long_identifiers/deep_includes/person_with_long_table_name.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/deep_includes/organization_with_long_table_name.dart'
+    as _i2;
 
 abstract class PersonWithLongTableName
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/long_implicit_id_field_collection.dart b/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/long_implicit_id_field_collection.dart
index 928b2c98ff..54e55ab686 100644
--- a/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/long_implicit_id_field_collection.dart
+++ b/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/long_implicit_id_field_collection.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/models_with_relations/long_implicit_id_field.dart'
+    as _i2;
 
 abstract class LongImplicitIdFieldCollection
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/relation_to_mutiple_max_field_name.dart b/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/relation_to_mutiple_max_field_name.dart
index cf4a2496b4..70915aa330 100644
--- a/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/relation_to_mutiple_max_field_name.dart
+++ b/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/relation_to_mutiple_max_field_name.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/multiple_max_field_name.dart' as _i2;
 
 abstract class RelationToMultipleMaxFieldName
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/user_note_collection.dart b/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/user_note_collection.dart
index 26f721ce8f..344c1185ef 100644
--- a/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/user_note_collection.dart
+++ b/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/user_note_collection.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/models_with_relations/user_note.dart' as _i2;
 
 abstract class UserNoteCollection
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/user_note_collection_with_a_long_name.dart b/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/user_note_collection_with_a_long_name.dart
index b705817957..65b084661e 100644
--- a/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/user_note_collection_with_a_long_name.dart
+++ b/tests/serverpod_test_server/lib/src/generated/long_identifiers/models_with_relations/user_note_collection_with_a_long_name.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../long_identifiers/models_with_relations/user_note_with_a_long_name.dart'
+    as _i2;
 
 abstract class UserNoteCollectionWithALongName
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/city.dart b/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/city.dart
index 53e2c51be5..8964b07a47 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/city.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/city.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../models_with_list_relations/person.dart' as _i2;
+import '../models_with_list_relations/organization.dart' as _i3;
 
 abstract class City implements _i1.TableRow, _i1.ProtocolSerialization {
   City._({
@@ -24,7 +25,7 @@ abstract class City implements _i1.TableRow, _i1.ProtocolSerialization {
     int? id,
     required String name,
     List<_i2.Person>? citizens,
-    List<_i2.Organization>? organizations,
+    List<_i3.Organization>? organizations,
   }) = _CityImpl;
 
   factory City.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -35,7 +36,7 @@ abstract class City implements _i1.TableRow, _i1.ProtocolSerialization {
           ?.map((e) => _i2.Person.fromJson((e as Map<String, dynamic>)))
           .toList(),
       organizations: (jsonSerialization['organizations'] as List?)
-          ?.map((e) => _i2.Organization.fromJson((e as Map<String, dynamic>)))
+          ?.map((e) => _i3.Organization.fromJson((e as Map<String, dynamic>)))
           .toList(),
     );
   }
@@ -51,7 +52,7 @@ abstract class City implements _i1.TableRow, _i1.ProtocolSerialization {
 
   List<_i2.Person>? citizens;
 
-  List<_i2.Organization>? organizations;
+  List<_i3.Organization>? organizations;
 
   @override
   _i1.Table get table => t;
@@ -60,7 +61,7 @@ abstract class City implements _i1.TableRow, _i1.ProtocolSerialization {
     int? id,
     String? name,
     List<_i2.Person>? citizens,
-    List<_i2.Organization>? organizations,
+    List<_i3.Organization>? organizations,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -89,7 +90,7 @@ abstract class City implements _i1.TableRow, _i1.ProtocolSerialization {
 
   static CityInclude include({
     _i2.PersonIncludeList? citizens,
-    _i2.OrganizationIncludeList? organizations,
+    _i3.OrganizationIncludeList? organizations,
   }) {
     return CityInclude._(
       citizens: citizens,
@@ -130,7 +131,7 @@ class _CityImpl extends City {
     int? id,
     required String name,
     List<_i2.Person>? citizens,
-    List<_i2.Organization>? organizations,
+    List<_i3.Organization>? organizations,
   }) : super._(
           id: id,
           name: name,
@@ -151,7 +152,7 @@ class _CityImpl extends City {
       citizens: citizens is List<_i2.Person>?
           ? citizens
           : this.citizens?.map((e0) => e0.copyWith()).toList(),
-      organizations: organizations is List<_i2.Organization>?
+      organizations: organizations is List<_i3.Organization>?
           ? organizations
           : this.organizations?.map((e0) => e0.copyWith()).toList(),
     );
@@ -172,9 +173,9 @@ class CityTable extends _i1.Table {
 
   _i1.ManyRelation<_i2.PersonTable>? _citizens;
 
-  _i2.OrganizationTable? ___organizations;
+  _i3.OrganizationTable? ___organizations;
 
-  _i1.ManyRelation<_i2.OrganizationTable>? _organizations;
+  _i1.ManyRelation<_i3.OrganizationTable>? _organizations;
 
   _i2.PersonTable get __citizens {
     if (___citizens != null) return ___citizens!;
@@ -189,15 +190,15 @@ class CityTable extends _i1.Table {
     return ___citizens!;
   }
 
-  _i2.OrganizationTable get __organizations {
+  _i3.OrganizationTable get __organizations {
     if (___organizations != null) return ___organizations!;
     ___organizations = _i1.createRelationTable(
       relationFieldName: '__organizations',
       field: City.t.id,
-      foreignField: _i2.Organization.t.cityId,
+      foreignField: _i3.Organization.t.cityId,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.OrganizationTable(tableRelation: foreignTableRelation),
+          _i3.OrganizationTable(tableRelation: foreignTableRelation),
     );
     return ___organizations!;
   }
@@ -220,19 +221,19 @@ class CityTable extends _i1.Table {
     return _citizens!;
   }
 
-  _i1.ManyRelation<_i2.OrganizationTable> get organizations {
+  _i1.ManyRelation<_i3.OrganizationTable> get organizations {
     if (_organizations != null) return _organizations!;
     var relationTable = _i1.createRelationTable(
       relationFieldName: 'organizations',
       field: City.t.id,
-      foreignField: _i2.Organization.t.cityId,
+      foreignField: _i3.Organization.t.cityId,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.OrganizationTable(tableRelation: foreignTableRelation),
+          _i3.OrganizationTable(tableRelation: foreignTableRelation),
     );
-    _organizations = _i1.ManyRelation<_i2.OrganizationTable>(
+    _organizations = _i1.ManyRelation<_i3.OrganizationTable>(
       tableWithRelations: relationTable,
-      table: _i2.OrganizationTable(
+      table: _i3.OrganizationTable(
           tableRelation: relationTable.tableRelation!.lastRelation),
     );
     return _organizations!;
@@ -259,7 +260,7 @@ class CityTable extends _i1.Table {
 class CityInclude extends _i1.IncludeObject {
   CityInclude._({
     _i2.PersonIncludeList? citizens,
-    _i2.OrganizationIncludeList? organizations,
+    _i3.OrganizationIncludeList? organizations,
   }) {
     _citizens = citizens;
     _organizations = organizations;
@@ -267,7 +268,7 @@ class CityInclude extends _i1.IncludeObject {
 
   _i2.PersonIncludeList? _citizens;
 
-  _i2.OrganizationIncludeList? _organizations;
+  _i3.OrganizationIncludeList? _organizations;
 
   @override
   Map<String, _i1.Include?> get includes => {
@@ -494,7 +495,7 @@ class CityAttachRepository {
   Future<void> organizations(
     _i1.Session session,
     City city,
-    List<_i2.Organization> organization, {
+    List<_i3.Organization> organization, {
     _i1.Transaction? transaction,
   }) async {
     if (organization.any((e) => e.id == null)) {
@@ -506,9 +507,9 @@ class CityAttachRepository {
 
     var $organization =
         organization.map((e) => e.copyWith(cityId: city.id)).toList();
-    await session.db.update<_i2.Organization>(
+    await session.db.update<_i3.Organization>(
       $organization,
-      columns: [_i2.Organization.t.cityId],
+      columns: [_i3.Organization.t.cityId],
       transaction: transaction,
     );
   }
@@ -544,7 +545,7 @@ class CityAttachRowRepository {
   Future<void> organizations(
     _i1.Session session,
     City city,
-    _i2.Organization organization, {
+    _i3.Organization organization, {
     _i1.Transaction? transaction,
   }) async {
     if (organization.id == null) {
@@ -555,9 +556,9 @@ class CityAttachRowRepository {
     }
 
     var $organization = organization.copyWith(cityId: city.id);
-    await session.db.updateRow<_i2.Organization>(
+    await session.db.updateRow<_i3.Organization>(
       $organization,
-      columns: [_i2.Organization.t.cityId],
+      columns: [_i3.Organization.t.cityId],
       transaction: transaction,
     );
   }
@@ -590,7 +591,7 @@ class CityDetachRepository {
 
   Future<void> organizations(
     _i1.Session session,
-    List<_i2.Organization> organization, {
+    List<_i3.Organization> organization, {
     _i1.Transaction? transaction,
   }) async {
     if (organization.any((e) => e.id == null)) {
@@ -599,9 +600,9 @@ class CityDetachRepository {
 
     var $organization =
         organization.map((e) => e.copyWith(cityId: null)).toList();
-    await session.db.update<_i2.Organization>(
+    await session.db.update<_i3.Organization>(
       $organization,
-      columns: [_i2.Organization.t.cityId],
+      columns: [_i3.Organization.t.cityId],
       transaction: transaction,
     );
   }
@@ -632,7 +633,7 @@ class CityDetachRowRepository {
 
   Future<void> organizations(
     _i1.Session session,
-    _i2.Organization organization, {
+    _i3.Organization organization, {
     _i1.Transaction? transaction,
   }) async {
     if (organization.id == null) {
@@ -640,9 +641,9 @@ class CityDetachRowRepository {
     }
 
     var $organization = organization.copyWith(cityId: null);
-    await session.db.updateRow<_i2.Organization>(
+    await session.db.updateRow<_i3.Organization>(
       $organization,
-      columns: [_i2.Organization.t.cityId],
+      columns: [_i3.Organization.t.cityId],
       transaction: transaction,
     );
   }
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/organization.dart b/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/organization.dart
index 210c2289df..129ae065ae 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/organization.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/organization.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../models_with_list_relations/person.dart' as _i2;
+import '../models_with_list_relations/city.dart' as _i3;
 
 abstract class Organization implements _i1.TableRow, _i1.ProtocolSerialization {
   Organization._({
@@ -26,7 +27,7 @@ abstract class Organization implements _i1.TableRow, _i1.ProtocolSerialization {
     required String name,
     List<_i2.Person>? people,
     int? cityId,
-    _i2.City? city,
+    _i3.City? city,
   }) = _OrganizationImpl;
 
   factory Organization.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -39,7 +40,7 @@ abstract class Organization implements _i1.TableRow, _i1.ProtocolSerialization {
       cityId: jsonSerialization['cityId'] as int?,
       city: jsonSerialization['city'] == null
           ? null
-          : _i2.City.fromJson(
+          : _i3.City.fromJson(
               (jsonSerialization['city'] as Map<String, dynamic>)),
     );
   }
@@ -57,7 +58,7 @@ abstract class Organization implements _i1.TableRow, _i1.ProtocolSerialization {
 
   int? cityId;
 
-  _i2.City? city;
+  _i3.City? city;
 
   @override
   _i1.Table get table => t;
@@ -67,7 +68,7 @@ abstract class Organization implements _i1.TableRow, _i1.ProtocolSerialization {
     String? name,
     List<_i2.Person>? people,
     int? cityId,
-    _i2.City? city,
+    _i3.City? city,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -95,7 +96,7 @@ abstract class Organization implements _i1.TableRow, _i1.ProtocolSerialization {
 
   static OrganizationInclude include({
     _i2.PersonIncludeList? people,
-    _i2.CityInclude? city,
+    _i3.CityInclude? city,
   }) {
     return OrganizationInclude._(
       people: people,
@@ -137,7 +138,7 @@ class _OrganizationImpl extends Organization {
     required String name,
     List<_i2.Person>? people,
     int? cityId,
-    _i2.City? city,
+    _i3.City? city,
   }) : super._(
           id: id,
           name: name,
@@ -161,7 +162,7 @@ class _OrganizationImpl extends Organization {
           ? people
           : this.people?.map((e0) => e0.copyWith()).toList(),
       cityId: cityId is int? ? cityId : this.cityId,
-      city: city is _i2.City? ? city : this.city?.copyWith(),
+      city: city is _i3.City? ? city : this.city?.copyWith(),
     );
   }
 }
@@ -186,7 +187,7 @@ class OrganizationTable extends _i1.Table {
 
   late final _i1.ColumnInt cityId;
 
-  _i2.CityTable? _city;
+  _i3.CityTable? _city;
 
   _i2.PersonTable get __people {
     if (___people != null) return ___people!;
@@ -201,15 +202,15 @@ class OrganizationTable extends _i1.Table {
     return ___people!;
   }
 
-  _i2.CityTable get city {
+  _i3.CityTable get city {
     if (_city != null) return _city!;
     _city = _i1.createRelationTable(
       relationFieldName: 'city',
       field: Organization.t.cityId,
-      foreignField: _i2.City.t.id,
+      foreignField: _i3.City.t.id,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.CityTable(tableRelation: foreignTableRelation),
+          _i3.CityTable(tableRelation: foreignTableRelation),
     );
     return _city!;
   }
@@ -254,7 +255,7 @@ class OrganizationTable extends _i1.Table {
 class OrganizationInclude extends _i1.IncludeObject {
   OrganizationInclude._({
     _i2.PersonIncludeList? people,
-    _i2.CityInclude? city,
+    _i3.CityInclude? city,
   }) {
     _people = people;
     _city = city;
@@ -262,7 +263,7 @@ class OrganizationInclude extends _i1.IncludeObject {
 
   _i2.PersonIncludeList? _people;
 
-  _i2.CityInclude? _city;
+  _i3.CityInclude? _city;
 
   @override
   Map<String, _i1.Include?> get includes => {
@@ -489,7 +490,7 @@ class OrganizationAttachRowRepository {
   Future<void> city(
     _i1.Session session,
     Organization organization,
-    _i2.City city, {
+    _i3.City city, {
     _i1.Transaction? transaction,
   }) async {
     if (organization.id == null) {
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/person.dart b/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/person.dart
index 7ed2e4c3ac..9e23f91122 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/person.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_list_relations/person.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../models_with_list_relations/organization.dart' as _i2;
 
 abstract class Person implements _i1.TableRow, _i1.ProtocolSerialization {
   Person._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/course.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/course.dart
index 3ddd5d6fef..42daf0d120 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/course.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/course.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/many_to_many/enrollment.dart' as _i2;
 
 abstract class Course implements _i1.TableRow, _i1.ProtocolSerialization {
   Course._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/enrollment.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/enrollment.dart
index ea6b3d809f..dbc2ca21a7 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/enrollment.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/enrollment.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/many_to_many/student.dart' as _i2;
+import '../../models_with_relations/many_to_many/course.dart' as _i3;
 
 abstract class Enrollment implements _i1.TableRow, _i1.ProtocolSerialization {
   Enrollment._({
@@ -26,7 +27,7 @@ abstract class Enrollment implements _i1.TableRow, _i1.ProtocolSerialization {
     required int studentId,
     _i2.Student? student,
     required int courseId,
-    _i2.Course? course,
+    _i3.Course? course,
   }) = _EnrollmentImpl;
 
   factory Enrollment.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -40,7 +41,7 @@ abstract class Enrollment implements _i1.TableRow, _i1.ProtocolSerialization {
       courseId: jsonSerialization['courseId'] as int,
       course: jsonSerialization['course'] == null
           ? null
-          : _i2.Course.fromJson(
+          : _i3.Course.fromJson(
               (jsonSerialization['course'] as Map<String, dynamic>)),
     );
   }
@@ -58,7 +59,7 @@ abstract class Enrollment implements _i1.TableRow, _i1.ProtocolSerialization {
 
   int courseId;
 
-  _i2.Course? course;
+  _i3.Course? course;
 
   @override
   _i1.Table get table => t;
@@ -68,7 +69,7 @@ abstract class Enrollment implements _i1.TableRow, _i1.ProtocolSerialization {
     int? studentId,
     _i2.Student? student,
     int? courseId,
-    _i2.Course? course,
+    _i3.Course? course,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -94,7 +95,7 @@ abstract class Enrollment implements _i1.TableRow, _i1.ProtocolSerialization {
 
   static EnrollmentInclude include({
     _i2.StudentInclude? student,
-    _i2.CourseInclude? course,
+    _i3.CourseInclude? course,
   }) {
     return EnrollmentInclude._(
       student: student,
@@ -136,7 +137,7 @@ class _EnrollmentImpl extends Enrollment {
     required int studentId,
     _i2.Student? student,
     required int courseId,
-    _i2.Course? course,
+    _i3.Course? course,
   }) : super._(
           id: id,
           studentId: studentId,
@@ -158,7 +159,7 @@ class _EnrollmentImpl extends Enrollment {
       studentId: studentId ?? this.studentId,
       student: student is _i2.Student? ? student : this.student?.copyWith(),
       courseId: courseId ?? this.courseId,
-      course: course is _i2.Course? ? course : this.course?.copyWith(),
+      course: course is _i3.Course? ? course : this.course?.copyWith(),
     );
   }
 }
@@ -181,7 +182,7 @@ class EnrollmentTable extends _i1.Table {
 
   late final _i1.ColumnInt courseId;
 
-  _i2.CourseTable? _course;
+  _i3.CourseTable? _course;
 
   _i2.StudentTable get student {
     if (_student != null) return _student!;
@@ -196,15 +197,15 @@ class EnrollmentTable extends _i1.Table {
     return _student!;
   }
 
-  _i2.CourseTable get course {
+  _i3.CourseTable get course {
     if (_course != null) return _course!;
     _course = _i1.createRelationTable(
       relationFieldName: 'course',
       field: Enrollment.t.courseId,
-      foreignField: _i2.Course.t.id,
+      foreignField: _i3.Course.t.id,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.CourseTable(tableRelation: foreignTableRelation),
+          _i3.CourseTable(tableRelation: foreignTableRelation),
     );
     return _course!;
   }
@@ -231,7 +232,7 @@ class EnrollmentTable extends _i1.Table {
 class EnrollmentInclude extends _i1.IncludeObject {
   EnrollmentInclude._({
     _i2.StudentInclude? student,
-    _i2.CourseInclude? course,
+    _i3.CourseInclude? course,
   }) {
     _student = student;
     _course = course;
@@ -239,7 +240,7 @@ class EnrollmentInclude extends _i1.IncludeObject {
 
   _i2.StudentInclude? _student;
 
-  _i2.CourseInclude? _course;
+  _i3.CourseInclude? _course;
 
   @override
   Map<String, _i1.Include?> get includes => {
@@ -455,7 +456,7 @@ class EnrollmentAttachRowRepository {
   Future<void> course(
     _i1.Session session,
     Enrollment enrollment,
-    _i2.Course course, {
+    _i3.Course course, {
     _i1.Transaction? transaction,
   }) async {
     if (enrollment.id == null) {
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/student.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/student.dart
index e4324b45c6..eb3c847ba8 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/student.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/many_to_many/student.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/many_to_many/enrollment.dart' as _i2;
 
 abstract class Student implements _i1.TableRow, _i1.ProtocolSerialization {
   Student._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/arena.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/arena.dart
index a49c65612d..43ffc197c3 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/arena.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/arena.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/nested_one_to_many/team.dart' as _i2;
 
 abstract class Arena implements _i1.TableRow, _i1.ProtocolSerialization {
   Arena._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/player.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/player.dart
index 8a4eb6baaf..f9a559ae76 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/player.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/player.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/nested_one_to_many/team.dart' as _i2;
 
 abstract class Player implements _i1.TableRow, _i1.ProtocolSerialization {
   Player._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/team.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/team.dart
index 1b51d3820f..e1eaa8a710 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/team.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/nested_one_to_many/team.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/nested_one_to_many/arena.dart' as _i2;
+import '../../models_with_relations/nested_one_to_many/player.dart' as _i3;
 
 abstract class Team implements _i1.TableRow, _i1.ProtocolSerialization {
   Team._({
@@ -26,7 +27,7 @@ abstract class Team implements _i1.TableRow, _i1.ProtocolSerialization {
     required String name,
     int? arenaId,
     _i2.Arena? arena,
-    List<_i2.Player>? players,
+    List<_i3.Player>? players,
   }) = _TeamImpl;
 
   factory Team.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -39,7 +40,7 @@ abstract class Team implements _i1.TableRow, _i1.ProtocolSerialization {
           : _i2.Arena.fromJson(
               (jsonSerialization['arena'] as Map<String, dynamic>)),
       players: (jsonSerialization['players'] as List?)
-          ?.map((e) => _i2.Player.fromJson((e as Map<String, dynamic>)))
+          ?.map((e) => _i3.Player.fromJson((e as Map<String, dynamic>)))
           .toList(),
     );
   }
@@ -57,7 +58,7 @@ abstract class Team implements _i1.TableRow, _i1.ProtocolSerialization {
 
   _i2.Arena? arena;
 
-  List<_i2.Player>? players;
+  List<_i3.Player>? players;
 
   @override
   _i1.Table get table => t;
@@ -67,7 +68,7 @@ abstract class Team implements _i1.TableRow, _i1.ProtocolSerialization {
     String? name,
     int? arenaId,
     _i2.Arena? arena,
-    List<_i2.Player>? players,
+    List<_i3.Player>? players,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -95,7 +96,7 @@ abstract class Team implements _i1.TableRow, _i1.ProtocolSerialization {
 
   static TeamInclude include({
     _i2.ArenaInclude? arena,
-    _i2.PlayerIncludeList? players,
+    _i3.PlayerIncludeList? players,
   }) {
     return TeamInclude._(
       arena: arena,
@@ -137,7 +138,7 @@ class _TeamImpl extends Team {
     required String name,
     int? arenaId,
     _i2.Arena? arena,
-    List<_i2.Player>? players,
+    List<_i3.Player>? players,
   }) : super._(
           id: id,
           name: name,
@@ -159,7 +160,7 @@ class _TeamImpl extends Team {
       name: name ?? this.name,
       arenaId: arenaId is int? ? arenaId : this.arenaId,
       arena: arena is _i2.Arena? ? arena : this.arena?.copyWith(),
-      players: players is List<_i2.Player>?
+      players: players is List<_i3.Player>?
           ? players
           : this.players?.map((e0) => e0.copyWith()).toList(),
     );
@@ -184,9 +185,9 @@ class TeamTable extends _i1.Table {
 
   _i2.ArenaTable? _arena;
 
-  _i2.PlayerTable? ___players;
+  _i3.PlayerTable? ___players;
 
-  _i1.ManyRelation<_i2.PlayerTable>? _players;
+  _i1.ManyRelation<_i3.PlayerTable>? _players;
 
   _i2.ArenaTable get arena {
     if (_arena != null) return _arena!;
@@ -201,32 +202,32 @@ class TeamTable extends _i1.Table {
     return _arena!;
   }
 
-  _i2.PlayerTable get __players {
+  _i3.PlayerTable get __players {
     if (___players != null) return ___players!;
     ___players = _i1.createRelationTable(
       relationFieldName: '__players',
       field: Team.t.id,
-      foreignField: _i2.Player.t.teamId,
+      foreignField: _i3.Player.t.teamId,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.PlayerTable(tableRelation: foreignTableRelation),
+          _i3.PlayerTable(tableRelation: foreignTableRelation),
     );
     return ___players!;
   }
 
-  _i1.ManyRelation<_i2.PlayerTable> get players {
+  _i1.ManyRelation<_i3.PlayerTable> get players {
     if (_players != null) return _players!;
     var relationTable = _i1.createRelationTable(
       relationFieldName: 'players',
       field: Team.t.id,
-      foreignField: _i2.Player.t.teamId,
+      foreignField: _i3.Player.t.teamId,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.PlayerTable(tableRelation: foreignTableRelation),
+          _i3.PlayerTable(tableRelation: foreignTableRelation),
     );
-    _players = _i1.ManyRelation<_i2.PlayerTable>(
+    _players = _i1.ManyRelation<_i3.PlayerTable>(
       tableWithRelations: relationTable,
-      table: _i2.PlayerTable(
+      table: _i3.PlayerTable(
           tableRelation: relationTable.tableRelation!.lastRelation),
     );
     return _players!;
@@ -254,7 +255,7 @@ class TeamTable extends _i1.Table {
 class TeamInclude extends _i1.IncludeObject {
   TeamInclude._({
     _i2.ArenaInclude? arena,
-    _i2.PlayerIncludeList? players,
+    _i3.PlayerIncludeList? players,
   }) {
     _arena = arena;
     _players = players;
@@ -262,7 +263,7 @@ class TeamInclude extends _i1.IncludeObject {
 
   _i2.ArenaInclude? _arena;
 
-  _i2.PlayerIncludeList? _players;
+  _i3.PlayerIncludeList? _players;
 
   @override
   Map<String, _i1.Include?> get includes => {
@@ -463,7 +464,7 @@ class TeamAttachRepository {
   Future<void> players(
     _i1.Session session,
     Team team,
-    List<_i2.Player> player, {
+    List<_i3.Player> player, {
     _i1.Transaction? transaction,
   }) async {
     if (player.any((e) => e.id == null)) {
@@ -474,9 +475,9 @@ class TeamAttachRepository {
     }
 
     var $player = player.map((e) => e.copyWith(teamId: team.id)).toList();
-    await session.db.update<_i2.Player>(
+    await session.db.update<_i3.Player>(
       $player,
-      columns: [_i2.Player.t.teamId],
+      columns: [_i3.Player.t.teamId],
       transaction: transaction,
     );
   }
@@ -509,7 +510,7 @@ class TeamAttachRowRepository {
   Future<void> players(
     _i1.Session session,
     Team team,
-    _i2.Player player, {
+    _i3.Player player, {
     _i1.Transaction? transaction,
   }) async {
     if (player.id == null) {
@@ -520,9 +521,9 @@ class TeamAttachRowRepository {
     }
 
     var $player = player.copyWith(teamId: team.id);
-    await session.db.updateRow<_i2.Player>(
+    await session.db.updateRow<_i3.Player>(
       $player,
-      columns: [_i2.Player.t.teamId],
+      columns: [_i3.Player.t.teamId],
       transaction: transaction,
     );
   }
@@ -533,7 +534,7 @@ class TeamDetachRepository {
 
   Future<void> players(
     _i1.Session session,
-    List<_i2.Player> player, {
+    List<_i3.Player> player, {
     _i1.Transaction? transaction,
   }) async {
     if (player.any((e) => e.id == null)) {
@@ -541,9 +542,9 @@ class TeamDetachRepository {
     }
 
     var $player = player.map((e) => e.copyWith(teamId: null)).toList();
-    await session.db.update<_i2.Player>(
+    await session.db.update<_i3.Player>(
       $player,
-      columns: [_i2.Player.t.teamId],
+      columns: [_i3.Player.t.teamId],
       transaction: transaction,
     );
   }
@@ -571,7 +572,7 @@ class TeamDetachRowRepository {
 
   Future<void> players(
     _i1.Session session,
-    _i2.Player player, {
+    _i3.Player player, {
     _i1.Transaction? transaction,
   }) async {
     if (player.id == null) {
@@ -579,9 +580,9 @@ class TeamDetachRowRepository {
     }
 
     var $player = player.copyWith(teamId: null);
-    await session.db.updateRow<_i2.Player>(
+    await session.db.updateRow<_i3.Player>(
       $player,
-      columns: [_i2.Player.t.teamId],
+      columns: [_i3.Player.t.teamId],
       transaction: transaction,
     );
   }
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/comment.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/comment.dart
index 30c70153ac..c4a27dfda0 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/comment.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/comment.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_many/order.dart' as _i2;
 
 abstract class Comment implements _i1.TableRow, _i1.ProtocolSerialization {
   Comment._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/customer.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/customer.dart
index 0d2608e25f..097fb70971 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/customer.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/customer.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_many/order.dart' as _i2;
 
 abstract class Customer implements _i1.TableRow, _i1.ProtocolSerialization {
   Customer._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/order.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/order.dart
index d251038ffb..c9fa41e97e 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/order.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_many/order.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_many/customer.dart' as _i2;
+import '../../models_with_relations/one_to_many/comment.dart' as _i3;
 
 abstract class Order implements _i1.TableRow, _i1.ProtocolSerialization {
   Order._({
@@ -26,7 +27,7 @@ abstract class Order implements _i1.TableRow, _i1.ProtocolSerialization {
     required String description,
     required int customerId,
     _i2.Customer? customer,
-    List<_i2.Comment>? comments,
+    List<_i3.Comment>? comments,
   }) = _OrderImpl;
 
   factory Order.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -39,7 +40,7 @@ abstract class Order implements _i1.TableRow, _i1.ProtocolSerialization {
           : _i2.Customer.fromJson(
               (jsonSerialization['customer'] as Map<String, dynamic>)),
       comments: (jsonSerialization['comments'] as List?)
-          ?.map((e) => _i2.Comment.fromJson((e as Map<String, dynamic>)))
+          ?.map((e) => _i3.Comment.fromJson((e as Map<String, dynamic>)))
           .toList(),
     );
   }
@@ -57,7 +58,7 @@ abstract class Order implements _i1.TableRow, _i1.ProtocolSerialization {
 
   _i2.Customer? customer;
 
-  List<_i2.Comment>? comments;
+  List<_i3.Comment>? comments;
 
   @override
   _i1.Table get table => t;
@@ -67,7 +68,7 @@ abstract class Order implements _i1.TableRow, _i1.ProtocolSerialization {
     String? description,
     int? customerId,
     _i2.Customer? customer,
-    List<_i2.Comment>? comments,
+    List<_i3.Comment>? comments,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -95,7 +96,7 @@ abstract class Order implements _i1.TableRow, _i1.ProtocolSerialization {
 
   static OrderInclude include({
     _i2.CustomerInclude? customer,
-    _i2.CommentIncludeList? comments,
+    _i3.CommentIncludeList? comments,
   }) {
     return OrderInclude._(
       customer: customer,
@@ -137,7 +138,7 @@ class _OrderImpl extends Order {
     required String description,
     required int customerId,
     _i2.Customer? customer,
-    List<_i2.Comment>? comments,
+    List<_i3.Comment>? comments,
   }) : super._(
           id: id,
           description: description,
@@ -160,7 +161,7 @@ class _OrderImpl extends Order {
       customerId: customerId ?? this.customerId,
       customer:
           customer is _i2.Customer? ? customer : this.customer?.copyWith(),
-      comments: comments is List<_i2.Comment>?
+      comments: comments is List<_i3.Comment>?
           ? comments
           : this.comments?.map((e0) => e0.copyWith()).toList(),
     );
@@ -185,9 +186,9 @@ class OrderTable extends _i1.Table {
 
   _i2.CustomerTable? _customer;
 
-  _i2.CommentTable? ___comments;
+  _i3.CommentTable? ___comments;
 
-  _i1.ManyRelation<_i2.CommentTable>? _comments;
+  _i1.ManyRelation<_i3.CommentTable>? _comments;
 
   _i2.CustomerTable get customer {
     if (_customer != null) return _customer!;
@@ -202,32 +203,32 @@ class OrderTable extends _i1.Table {
     return _customer!;
   }
 
-  _i2.CommentTable get __comments {
+  _i3.CommentTable get __comments {
     if (___comments != null) return ___comments!;
     ___comments = _i1.createRelationTable(
       relationFieldName: '__comments',
       field: Order.t.id,
-      foreignField: _i2.Comment.t.orderId,
+      foreignField: _i3.Comment.t.orderId,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.CommentTable(tableRelation: foreignTableRelation),
+          _i3.CommentTable(tableRelation: foreignTableRelation),
     );
     return ___comments!;
   }
 
-  _i1.ManyRelation<_i2.CommentTable> get comments {
+  _i1.ManyRelation<_i3.CommentTable> get comments {
     if (_comments != null) return _comments!;
     var relationTable = _i1.createRelationTable(
       relationFieldName: 'comments',
       field: Order.t.id,
-      foreignField: _i2.Comment.t.orderId,
+      foreignField: _i3.Comment.t.orderId,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.CommentTable(tableRelation: foreignTableRelation),
+          _i3.CommentTable(tableRelation: foreignTableRelation),
     );
-    _comments = _i1.ManyRelation<_i2.CommentTable>(
+    _comments = _i1.ManyRelation<_i3.CommentTable>(
       tableWithRelations: relationTable,
-      table: _i2.CommentTable(
+      table: _i3.CommentTable(
           tableRelation: relationTable.tableRelation!.lastRelation),
     );
     return _comments!;
@@ -255,7 +256,7 @@ class OrderTable extends _i1.Table {
 class OrderInclude extends _i1.IncludeObject {
   OrderInclude._({
     _i2.CustomerInclude? customer,
-    _i2.CommentIncludeList? comments,
+    _i3.CommentIncludeList? comments,
   }) {
     _customer = customer;
     _comments = comments;
@@ -263,7 +264,7 @@ class OrderInclude extends _i1.IncludeObject {
 
   _i2.CustomerInclude? _customer;
 
-  _i2.CommentIncludeList? _comments;
+  _i3.CommentIncludeList? _comments;
 
   @override
   Map<String, _i1.Include?> get includes => {
@@ -460,7 +461,7 @@ class OrderAttachRepository {
   Future<void> comments(
     _i1.Session session,
     Order order,
-    List<_i2.Comment> comment, {
+    List<_i3.Comment> comment, {
     _i1.Transaction? transaction,
   }) async {
     if (comment.any((e) => e.id == null)) {
@@ -471,9 +472,9 @@ class OrderAttachRepository {
     }
 
     var $comment = comment.map((e) => e.copyWith(orderId: order.id)).toList();
-    await session.db.update<_i2.Comment>(
+    await session.db.update<_i3.Comment>(
       $comment,
-      columns: [_i2.Comment.t.orderId],
+      columns: [_i3.Comment.t.orderId],
       transaction: transaction,
     );
   }
@@ -506,7 +507,7 @@ class OrderAttachRowRepository {
   Future<void> comments(
     _i1.Session session,
     Order order,
-    _i2.Comment comment, {
+    _i3.Comment comment, {
     _i1.Transaction? transaction,
   }) async {
     if (comment.id == null) {
@@ -517,9 +518,9 @@ class OrderAttachRowRepository {
     }
 
     var $comment = comment.copyWith(orderId: order.id);
-    await session.db.updateRow<_i2.Comment>(
+    await session.db.updateRow<_i3.Comment>(
       $comment,
-      columns: [_i2.Comment.t.orderId],
+      columns: [_i3.Comment.t.orderId],
       transaction: transaction,
     );
   }
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/address.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/address.dart
index 296f11d25d..a2012a0926 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/address.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/address.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_one/citizen.dart' as _i2;
 
 abstract class Address implements _i1.TableRow, _i1.ProtocolSerialization {
   Address._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/citizen.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/citizen.dart
index b26122a6e8..a2e122ba87 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/citizen.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/citizen.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_one/address.dart' as _i2;
+import '../../models_with_relations/one_to_one/company.dart' as _i3;
 
 abstract class Citizen implements _i1.TableRow, _i1.ProtocolSerialization {
   Citizen._({
@@ -28,9 +29,9 @@ abstract class Citizen implements _i1.TableRow, _i1.ProtocolSerialization {
     required String name,
     _i2.Address? address,
     required int companyId,
-    _i2.Company? company,
+    _i3.Company? company,
     int? oldCompanyId,
-    _i2.Company? oldCompany,
+    _i3.Company? oldCompany,
   }) = _CitizenImpl;
 
   factory Citizen.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -44,12 +45,12 @@ abstract class Citizen implements _i1.TableRow, _i1.ProtocolSerialization {
       companyId: jsonSerialization['companyId'] as int,
       company: jsonSerialization['company'] == null
           ? null
-          : _i2.Company.fromJson(
+          : _i3.Company.fromJson(
               (jsonSerialization['company'] as Map<String, dynamic>)),
       oldCompanyId: jsonSerialization['oldCompanyId'] as int?,
       oldCompany: jsonSerialization['oldCompany'] == null
           ? null
-          : _i2.Company.fromJson(
+          : _i3.Company.fromJson(
               (jsonSerialization['oldCompany'] as Map<String, dynamic>)),
     );
   }
@@ -67,11 +68,11 @@ abstract class Citizen implements _i1.TableRow, _i1.ProtocolSerialization {
 
   int companyId;
 
-  _i2.Company? company;
+  _i3.Company? company;
 
   int? oldCompanyId;
 
-  _i2.Company? oldCompany;
+  _i3.Company? oldCompany;
 
   @override
   _i1.Table get table => t;
@@ -81,9 +82,9 @@ abstract class Citizen implements _i1.TableRow, _i1.ProtocolSerialization {
     String? name,
     _i2.Address? address,
     int? companyId,
-    _i2.Company? company,
+    _i3.Company? company,
     int? oldCompanyId,
-    _i2.Company? oldCompany,
+    _i3.Company? oldCompany,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -113,8 +114,8 @@ abstract class Citizen implements _i1.TableRow, _i1.ProtocolSerialization {
 
   static CitizenInclude include({
     _i2.AddressInclude? address,
-    _i2.CompanyInclude? company,
-    _i2.CompanyInclude? oldCompany,
+    _i3.CompanyInclude? company,
+    _i3.CompanyInclude? oldCompany,
   }) {
     return CitizenInclude._(
       address: address,
@@ -157,9 +158,9 @@ class _CitizenImpl extends Citizen {
     required String name,
     _i2.Address? address,
     required int companyId,
-    _i2.Company? company,
+    _i3.Company? company,
     int? oldCompanyId,
-    _i2.Company? oldCompany,
+    _i3.Company? oldCompany,
   }) : super._(
           id: id,
           name: name,
@@ -185,10 +186,10 @@ class _CitizenImpl extends Citizen {
       name: name ?? this.name,
       address: address is _i2.Address? ? address : this.address?.copyWith(),
       companyId: companyId ?? this.companyId,
-      company: company is _i2.Company? ? company : this.company?.copyWith(),
+      company: company is _i3.Company? ? company : this.company?.copyWith(),
       oldCompanyId: oldCompanyId is int? ? oldCompanyId : this.oldCompanyId,
       oldCompany:
-          oldCompany is _i2.Company? ? oldCompany : this.oldCompany?.copyWith(),
+          oldCompany is _i3.Company? ? oldCompany : this.oldCompany?.copyWith(),
     );
   }
 }
@@ -215,11 +216,11 @@ class CitizenTable extends _i1.Table {
 
   late final _i1.ColumnInt companyId;
 
-  _i2.CompanyTable? _company;
+  _i3.CompanyTable? _company;
 
   late final _i1.ColumnInt oldCompanyId;
 
-  _i2.CompanyTable? _oldCompany;
+  _i3.CompanyTable? _oldCompany;
 
   _i2.AddressTable get address {
     if (_address != null) return _address!;
@@ -234,28 +235,28 @@ class CitizenTable extends _i1.Table {
     return _address!;
   }
 
-  _i2.CompanyTable get company {
+  _i3.CompanyTable get company {
     if (_company != null) return _company!;
     _company = _i1.createRelationTable(
       relationFieldName: 'company',
       field: Citizen.t.companyId,
-      foreignField: _i2.Company.t.id,
+      foreignField: _i3.Company.t.id,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.CompanyTable(tableRelation: foreignTableRelation),
+          _i3.CompanyTable(tableRelation: foreignTableRelation),
     );
     return _company!;
   }
 
-  _i2.CompanyTable get oldCompany {
+  _i3.CompanyTable get oldCompany {
     if (_oldCompany != null) return _oldCompany!;
     _oldCompany = _i1.createRelationTable(
       relationFieldName: 'oldCompany',
       field: Citizen.t.oldCompanyId,
-      foreignField: _i2.Company.t.id,
+      foreignField: _i3.Company.t.id,
       tableRelation: tableRelation,
       createTable: (foreignTableRelation) =>
-          _i2.CompanyTable(tableRelation: foreignTableRelation),
+          _i3.CompanyTable(tableRelation: foreignTableRelation),
     );
     return _oldCompany!;
   }
@@ -286,8 +287,8 @@ class CitizenTable extends _i1.Table {
 class CitizenInclude extends _i1.IncludeObject {
   CitizenInclude._({
     _i2.AddressInclude? address,
-    _i2.CompanyInclude? company,
-    _i2.CompanyInclude? oldCompany,
+    _i3.CompanyInclude? company,
+    _i3.CompanyInclude? oldCompany,
   }) {
     _address = address;
     _company = company;
@@ -296,9 +297,9 @@ class CitizenInclude extends _i1.IncludeObject {
 
   _i2.AddressInclude? _address;
 
-  _i2.CompanyInclude? _company;
+  _i3.CompanyInclude? _company;
 
-  _i2.CompanyInclude? _oldCompany;
+  _i3.CompanyInclude? _oldCompany;
 
   @override
   Map<String, _i1.Include?> get includes => {
@@ -517,7 +518,7 @@ class CitizenAttachRowRepository {
   Future<void> company(
     _i1.Session session,
     Citizen citizen,
-    _i2.Company company, {
+    _i3.Company company, {
     _i1.Transaction? transaction,
   }) async {
     if (citizen.id == null) {
@@ -538,7 +539,7 @@ class CitizenAttachRowRepository {
   Future<void> oldCompany(
     _i1.Session session,
     Citizen citizen,
-    _i2.Company oldCompany, {
+    _i3.Company oldCompany, {
     _i1.Transaction? transaction,
   }) async {
     if (citizen.id == null) {
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/company.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/company.dart
index ee5f6729fc..31ddce3e65 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/company.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/company.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_one/town.dart' as _i2;
 
 abstract class Company implements _i1.TableRow, _i1.ProtocolSerialization {
   Company._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/town.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/town.dart
index 83588f5ece..922b62d4d8 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/town.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/one_to_one/town.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../protocol.dart' as _i2;
+import '../../models_with_relations/one_to_one/citizen.dart' as _i2;
 
 abstract class Town implements _i1.TableRow, _i1.ProtocolSerialization {
   Town._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/many_to_many/blocking.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/many_to_many/blocking.dart
index 6643a135c8..83250a9370 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/many_to_many/blocking.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/many_to_many/blocking.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../../protocol.dart' as _i2;
+import '../../../models_with_relations/self_relation/many_to_many/member.dart'
+    as _i2;
 
 abstract class Blocking implements _i1.TableRow, _i1.ProtocolSerialization {
   Blocking._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/many_to_many/member.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/many_to_many/member.dart
index 535f28845c..e8079ab793 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/many_to_many/member.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/many_to_many/member.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../../protocol.dart' as _i2;
+import '../../../models_with_relations/self_relation/many_to_many/blocking.dart'
+    as _i2;
 
 abstract class Member implements _i1.TableRow, _i1.ProtocolSerialization {
   Member._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/one_to_many/cat.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/one_to_many/cat.dart
index ea9557fae7..e7ae32d2d9 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/one_to_many/cat.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/one_to_many/cat.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../../protocol.dart' as _i2;
+import '../../../models_with_relations/self_relation/one_to_many/cat.dart'
+    as _i2;
 
 abstract class Cat implements _i1.TableRow, _i1.ProtocolSerialization {
   Cat._({
diff --git a/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/one_to_one/post.dart b/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/one_to_one/post.dart
index bddc900dd1..647dd3e6fe 100644
--- a/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/one_to_one/post.dart
+++ b/tests/serverpod_test_server/lib/src/generated/models_with_relations/self_relation/one_to_one/post.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../../../protocol.dart' as _i2;
+import '../../../models_with_relations/self_relation/one_to_one/post.dart'
+    as _i2;
 
 abstract class Post implements _i1.TableRow, _i1.ProtocolSerialization {
   Post._({
diff --git a/tests/serverpod_test_server/lib/src/generated/nullability.dart b/tests/serverpod_test_server/lib/src/generated/nullability.dart
index e76ae11c3b..05b5734d4e 100644
--- a/tests/serverpod_test_server/lib/src/generated/nullability.dart
+++ b/tests/serverpod_test_server/lib/src/generated/nullability.dart
@@ -11,7 +11,7 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
 import 'dart:typed_data' as _i2;
-import 'protocol.dart' as _i3;
+import 'simple_data.dart' as _i3;
 
 abstract class Nullability
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/object_field_persist.dart b/tests/serverpod_test_server/lib/src/generated/object_field_persist.dart
index 3c270861ec..c3608b721f 100644
--- a/tests/serverpod_test_server/lib/src/generated/object_field_persist.dart
+++ b/tests/serverpod_test_server/lib/src/generated/object_field_persist.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class ObjectFieldPersist
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/object_with_enum.dart b/tests/serverpod_test_server/lib/src/generated/object_with_enum.dart
index 804978a86f..496ee479d7 100644
--- a/tests/serverpod_test_server/lib/src/generated/object_with_enum.dart
+++ b/tests/serverpod_test_server/lib/src/generated/object_with_enum.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'test_enum.dart' as _i2;
 
 abstract class ObjectWithEnum
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/object_with_maps.dart b/tests/serverpod_test_server/lib/src/generated/object_with_maps.dart
index 97ea18cfc2..18960cfd61 100644
--- a/tests/serverpod_test_server/lib/src/generated/object_with_maps.dart
+++ b/tests/serverpod_test_server/lib/src/generated/object_with_maps.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 import 'dart:typed_data' as _i3;
 
 abstract class ObjectWithMaps
diff --git a/tests/serverpod_test_server/lib/src/generated/object_with_object.dart b/tests/serverpod_test_server/lib/src/generated/object_with_object.dart
index 898f38840a..961e211937 100644
--- a/tests/serverpod_test_server/lib/src/generated/object_with_object.dart
+++ b/tests/serverpod_test_server/lib/src/generated/object_with_object.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class ObjectWithObject
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/protocol.dart b/tests/serverpod_test_server/lib/src/generated/protocol.dart
index 1120489dc3..7e2fe13ce1 100644
--- a/tests/serverpod_test_server/lib/src/generated/protocol.dart
+++ b/tests/serverpod_test_server/lib/src/generated/protocol.dart
@@ -136,14 +136,13 @@ import 'types.dart' as _i115;
 import 'types_list.dart' as _i116;
 import 'types_map.dart' as _i117;
 import 'unique_data.dart' as _i118;
-import 'protocol.dart' as _i119;
-import 'dart:typed_data' as _i120;
-import 'package:serverpod_test_server/src/custom_classes.dart' as _i121;
-import 'package:serverpod_test_server/src/generated/simple_data.dart' as _i122;
-import 'package:serverpod_test_server/src/generated/test_enum.dart' as _i123;
+import 'dart:typed_data' as _i119;
+import 'package:serverpod_test_server/src/custom_classes.dart' as _i120;
+import 'package:serverpod_test_server/src/generated/simple_data.dart' as _i121;
+import 'package:serverpod_test_server/src/generated/test_enum.dart' as _i122;
 import 'package:serverpod_test_server/src/protocol_custom_classes.dart'
-    as _i124;
-import 'package:serverpod_test_shared/serverpod_test_shared.dart' as _i125;
+    as _i123;
+import 'package:serverpod_test_shared/serverpod_test_shared.dart' as _i124;
 export 'defaults/boolean/bool_default.dart';
 export 'defaults/boolean/bool_default_mix.dart';
 export 'defaults/boolean/bool_default_model.dart';
@@ -5471,10 +5470,10 @@ class Protocol extends _i1.SerializationManagerServer {
     if (t == _i1.getType<_i118.UniqueData?>()) {
       return (data != null ? _i118.UniqueData.fromJson(data) : null) as T;
     }
-    if (t == _i1.getType<List<_i119.EmptyModelRelationItem>?>()) {
+    if (t == _i1.getType<List<_i41.EmptyModelRelationItem>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.EmptyModelRelationItem>(e))
+              .map((e) => deserialize<_i41.EmptyModelRelationItem>(e))
               .toList()
           : null) as dynamic;
     }
@@ -5482,108 +5481,108 @@ class Protocol extends _i1.SerializationManagerServer {
       return (data as List).map((e) => deserialize<String>(e)).toList()
           as dynamic;
     }
-    if (t == _i1.getType<List<_i119.PersonWithLongTableName>?>()) {
+    if (t == _i1.getType<List<_i51.PersonWithLongTableName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.PersonWithLongTableName>(e))
+              .map((e) => deserialize<_i51.PersonWithLongTableName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.OrganizationWithLongTableName>?>()) {
+    if (t == _i1.getType<List<_i50.OrganizationWithLongTableName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.OrganizationWithLongTableName>(e))
+              .map((e) => deserialize<_i50.OrganizationWithLongTableName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.PersonWithLongTableName>?>()) {
+    if (t == _i1.getType<List<_i51.PersonWithLongTableName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.PersonWithLongTableName>(e))
+              .map((e) => deserialize<_i51.PersonWithLongTableName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.LongImplicitIdField>?>()) {
+    if (t == _i1.getType<List<_i53.LongImplicitIdField>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.LongImplicitIdField>(e))
+              .map((e) => deserialize<_i53.LongImplicitIdField>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.MultipleMaxFieldName>?>()) {
+    if (t == _i1.getType<List<_i60.MultipleMaxFieldName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.MultipleMaxFieldName>(e))
+              .map((e) => deserialize<_i60.MultipleMaxFieldName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.UserNote>?>()) {
+    if (t == _i1.getType<List<_i56.UserNote>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.UserNote>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i56.UserNote>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.UserNoteWithALongName>?>()) {
+    if (t == _i1.getType<List<_i59.UserNoteWithALongName>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.UserNoteWithALongName>(e))
+              .map((e) => deserialize<_i59.UserNoteWithALongName>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Person>?>()) {
+    if (t == _i1.getType<List<_i63.Person>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Person>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i63.Person>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Organization>?>()) {
+    if (t == _i1.getType<List<_i62.Organization>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.Organization>(e))
+              .map((e) => deserialize<_i62.Organization>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Person>?>()) {
+    if (t == _i1.getType<List<_i63.Person>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Person>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i63.Person>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Enrollment>?>()) {
+    if (t == _i1.getType<List<_i65.Enrollment>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Enrollment>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i65.Enrollment>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Enrollment>?>()) {
+    if (t == _i1.getType<List<_i65.Enrollment>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Enrollment>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i65.Enrollment>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Player>?>()) {
+    if (t == _i1.getType<List<_i70.Player>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Player>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i70.Player>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Order>?>()) {
+    if (t == _i1.getType<List<_i74.Order>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Order>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i74.Order>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Comment>?>()) {
+    if (t == _i1.getType<List<_i72.Comment>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Comment>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i72.Comment>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Blocking>?>()) {
+    if (t == _i1.getType<List<_i79.Blocking>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Blocking>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i79.Blocking>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Blocking>?>()) {
+    if (t == _i1.getType<List<_i79.Blocking>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Blocking>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i79.Blocking>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Cat>?>()) {
+    if (t == _i1.getType<List<_i81.Cat>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Cat>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i81.Cat>(e)).toList()
           : null) as dynamic;
     }
     if (t == List<_i4.ModuleClass>) {
@@ -5612,25 +5611,25 @@ class Protocol extends _i1.SerializationManagerServer {
           ? (data as List).map((e) => deserialize<int?>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i119.SimpleData>) {
+    if (t == List<_i108.SimpleData>) {
       return (data as List)
-          .map((e) => deserialize<_i119.SimpleData>(e))
+          .map((e) => deserialize<_i108.SimpleData>(e))
           .toList() as dynamic;
     }
-    if (t == _i1.getType<List<_i119.SimpleData>?>()) {
+    if (t == _i1.getType<List<_i108.SimpleData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.SimpleData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i108.SimpleData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i119.SimpleData?>) {
+    if (t == List<_i108.SimpleData?>) {
       return (data as List)
-          .map((e) => deserialize<_i119.SimpleData?>(e))
+          .map((e) => deserialize<_i108.SimpleData?>(e))
           .toList() as dynamic;
     }
-    if (t == _i1.getType<List<_i119.SimpleData?>?>()) {
+    if (t == _i1.getType<List<_i108.SimpleData?>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.SimpleData?>(e))
+              .map((e) => deserialize<_i108.SimpleData?>(e))
               .toList()
           : null) as dynamic;
     }
@@ -5652,22 +5651,22 @@ class Protocol extends _i1.SerializationManagerServer {
           ? (data as List).map((e) => deserialize<DateTime?>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i120.ByteData>) {
-      return (data as List).map((e) => deserialize<_i120.ByteData>(e)).toList()
+    if (t == List<_i119.ByteData>) {
+      return (data as List).map((e) => deserialize<_i119.ByteData>(e)).toList()
           as dynamic;
     }
-    if (t == _i1.getType<List<_i120.ByteData>?>()) {
+    if (t == _i1.getType<List<_i119.ByteData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i120.ByteData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i119.ByteData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == List<_i120.ByteData?>) {
-      return (data as List).map((e) => deserialize<_i120.ByteData?>(e)).toList()
+    if (t == List<_i119.ByteData?>) {
+      return (data as List).map((e) => deserialize<_i119.ByteData?>(e)).toList()
           as dynamic;
     }
-    if (t == _i1.getType<List<_i120.ByteData?>?>()) {
+    if (t == _i1.getType<List<_i119.ByteData?>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i120.ByteData?>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i119.ByteData?>(e)).toList()
           : null) as dynamic;
     }
     if (t == List<Duration>) {
@@ -5728,25 +5727,25 @@ class Protocol extends _i1.SerializationManagerServer {
               (k, v) => MapEntry(deserialize<String>(k), deserialize<int?>(v)))
           : null) as dynamic;
     }
-    if (t == _i121.CustomClass3) {
-      return _i121.CustomClass3.fromJson(data) as T;
+    if (t == _i120.CustomClass3) {
+      return _i120.CustomClass3.fromJson(data) as T;
     }
-    if (t == List<_i119.TestEnum>) {
-      return (data as List).map((e) => deserialize<_i119.TestEnum>(e)).toList()
+    if (t == List<_i113.TestEnum>) {
+      return (data as List).map((e) => deserialize<_i113.TestEnum>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i119.TestEnum?>) {
-      return (data as List).map((e) => deserialize<_i119.TestEnum?>(e)).toList()
+    if (t == List<_i113.TestEnum?>) {
+      return (data as List).map((e) => deserialize<_i113.TestEnum?>(e)).toList()
           as dynamic;
     }
-    if (t == List<List<_i119.TestEnum>>) {
+    if (t == List<List<_i113.TestEnum>>) {
       return (data as List)
-          .map((e) => deserialize<List<_i119.TestEnum>>(e))
+          .map((e) => deserialize<List<_i113.TestEnum>>(e))
           .toList() as dynamic;
     }
-    if (t == Map<String, _i119.SimpleData>) {
+    if (t == Map<String, _i108.SimpleData>) {
       return (data as Map).map((k, v) => MapEntry(
-          deserialize<String>(k), deserialize<_i119.SimpleData>(v))) as dynamic;
+          deserialize<String>(k), deserialize<_i108.SimpleData>(v))) as dynamic;
     }
     if (t == Map<String, String>) {
       return (data as Map).map((k, v) =>
@@ -5757,9 +5756,9 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<String>(k), deserialize<DateTime>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i120.ByteData>) {
+    if (t == Map<String, _i119.ByteData>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i120.ByteData>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i119.ByteData>(v)))
           as dynamic;
     }
     if (t == Map<String, Duration>) {
@@ -5772,9 +5771,9 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<String>(k), deserialize<_i1.UuidValue>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i119.SimpleData?>) {
+    if (t == Map<String, _i108.SimpleData?>) {
       return (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i119.SimpleData?>(v)))
+              deserialize<String>(k), deserialize<_i108.SimpleData?>(v)))
           as dynamic;
     }
     if (t == Map<String, String?>) {
@@ -5786,9 +5785,9 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<String>(k), deserialize<DateTime?>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i120.ByteData?>) {
+    if (t == Map<String, _i119.ByteData?>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i120.ByteData?>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i119.ByteData?>(v)))
           as dynamic;
     }
     if (t == Map<String, Duration?>) {
@@ -5806,66 +5805,66 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<int>(e['k']), deserialize<int>(e['v']))))
           as dynamic;
     }
-    if (t == _i1.getType<List<_i119.SimpleData>?>()) {
+    if (t == _i1.getType<List<_i108.SimpleData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.SimpleData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i108.SimpleData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.SimpleData?>?>()) {
+    if (t == _i1.getType<List<_i108.SimpleData?>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.SimpleData?>(e))
+              .map((e) => deserialize<_i108.SimpleData?>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<List<_i119.SimpleData>>?>()) {
+    if (t == _i1.getType<List<List<_i108.SimpleData>>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<List<_i119.SimpleData>>(e))
+              .map((e) => deserialize<List<_i108.SimpleData>>(e))
               .toList()
           : null) as dynamic;
     }
     if (t ==
-        _i1.getType<Map<String, List<List<Map<int, _i119.SimpleData>>?>>?>()) {
+        _i1.getType<Map<String, List<List<Map<int, _i108.SimpleData>>?>>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(deserialize<String>(k),
-              deserialize<List<List<Map<int, _i119.SimpleData>>?>>(v)))
+              deserialize<List<List<Map<int, _i108.SimpleData>>?>>(v)))
           : null) as dynamic;
     }
-    if (t == List<List<Map<int, _i119.SimpleData>>?>) {
+    if (t == List<List<Map<int, _i108.SimpleData>>?>) {
       return (data as List)
-          .map((e) => deserialize<List<Map<int, _i119.SimpleData>>?>(e))
+          .map((e) => deserialize<List<Map<int, _i108.SimpleData>>?>(e))
           .toList() as dynamic;
     }
-    if (t == _i1.getType<List<Map<int, _i119.SimpleData>>?>()) {
+    if (t == _i1.getType<List<Map<int, _i108.SimpleData>>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<Map<int, _i119.SimpleData>>(e))
+              .map((e) => deserialize<Map<int, _i108.SimpleData>>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == Map<int, _i119.SimpleData>) {
+    if (t == Map<int, _i108.SimpleData>) {
       return Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<int>(e['k']), deserialize<_i119.SimpleData>(e['v']))))
+              deserialize<int>(e['k']), deserialize<_i108.SimpleData>(e['v']))))
           as dynamic;
     }
-    if (t == _i1.getType<Map<String, Map<int, _i119.SimpleData>>?>()) {
+    if (t == _i1.getType<Map<String, Map<int, _i108.SimpleData>>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(deserialize<String>(k),
-              deserialize<Map<int, _i119.SimpleData>>(v)))
+              deserialize<Map<int, _i108.SimpleData>>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.ServerOnlyClass>?>()) {
+    if (t == _i1.getType<List<_i105.ServerOnlyClass>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.ServerOnlyClass>(e))
+              .map((e) => deserialize<_i105.ServerOnlyClass>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i119.ServerOnlyClass>?>()) {
+    if (t == _i1.getType<Map<String, _i105.ServerOnlyClass>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i119.ServerOnlyClass>(v)))
+              deserialize<String>(k), deserialize<_i105.ServerOnlyClass>(v)))
           : null) as dynamic;
     }
     if (t == _i1.getType<List<int>?>()) {
@@ -5893,9 +5892,9 @@ class Protocol extends _i1.SerializationManagerServer {
           ? (data as List).map((e) => deserialize<String>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i120.ByteData>?>()) {
+    if (t == _i1.getType<List<_i119.ByteData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i120.ByteData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i119.ByteData>(e)).toList()
           : null) as dynamic;
     }
     if (t == _i1.getType<List<Duration>?>()) {
@@ -5908,44 +5907,44 @@ class Protocol extends _i1.SerializationManagerServer {
           ? (data as List).map((e) => deserialize<_i1.UuidValue>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.TestEnum>?>()) {
+    if (t == _i1.getType<List<_i113.TestEnum>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.TestEnum>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i113.TestEnum>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.TestEnumStringified>?>()) {
+    if (t == _i1.getType<List<_i114.TestEnumStringified>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i119.TestEnumStringified>(e))
+              .map((e) => deserialize<_i114.TestEnumStringified>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i119.Types>?>()) {
+    if (t == _i1.getType<List<_i115.Types>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i119.Types>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i115.Types>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<Map<String, _i119.Types>>?>()) {
+    if (t == _i1.getType<List<Map<String, _i115.Types>>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<Map<String, _i119.Types>>(e))
+              .map((e) => deserialize<Map<String, _i115.Types>>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == Map<String, _i119.Types>) {
+    if (t == Map<String, _i115.Types>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i119.Types>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i115.Types>(v)))
           as dynamic;
     }
-    if (t == _i1.getType<List<List<_i119.Types>>?>()) {
+    if (t == _i1.getType<List<List<_i115.Types>>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<List<_i119.Types>>(e))
+              .map((e) => deserialize<List<_i115.Types>>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == List<_i119.Types>) {
-      return (data as List).map((e) => deserialize<_i119.Types>(e)).toList()
+    if (t == List<_i115.Types>) {
+      return (data as List).map((e) => deserialize<_i115.Types>(e)).toList()
           as dynamic;
     }
     if (t == _i1.getType<Map<int, String>?>()) {
@@ -5978,10 +5977,10 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<String>(k), deserialize<String>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<_i120.ByteData, String>?>()) {
+    if (t == _i1.getType<Map<_i119.ByteData, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i120.ByteData>(e['k']),
+              deserialize<_i119.ByteData>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
@@ -5997,42 +5996,42 @@ class Protocol extends _i1.SerializationManagerServer {
               deserialize<_i1.UuidValue>(e['k']), deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<_i119.TestEnum, String>?>()) {
+    if (t == _i1.getType<Map<_i113.TestEnum, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i119.TestEnum>(e['k']),
+              deserialize<_i113.TestEnum>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<_i119.TestEnumStringified, String>?>()) {
+    if (t == _i1.getType<Map<_i114.TestEnumStringified, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i119.TestEnumStringified>(e['k']),
+              deserialize<_i114.TestEnumStringified>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<_i119.Types, String>?>()) {
+    if (t == _i1.getType<Map<_i115.Types, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i119.Types>(e['k']), deserialize<String>(e['v']))))
+              deserialize<_i115.Types>(e['k']), deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<Map<_i119.Types, String>, String>?>()) {
+    if (t == _i1.getType<Map<Map<_i115.Types, String>, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<Map<_i119.Types, String>>(e['k']),
+              deserialize<Map<_i115.Types, String>>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
-    if (t == Map<_i119.Types, String>) {
+    if (t == Map<_i115.Types, String>) {
       return Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i119.Types>(e['k']), deserialize<String>(e['v']))))
+              deserialize<_i115.Types>(e['k']), deserialize<String>(e['v']))))
           as dynamic;
     }
-    if (t == _i1.getType<Map<List<_i119.Types>, String>?>()) {
+    if (t == _i1.getType<Map<List<_i115.Types>, String>?>()) {
       return (data != null
           ? Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<List<_i119.Types>>(e['k']),
+              deserialize<List<_i115.Types>>(e['k']),
               deserialize<String>(e['v']))))
           : null) as dynamic;
     }
@@ -6066,10 +6065,10 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<String>(k), deserialize<String>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i120.ByteData>?>()) {
+    if (t == _i1.getType<Map<String, _i119.ByteData>?>()) {
       return (data != null
           ? (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i120.ByteData>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i119.ByteData>(v)))
           : null) as dynamic;
     }
     if (t == _i1.getType<Map<String, Duration>?>()) {
@@ -6084,34 +6083,34 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<String>(k), deserialize<_i1.UuidValue>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i119.TestEnum>?>()) {
+    if (t == _i1.getType<Map<String, _i113.TestEnum>?>()) {
       return (data != null
           ? (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i119.TestEnum>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i113.TestEnum>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i119.TestEnumStringified>?>()) {
+    if (t == _i1.getType<Map<String, _i114.TestEnumStringified>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(deserialize<String>(k),
-              deserialize<_i119.TestEnumStringified>(v)))
+              deserialize<_i114.TestEnumStringified>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i119.Types>?>()) {
+    if (t == _i1.getType<Map<String, _i115.Types>?>()) {
       return (data != null
           ? (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i119.Types>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i115.Types>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, Map<String, _i119.Types>>?>()) {
+    if (t == _i1.getType<Map<String, Map<String, _i115.Types>>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<Map<String, _i119.Types>>(v)))
+              deserialize<String>(k), deserialize<Map<String, _i115.Types>>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, List<_i119.Types>>?>()) {
+    if (t == _i1.getType<Map<String, List<_i115.Types>>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<List<_i119.Types>>(v)))
+              deserialize<String>(k), deserialize<List<_i115.Types>>(v)))
           : null) as dynamic;
     }
     if (t == _i1.getType<List<String>?>()) {
@@ -6123,9 +6122,9 @@ class Protocol extends _i1.SerializationManagerServer {
       return (data as List).map((e) => deserialize<String>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i122.SimpleData>) {
+    if (t == List<_i121.SimpleData>) {
       return (data as List)
-          .map((e) => deserialize<_i122.SimpleData>(e))
+          .map((e) => deserialize<_i121.SimpleData>(e))
           .toList() as dynamic;
     }
     if (t == List<int>) {
@@ -6216,40 +6215,40 @@ class Protocol extends _i1.SerializationManagerServer {
       return (data as List).map((e) => deserialize<DateTime?>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i120.ByteData>) {
-      return (data as List).map((e) => deserialize<_i120.ByteData>(e)).toList()
+    if (t == List<_i119.ByteData>) {
+      return (data as List).map((e) => deserialize<_i119.ByteData>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i120.ByteData?>) {
-      return (data as List).map((e) => deserialize<_i120.ByteData?>(e)).toList()
+    if (t == List<_i119.ByteData?>) {
+      return (data as List).map((e) => deserialize<_i119.ByteData?>(e)).toList()
           as dynamic;
     }
-    if (t == List<_i122.SimpleData?>) {
+    if (t == List<_i121.SimpleData?>) {
       return (data as List)
-          .map((e) => deserialize<_i122.SimpleData?>(e))
+          .map((e) => deserialize<_i121.SimpleData?>(e))
           .toList() as dynamic;
     }
-    if (t == _i1.getType<List<_i122.SimpleData>?>()) {
+    if (t == _i1.getType<List<_i121.SimpleData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i122.SimpleData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i121.SimpleData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i122.SimpleData>?>()) {
+    if (t == _i1.getType<List<_i121.SimpleData>?>()) {
       return (data != null
-          ? (data as List).map((e) => deserialize<_i122.SimpleData>(e)).toList()
+          ? (data as List).map((e) => deserialize<_i121.SimpleData>(e)).toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i122.SimpleData?>?>()) {
+    if (t == _i1.getType<List<_i121.SimpleData?>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i122.SimpleData?>(e))
+              .map((e) => deserialize<_i121.SimpleData?>(e))
               .toList()
           : null) as dynamic;
     }
-    if (t == _i1.getType<List<_i122.SimpleData?>?>()) {
+    if (t == _i1.getType<List<_i121.SimpleData?>?>()) {
       return (data != null
           ? (data as List)
-              .map((e) => deserialize<_i122.SimpleData?>(e))
+              .map((e) => deserialize<_i121.SimpleData?>(e))
               .toList()
           : null) as dynamic;
     }
@@ -6304,14 +6303,14 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<int>(e['k']), deserialize<int>(e['v']))))
           as dynamic;
     }
-    if (t == Map<_i123.TestEnum, int>) {
+    if (t == Map<_i122.TestEnum, int>) {
       return Map.fromEntries((data as List).map((e) => MapEntry(
-              deserialize<_i123.TestEnum>(e['k']), deserialize<int>(e['v']))))
+              deserialize<_i122.TestEnum>(e['k']), deserialize<int>(e['v']))))
           as dynamic;
     }
-    if (t == Map<String, _i123.TestEnum>) {
+    if (t == Map<String, _i122.TestEnum>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i123.TestEnum>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i122.TestEnum>(v)))
           as dynamic;
     }
     if (t == Map<String, double>) {
@@ -6350,47 +6349,47 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<String>(k), deserialize<DateTime?>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i120.ByteData>) {
+    if (t == Map<String, _i119.ByteData>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i120.ByteData>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i119.ByteData>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i120.ByteData?>) {
+    if (t == Map<String, _i119.ByteData?>) {
       return (data as Map).map((k, v) =>
-              MapEntry(deserialize<String>(k), deserialize<_i120.ByteData?>(v)))
+              MapEntry(deserialize<String>(k), deserialize<_i119.ByteData?>(v)))
           as dynamic;
     }
-    if (t == Map<String, _i122.SimpleData>) {
+    if (t == Map<String, _i121.SimpleData>) {
       return (data as Map).map((k, v) => MapEntry(
-          deserialize<String>(k), deserialize<_i122.SimpleData>(v))) as dynamic;
+          deserialize<String>(k), deserialize<_i121.SimpleData>(v))) as dynamic;
     }
-    if (t == Map<String, _i122.SimpleData?>) {
+    if (t == Map<String, _i121.SimpleData?>) {
       return (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i122.SimpleData?>(v)))
+              deserialize<String>(k), deserialize<_i121.SimpleData?>(v)))
           as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i122.SimpleData>?>()) {
+    if (t == _i1.getType<Map<String, _i121.SimpleData>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i122.SimpleData>(v)))
+              deserialize<String>(k), deserialize<_i121.SimpleData>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i122.SimpleData>?>()) {
+    if (t == _i1.getType<Map<String, _i121.SimpleData>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i122.SimpleData>(v)))
+              deserialize<String>(k), deserialize<_i121.SimpleData>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i122.SimpleData?>?>()) {
+    if (t == _i1.getType<Map<String, _i121.SimpleData?>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i122.SimpleData?>(v)))
+              deserialize<String>(k), deserialize<_i121.SimpleData?>(v)))
           : null) as dynamic;
     }
-    if (t == _i1.getType<Map<String, _i122.SimpleData?>?>()) {
+    if (t == _i1.getType<Map<String, _i121.SimpleData?>?>()) {
       return (data != null
           ? (data as Map).map((k, v) => MapEntry(
-              deserialize<String>(k), deserialize<_i122.SimpleData?>(v)))
+              deserialize<String>(k), deserialize<_i121.SimpleData?>(v)))
           : null) as dynamic;
     }
     if (t == Map<String, Duration>) {
@@ -6403,40 +6402,40 @@ class Protocol extends _i1.SerializationManagerServer {
               MapEntry(deserialize<String>(k), deserialize<Duration?>(v)))
           as dynamic;
     }
-    if (t == _i121.CustomClass) {
-      return _i121.CustomClass.fromJson(data) as T;
+    if (t == _i120.CustomClass) {
+      return _i120.CustomClass.fromJson(data) as T;
     }
-    if (t == _i121.CustomClass2) {
-      return _i121.CustomClass2.fromJson(data) as T;
+    if (t == _i120.CustomClass2) {
+      return _i120.CustomClass2.fromJson(data) as T;
     }
-    if (t == _i124.ProtocolCustomClass) {
-      return _i124.ProtocolCustomClass.fromJson(data) as T;
+    if (t == _i123.ProtocolCustomClass) {
+      return _i123.ProtocolCustomClass.fromJson(data) as T;
     }
-    if (t == _i125.ExternalCustomClass) {
-      return _i125.ExternalCustomClass.fromJson(data) as T;
+    if (t == _i124.ExternalCustomClass) {
+      return _i124.ExternalCustomClass.fromJson(data) as T;
     }
-    if (t == _i125.FreezedCustomClass) {
-      return _i125.FreezedCustomClass.fromJson(data) as T;
+    if (t == _i124.FreezedCustomClass) {
+      return _i124.FreezedCustomClass.fromJson(data) as T;
     }
-    if (t == _i1.getType<_i121.CustomClass?>()) {
-      return (data != null ? _i121.CustomClass.fromJson(data) : null) as T;
+    if (t == _i1.getType<_i120.CustomClass?>()) {
+      return (data != null ? _i120.CustomClass.fromJson(data) : null) as T;
     }
-    if (t == _i1.getType<_i121.CustomClass2?>()) {
-      return (data != null ? _i121.CustomClass2.fromJson(data) : null) as T;
+    if (t == _i1.getType<_i120.CustomClass2?>()) {
+      return (data != null ? _i120.CustomClass2.fromJson(data) : null) as T;
     }
-    if (t == _i1.getType<_i121.CustomClass3?>()) {
-      return (data != null ? _i121.CustomClass3.fromJson(data) : null) as T;
+    if (t == _i1.getType<_i120.CustomClass3?>()) {
+      return (data != null ? _i120.CustomClass3.fromJson(data) : null) as T;
     }
-    if (t == _i1.getType<_i124.ProtocolCustomClass?>()) {
-      return (data != null ? _i124.ProtocolCustomClass.fromJson(data) : null)
+    if (t == _i1.getType<_i123.ProtocolCustomClass?>()) {
+      return (data != null ? _i123.ProtocolCustomClass.fromJson(data) : null)
           as T;
     }
-    if (t == _i1.getType<_i125.ExternalCustomClass?>()) {
-      return (data != null ? _i125.ExternalCustomClass.fromJson(data) : null)
+    if (t == _i1.getType<_i124.ExternalCustomClass?>()) {
+      return (data != null ? _i124.ExternalCustomClass.fromJson(data) : null)
           as T;
     }
-    if (t == _i1.getType<_i125.FreezedCustomClass?>()) {
-      return (data != null ? _i125.FreezedCustomClass.fromJson(data) : null)
+    if (t == _i1.getType<_i124.FreezedCustomClass?>()) {
+      return (data != null ? _i124.FreezedCustomClass.fromJson(data) : null)
           as T;
     }
     try {
@@ -6455,22 +6454,22 @@ class Protocol extends _i1.SerializationManagerServer {
   String? getClassNameForObject(Object? data) {
     String? className = super.getClassNameForObject(data);
     if (className != null) return className;
-    if (data is _i121.CustomClass) {
+    if (data is _i120.CustomClass) {
       return 'CustomClass';
     }
-    if (data is _i121.CustomClass2) {
+    if (data is _i120.CustomClass2) {
       return 'CustomClass2';
     }
-    if (data is _i121.CustomClass3) {
+    if (data is _i120.CustomClass3) {
       return 'CustomClass3';
     }
-    if (data is _i124.ProtocolCustomClass) {
+    if (data is _i123.ProtocolCustomClass) {
       return 'ProtocolCustomClass';
     }
-    if (data is _i125.ExternalCustomClass) {
+    if (data is _i124.ExternalCustomClass) {
       return 'ExternalCustomClass';
     }
-    if (data is _i125.FreezedCustomClass) {
+    if (data is _i124.FreezedCustomClass) {
       return 'FreezedCustomClass';
     }
     if (data is _i5.BoolDefault) {
@@ -6843,22 +6842,22 @@ class Protocol extends _i1.SerializationManagerServer {
       return super.deserializeByClassName(data);
     }
     if (dataClassName == 'CustomClass') {
-      return deserialize<_i121.CustomClass>(data['data']);
+      return deserialize<_i120.CustomClass>(data['data']);
     }
     if (dataClassName == 'CustomClass2') {
-      return deserialize<_i121.CustomClass2>(data['data']);
+      return deserialize<_i120.CustomClass2>(data['data']);
     }
     if (dataClassName == 'CustomClass3') {
-      return deserialize<_i121.CustomClass3>(data['data']);
+      return deserialize<_i120.CustomClass3>(data['data']);
     }
     if (dataClassName == 'ProtocolCustomClass') {
-      return deserialize<_i124.ProtocolCustomClass>(data['data']);
+      return deserialize<_i123.ProtocolCustomClass>(data['data']);
     }
     if (dataClassName == 'ExternalCustomClass') {
-      return deserialize<_i125.ExternalCustomClass>(data['data']);
+      return deserialize<_i124.ExternalCustomClass>(data['data']);
     }
     if (dataClassName == 'FreezedCustomClass') {
-      return deserialize<_i125.FreezedCustomClass>(data['data']);
+      return deserialize<_i124.FreezedCustomClass>(data['data']);
     }
     if (dataClassName == 'BoolDefault') {
       return deserialize<_i5.BoolDefault>(data['data']);
diff --git a/tests/serverpod_test_server/lib/src/generated/related_unique_data.dart b/tests/serverpod_test_server/lib/src/generated/related_unique_data.dart
index 34f5252331..6883951118 100644
--- a/tests/serverpod_test_server/lib/src/generated/related_unique_data.dart
+++ b/tests/serverpod_test_server/lib/src/generated/related_unique_data.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'unique_data.dart' as _i2;
 
 abstract class RelatedUniqueData
     implements _i1.TableRow, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/scopes/scope_server_only_field.dart b/tests/serverpod_test_server/lib/src/generated/scopes/scope_server_only_field.dart
index fb35e0fa18..14267134e6 100644
--- a/tests/serverpod_test_server/lib/src/generated/scopes/scope_server_only_field.dart
+++ b/tests/serverpod_test_server/lib/src/generated/scopes/scope_server_only_field.dart
@@ -10,7 +10,8 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../types.dart' as _i2;
+import '../scopes/scope_server_only_field.dart' as _i3;
 
 class ScopeServerOnlyField
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
@@ -33,7 +34,7 @@ class ScopeServerOnlyField
               (jsonSerialization['serverOnlyScope'] as Map<String, dynamic>)),
       nested: jsonSerialization['nested'] == null
           ? null
-          : _i2.ScopeServerOnlyField.fromJson(
+          : _i3.ScopeServerOnlyField.fromJson(
               (jsonSerialization['nested'] as Map<String, dynamic>)),
     );
   }
@@ -42,7 +43,7 @@ class ScopeServerOnlyField
 
   _i2.Types? serverOnlyScope;
 
-  _i2.ScopeServerOnlyField? nested;
+  _i3.ScopeServerOnlyField? nested;
 
   ScopeServerOnlyField copyWith({
     Object? allScope = _Undefined,
@@ -54,7 +55,7 @@ class ScopeServerOnlyField
       serverOnlyScope: serverOnlyScope is _i2.Types?
           ? serverOnlyScope
           : this.serverOnlyScope?.copyWith(),
-      nested: nested is _i2.ScopeServerOnlyField?
+      nested: nested is _i3.ScopeServerOnlyField?
           ? nested
           : this.nested?.copyWith(),
     );
diff --git a/tests/serverpod_test_server/lib/src/generated/scopes/scope_server_only_field_child.dart b/tests/serverpod_test_server/lib/src/generated/scopes/scope_server_only_field_child.dart
index 1fa757a673..d9b785ac13 100644
--- a/tests/serverpod_test_server/lib/src/generated/scopes/scope_server_only_field_child.dart
+++ b/tests/serverpod_test_server/lib/src/generated/scopes/scope_server_only_field_child.dart
@@ -11,6 +11,8 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import '../protocol.dart' as _i1;
 import 'package:serverpod/serverpod.dart' as _i2;
+import '../types.dart' as _i3;
+import '../scopes/scope_server_only_field.dart' as _i4;
 
 abstract class ScopeServerOnlyFieldChild extends _i1.ScopeServerOnlyField
     implements _i2.SerializableModel, _i2.ProtocolSerialization {
@@ -22,9 +24,9 @@ abstract class ScopeServerOnlyFieldChild extends _i1.ScopeServerOnlyField
   });
 
   factory ScopeServerOnlyFieldChild({
-    _i1.Types? allScope,
-    _i1.Types? serverOnlyScope,
-    _i1.ScopeServerOnlyField? nested,
+    _i3.Types? allScope,
+    _i3.Types? serverOnlyScope,
+    _i4.ScopeServerOnlyField? nested,
     required String childFoo,
   }) = _ScopeServerOnlyFieldChildImpl;
 
@@ -33,15 +35,15 @@ abstract class ScopeServerOnlyFieldChild extends _i1.ScopeServerOnlyField
     return ScopeServerOnlyFieldChild(
       allScope: jsonSerialization['allScope'] == null
           ? null
-          : _i1.Types.fromJson(
+          : _i3.Types.fromJson(
               (jsonSerialization['allScope'] as Map<String, dynamic>)),
       serverOnlyScope: jsonSerialization['serverOnlyScope'] == null
           ? null
-          : _i1.Types.fromJson(
+          : _i3.Types.fromJson(
               (jsonSerialization['serverOnlyScope'] as Map<String, dynamic>)),
       nested: jsonSerialization['nested'] == null
           ? null
-          : _i1.ScopeServerOnlyField.fromJson(
+          : _i4.ScopeServerOnlyField.fromJson(
               (jsonSerialization['nested'] as Map<String, dynamic>)),
       childFoo: jsonSerialization['childFoo'] as String,
     );
@@ -85,9 +87,9 @@ class _Undefined {}
 
 class _ScopeServerOnlyFieldChildImpl extends ScopeServerOnlyFieldChild {
   _ScopeServerOnlyFieldChildImpl({
-    _i1.Types? allScope,
-    _i1.Types? serverOnlyScope,
-    _i1.ScopeServerOnlyField? nested,
+    _i3.Types? allScope,
+    _i3.Types? serverOnlyScope,
+    _i4.ScopeServerOnlyField? nested,
     required String childFoo,
   }) : super._(
           allScope: allScope,
@@ -104,11 +106,11 @@ class _ScopeServerOnlyFieldChildImpl extends ScopeServerOnlyFieldChild {
     String? childFoo,
   }) {
     return ScopeServerOnlyFieldChild(
-      allScope: allScope is _i1.Types? ? allScope : this.allScope?.copyWith(),
-      serverOnlyScope: serverOnlyScope is _i1.Types?
+      allScope: allScope is _i3.Types? ? allScope : this.allScope?.copyWith(),
+      serverOnlyScope: serverOnlyScope is _i3.Types?
           ? serverOnlyScope
           : this.serverOnlyScope?.copyWith(),
-      nested: nested is _i1.ScopeServerOnlyField?
+      nested: nested is _i4.ScopeServerOnlyField?
           ? nested
           : this.nested?.copyWith(),
       childFoo: childFoo ?? this.childFoo,
diff --git a/tests/serverpod_test_server/lib/src/generated/scopes/server_only_class_field.dart b/tests/serverpod_test_server/lib/src/generated/scopes/server_only_class_field.dart
index ef92bfa62b..6ea3f68acb 100644
--- a/tests/serverpod_test_server/lib/src/generated/scopes/server_only_class_field.dart
+++ b/tests/serverpod_test_server/lib/src/generated/scopes/server_only_class_field.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import '../protocol.dart' as _i2;
+import '../scopes/serverOnly/server_only_class.dart' as _i2;
 
 abstract class ServerOnlyClassField
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/simple_data_list.dart b/tests/serverpod_test_server/lib/src/generated/simple_data_list.dart
index 37d95a5a01..3e0287014d 100644
--- a/tests/serverpod_test_server/lib/src/generated/simple_data_list.dart
+++ b/tests/serverpod_test_server/lib/src/generated/simple_data_list.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class SimpleDataList
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/simple_data_map.dart b/tests/serverpod_test_server/lib/src/generated/simple_data_map.dart
index 624cf97443..496299b74b 100644
--- a/tests/serverpod_test_server/lib/src/generated/simple_data_map.dart
+++ b/tests/serverpod_test_server/lib/src/generated/simple_data_map.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class SimpleDataMap
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/simple_data_object.dart b/tests/serverpod_test_server/lib/src/generated/simple_data_object.dart
index 55c8c6d3e0..b60176cccf 100644
--- a/tests/serverpod_test_server/lib/src/generated/simple_data_object.dart
+++ b/tests/serverpod_test_server/lib/src/generated/simple_data_object.dart
@@ -10,7 +10,7 @@
 
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
-import 'protocol.dart' as _i2;
+import 'simple_data.dart' as _i2;
 
 abstract class SimpleDataObject
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
diff --git a/tests/serverpod_test_server/lib/src/generated/types.dart b/tests/serverpod_test_server/lib/src/generated/types.dart
index eac32f6c1b..6e6e76703d 100644
--- a/tests/serverpod_test_server/lib/src/generated/types.dart
+++ b/tests/serverpod_test_server/lib/src/generated/types.dart
@@ -11,7 +11,8 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
 import 'dart:typed_data' as _i2;
-import 'protocol.dart' as _i3;
+import 'test_enum.dart' as _i3;
+import 'test_enum_stringified.dart' as _i4;
 
 abstract class Types implements _i1.TableRow, _i1.ProtocolSerialization {
   Types._({
@@ -39,7 +40,7 @@ abstract class Types implements _i1.TableRow, _i1.ProtocolSerialization {
     Duration? aDuration,
     _i1.UuidValue? aUuid,
     _i3.TestEnum? anEnum,
-    _i3.TestEnumStringified? aStringifiedEnum,
+    _i4.TestEnumStringified? aStringifiedEnum,
   }) = _TypesImpl;
 
   factory Types.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -66,7 +67,7 @@ abstract class Types implements _i1.TableRow, _i1.ProtocolSerialization {
           : _i3.TestEnum.fromJson((jsonSerialization['anEnum'] as int)),
       aStringifiedEnum: jsonSerialization['aStringifiedEnum'] == null
           ? null
-          : _i3.TestEnumStringified.fromJson(
+          : _i4.TestEnumStringified.fromJson(
               (jsonSerialization['aStringifiedEnum'] as String)),
     );
   }
@@ -96,7 +97,7 @@ abstract class Types implements _i1.TableRow, _i1.ProtocolSerialization {
 
   _i3.TestEnum? anEnum;
 
-  _i3.TestEnumStringified? aStringifiedEnum;
+  _i4.TestEnumStringified? aStringifiedEnum;
 
   @override
   _i1.Table get table => t;
@@ -112,7 +113,7 @@ abstract class Types implements _i1.TableRow, _i1.ProtocolSerialization {
     Duration? aDuration,
     _i1.UuidValue? aUuid,
     _i3.TestEnum? anEnum,
-    _i3.TestEnumStringified? aStringifiedEnum,
+    _i4.TestEnumStringified? aStringifiedEnum,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -194,7 +195,7 @@ class _TypesImpl extends Types {
     Duration? aDuration,
     _i1.UuidValue? aUuid,
     _i3.TestEnum? anEnum,
-    _i3.TestEnumStringified? aStringifiedEnum,
+    _i4.TestEnumStringified? aStringifiedEnum,
   }) : super._(
           id: id,
           anInt: anInt,
@@ -235,7 +236,7 @@ class _TypesImpl extends Types {
       aDuration: aDuration is Duration? ? aDuration : this.aDuration,
       aUuid: aUuid is _i1.UuidValue? ? aUuid : this.aUuid,
       anEnum: anEnum is _i3.TestEnum? ? anEnum : this.anEnum,
-      aStringifiedEnum: aStringifiedEnum is _i3.TestEnumStringified?
+      aStringifiedEnum: aStringifiedEnum is _i4.TestEnumStringified?
           ? aStringifiedEnum
           : this.aStringifiedEnum,
     );
@@ -306,7 +307,7 @@ class TypesTable extends _i1.Table {
 
   late final _i1.ColumnEnum<_i3.TestEnum> anEnum;
 
-  late final _i1.ColumnEnum<_i3.TestEnumStringified> aStringifiedEnum;
+  late final _i1.ColumnEnum<_i4.TestEnumStringified> aStringifiedEnum;
 
   @override
   List<_i1.Column> get columns => [
diff --git a/tests/serverpod_test_server/lib/src/generated/types_list.dart b/tests/serverpod_test_server/lib/src/generated/types_list.dart
index d13f431ddb..1fc6f567d5 100644
--- a/tests/serverpod_test_server/lib/src/generated/types_list.dart
+++ b/tests/serverpod_test_server/lib/src/generated/types_list.dart
@@ -11,7 +11,9 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
 import 'dart:typed_data' as _i2;
-import 'protocol.dart' as _i3;
+import 'test_enum.dart' as _i3;
+import 'test_enum_stringified.dart' as _i4;
+import 'types.dart' as _i5;
 
 abstract class TypesList
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
@@ -41,10 +43,10 @@ abstract class TypesList
     List<Duration>? aDuration,
     List<_i1.UuidValue>? aUuid,
     List<_i3.TestEnum>? anEnum,
-    List<_i3.TestEnumStringified>? aStringifiedEnum,
-    List<_i3.Types>? anObject,
-    List<Map<String, _i3.Types>>? aMap,
-    List<List<_i3.Types>>? aList,
+    List<_i4.TestEnumStringified>? aStringifiedEnum,
+    List<_i5.Types>? anObject,
+    List<Map<String, _i5.Types>>? aMap,
+    List<List<_i5.Types>>? aList,
   }) = _TypesListImpl;
 
   factory TypesList.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -75,20 +77,20 @@ abstract class TypesList
           ?.map((e) => _i3.TestEnum.fromJson((e as int)))
           .toList(),
       aStringifiedEnum: (jsonSerialization['aStringifiedEnum'] as List?)
-          ?.map((e) => _i3.TestEnumStringified.fromJson((e as String)))
+          ?.map((e) => _i4.TestEnumStringified.fromJson((e as String)))
           .toList(),
       anObject: (jsonSerialization['anObject'] as List?)
-          ?.map((e) => _i3.Types.fromJson((e as Map<String, dynamic>)))
+          ?.map((e) => _i5.Types.fromJson((e as Map<String, dynamic>)))
           .toList(),
       aMap: (jsonSerialization['aMap'] as List?)
           ?.map((e) => (e as Map).map((k, v) => MapEntry(
                 k as String,
-                _i3.Types.fromJson((v as Map<String, dynamic>)),
+                _i5.Types.fromJson((v as Map<String, dynamic>)),
               )))
           .toList(),
       aList: (jsonSerialization['aList'] as List?)
           ?.map((e) => (e as List)
-              .map((e) => _i3.Types.fromJson((e as Map<String, dynamic>)))
+              .map((e) => _i5.Types.fromJson((e as Map<String, dynamic>)))
               .toList())
           .toList(),
     );
@@ -112,13 +114,13 @@ abstract class TypesList
 
   List<_i3.TestEnum>? anEnum;
 
-  List<_i3.TestEnumStringified>? aStringifiedEnum;
+  List<_i4.TestEnumStringified>? aStringifiedEnum;
 
-  List<_i3.Types>? anObject;
+  List<_i5.Types>? anObject;
 
-  List<Map<String, _i3.Types>>? aMap;
+  List<Map<String, _i5.Types>>? aMap;
 
-  List<List<_i3.Types>>? aList;
+  List<List<_i5.Types>>? aList;
 
   TypesList copyWith({
     List<int>? anInt,
@@ -130,10 +132,10 @@ abstract class TypesList
     List<Duration>? aDuration,
     List<_i1.UuidValue>? aUuid,
     List<_i3.TestEnum>? anEnum,
-    List<_i3.TestEnumStringified>? aStringifiedEnum,
-    List<_i3.Types>? anObject,
-    List<Map<String, _i3.Types>>? aMap,
-    List<List<_i3.Types>>? aList,
+    List<_i4.TestEnumStringified>? aStringifiedEnum,
+    List<_i5.Types>? anObject,
+    List<Map<String, _i5.Types>>? aMap,
+    List<List<_i5.Types>>? aList,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -216,10 +218,10 @@ class _TypesListImpl extends TypesList {
     List<Duration>? aDuration,
     List<_i1.UuidValue>? aUuid,
     List<_i3.TestEnum>? anEnum,
-    List<_i3.TestEnumStringified>? aStringifiedEnum,
-    List<_i3.Types>? anObject,
-    List<Map<String, _i3.Types>>? aMap,
-    List<List<_i3.Types>>? aList,
+    List<_i4.TestEnumStringified>? aStringifiedEnum,
+    List<_i5.Types>? anObject,
+    List<Map<String, _i5.Types>>? aMap,
+    List<List<_i5.Types>>? aList,
   }) : super._(
           anInt: anInt,
           aBool: aBool,
@@ -277,13 +279,13 @@ class _TypesListImpl extends TypesList {
       anEnum: anEnum is List<_i3.TestEnum>?
           ? anEnum
           : this.anEnum?.map((e0) => e0).toList(),
-      aStringifiedEnum: aStringifiedEnum is List<_i3.TestEnumStringified>?
+      aStringifiedEnum: aStringifiedEnum is List<_i4.TestEnumStringified>?
           ? aStringifiedEnum
           : this.aStringifiedEnum?.map((e0) => e0).toList(),
-      anObject: anObject is List<_i3.Types>?
+      anObject: anObject is List<_i5.Types>?
           ? anObject
           : this.anObject?.map((e0) => e0.copyWith()).toList(),
-      aMap: aMap is List<Map<String, _i3.Types>>?
+      aMap: aMap is List<Map<String, _i5.Types>>?
           ? aMap
           : this
               .aMap
@@ -296,7 +298,7 @@ class _TypesListImpl extends TypesList {
                         value1.copyWith(),
                       )))
               .toList(),
-      aList: aList is List<List<_i3.Types>>?
+      aList: aList is List<List<_i5.Types>>?
           ? aList
           : this
               .aList
diff --git a/tests/serverpod_test_server/lib/src/generated/types_map.dart b/tests/serverpod_test_server/lib/src/generated/types_map.dart
index bc590f1d18..13dd2dbaf4 100644
--- a/tests/serverpod_test_server/lib/src/generated/types_map.dart
+++ b/tests/serverpod_test_server/lib/src/generated/types_map.dart
@@ -11,7 +11,9 @@
 // ignore_for_file: no_leading_underscores_for_library_prefixes
 import 'package:serverpod/serverpod.dart' as _i1;
 import 'dart:typed_data' as _i2;
-import 'protocol.dart' as _i3;
+import 'test_enum.dart' as _i3;
+import 'test_enum_stringified.dart' as _i4;
+import 'types.dart' as _i5;
 
 abstract class TypesMap
     implements _i1.SerializableModel, _i1.ProtocolSerialization {
@@ -54,10 +56,10 @@ abstract class TypesMap
     Map<Duration, String>? aDurationKey,
     Map<_i1.UuidValue, String>? aUuidKey,
     Map<_i3.TestEnum, String>? anEnumKey,
-    Map<_i3.TestEnumStringified, String>? aStringifiedEnumKey,
-    Map<_i3.Types, String>? anObjectKey,
-    Map<Map<_i3.Types, String>, String>? aMapKey,
-    Map<List<_i3.Types>, String>? aListKey,
+    Map<_i4.TestEnumStringified, String>? aStringifiedEnumKey,
+    Map<_i5.Types, String>? anObjectKey,
+    Map<Map<_i5.Types, String>, String>? aMapKey,
+    Map<List<_i5.Types>, String>? aListKey,
     Map<String, int>? anIntValue,
     Map<String, bool>? aBoolValue,
     Map<String, double>? aDoubleValue,
@@ -67,10 +69,10 @@ abstract class TypesMap
     Map<String, Duration>? aDurationValue,
     Map<String, _i1.UuidValue>? aUuidValue,
     Map<String, _i3.TestEnum>? anEnumValue,
-    Map<String, _i3.TestEnumStringified>? aStringifiedEnumValue,
-    Map<String, _i3.Types>? anObjectValue,
-    Map<String, Map<String, _i3.Types>>? aMapValue,
-    Map<String, List<_i3.Types>>? aListValue,
+    Map<String, _i4.TestEnumStringified>? aStringifiedEnumValue,
+    Map<String, _i5.Types>? anObjectValue,
+    Map<String, Map<String, _i5.Types>>? aMapValue,
+    Map<String, List<_i5.Types>>? aListValue,
   }) = _TypesMapImpl;
 
   factory TypesMap.fromJson(Map<String, dynamic> jsonSerialization) {
@@ -126,41 +128,41 @@ abstract class TypesMap
                     _i3.TestEnum.fromJson((e['k'] as int)): e['v'] as String
                   }),
       aStringifiedEnumKey: (jsonSerialization['aStringifiedEnumKey'] as List?)
-          ?.fold<Map<_i3.TestEnumStringified, String>>(
+          ?.fold<Map<_i4.TestEnumStringified, String>>(
               {},
               (t, e) => {
                     ...t,
-                    _i3.TestEnumStringified.fromJson((e['k'] as String)):
+                    _i4.TestEnumStringified.fromJson((e['k'] as String)):
                         e['v'] as String
                   }),
       anObjectKey: (jsonSerialization['anObjectKey'] as List?)
-          ?.fold<Map<_i3.Types, String>>(
+          ?.fold<Map<_i5.Types, String>>(
               {},
               (t, e) => {
                     ...t,
-                    _i3.Types.fromJson((e['k'] as Map<String, dynamic>)):
+                    _i5.Types.fromJson((e['k'] as Map<String, dynamic>)):
                         e['v'] as String
                   }),
       aMapKey: (jsonSerialization['aMapKey'] as List?)?.fold<
-              Map<Map<_i3.Types, String>, String>>(
+              Map<Map<_i5.Types, String>, String>>(
           {},
           (t, e) => {
                 ...t,
-                (e['k'] as List).fold<Map<_i3.Types, String>>(
+                (e['k'] as List).fold<Map<_i5.Types, String>>(
                     {},
                     (t, e) => {
                           ...t,
-                          _i3.Types.fromJson((e['k'] as Map<String, dynamic>)):
+                          _i5.Types.fromJson((e['k'] as Map<String, dynamic>)):
                               e['v'] as String
                         }): e['v'] as String
               }),
       aListKey: (jsonSerialization['aListKey'] as List?)?.fold<
-              Map<List<_i3.Types>, String>>(
+              Map<List<_i5.Types>, String>>(
           {},
           (t, e) => {
                 ...t,
                 (e['k'] as List)
-                    .map((e) => _i3.Types.fromJson((e as Map<String, dynamic>)))
+                    .map((e) => _i5.Types.fromJson((e as Map<String, dynamic>)))
                     .toList(): e['v'] as String
               }),
       anIntValue:
@@ -212,26 +214,26 @@ abstract class TypesMap
           (jsonSerialization['aStringifiedEnumValue'] as Map?)
               ?.map((k, v) => MapEntry(
                     k as String,
-                    _i3.TestEnumStringified.fromJson((v as String)),
+                    _i4.TestEnumStringified.fromJson((v as String)),
                   )),
       anObjectValue:
           (jsonSerialization['anObjectValue'] as Map?)?.map((k, v) => MapEntry(
                 k as String,
-                _i3.Types.fromJson((v as Map<String, dynamic>)),
+                _i5.Types.fromJson((v as Map<String, dynamic>)),
               )),
       aMapValue:
           (jsonSerialization['aMapValue'] as Map?)?.map((k, v) => MapEntry(
                 k as String,
                 (v as Map).map((k, v) => MapEntry(
                       k as String,
-                      _i3.Types.fromJson((v as Map<String, dynamic>)),
+                      _i5.Types.fromJson((v as Map<String, dynamic>)),
                     )),
               )),
       aListValue:
           (jsonSerialization['aListValue'] as Map?)?.map((k, v) => MapEntry(
                 k as String,
                 (v as List)
-                    .map((e) => _i3.Types.fromJson((e as Map<String, dynamic>)))
+                    .map((e) => _i5.Types.fromJson((e as Map<String, dynamic>)))
                     .toList(),
               )),
     );
@@ -255,13 +257,13 @@ abstract class TypesMap
 
   Map<_i3.TestEnum, String>? anEnumKey;
 
-  Map<_i3.TestEnumStringified, String>? aStringifiedEnumKey;
+  Map<_i4.TestEnumStringified, String>? aStringifiedEnumKey;
 
-  Map<_i3.Types, String>? anObjectKey;
+  Map<_i5.Types, String>? anObjectKey;
 
-  Map<Map<_i3.Types, String>, String>? aMapKey;
+  Map<Map<_i5.Types, String>, String>? aMapKey;
 
-  Map<List<_i3.Types>, String>? aListKey;
+  Map<List<_i5.Types>, String>? aListKey;
 
   Map<String, int>? anIntValue;
 
@@ -281,13 +283,13 @@ abstract class TypesMap
 
   Map<String, _i3.TestEnum>? anEnumValue;
 
-  Map<String, _i3.TestEnumStringified>? aStringifiedEnumValue;
+  Map<String, _i4.TestEnumStringified>? aStringifiedEnumValue;
 
-  Map<String, _i3.Types>? anObjectValue;
+  Map<String, _i5.Types>? anObjectValue;
 
-  Map<String, Map<String, _i3.Types>>? aMapValue;
+  Map<String, Map<String, _i5.Types>>? aMapValue;
 
-  Map<String, List<_i3.Types>>? aListValue;
+  Map<String, List<_i5.Types>>? aListValue;
 
   TypesMap copyWith({
     Map<int, String>? anIntKey,
@@ -299,10 +301,10 @@ abstract class TypesMap
     Map<Duration, String>? aDurationKey,
     Map<_i1.UuidValue, String>? aUuidKey,
     Map<_i3.TestEnum, String>? anEnumKey,
-    Map<_i3.TestEnumStringified, String>? aStringifiedEnumKey,
-    Map<_i3.Types, String>? anObjectKey,
-    Map<Map<_i3.Types, String>, String>? aMapKey,
-    Map<List<_i3.Types>, String>? aListKey,
+    Map<_i4.TestEnumStringified, String>? aStringifiedEnumKey,
+    Map<_i5.Types, String>? anObjectKey,
+    Map<Map<_i5.Types, String>, String>? aMapKey,
+    Map<List<_i5.Types>, String>? aListKey,
     Map<String, int>? anIntValue,
     Map<String, bool>? aBoolValue,
     Map<String, double>? aDoubleValue,
@@ -312,10 +314,10 @@ abstract class TypesMap
     Map<String, Duration>? aDurationValue,
     Map<String, _i1.UuidValue>? aUuidValue,
     Map<String, _i3.TestEnum>? anEnumValue,
-    Map<String, _i3.TestEnumStringified>? aStringifiedEnumValue,
-    Map<String, _i3.Types>? anObjectValue,
-    Map<String, Map<String, _i3.Types>>? aMapValue,
-    Map<String, List<_i3.Types>>? aListValue,
+    Map<String, _i4.TestEnumStringified>? aStringifiedEnumValue,
+    Map<String, _i5.Types>? anObjectValue,
+    Map<String, Map<String, _i5.Types>>? aMapValue,
+    Map<String, List<_i5.Types>>? aListValue,
   });
   @override
   Map<String, dynamic> toJson() {
@@ -460,10 +462,10 @@ class _TypesMapImpl extends TypesMap {
     Map<Duration, String>? aDurationKey,
     Map<_i1.UuidValue, String>? aUuidKey,
     Map<_i3.TestEnum, String>? anEnumKey,
-    Map<_i3.TestEnumStringified, String>? aStringifiedEnumKey,
-    Map<_i3.Types, String>? anObjectKey,
-    Map<Map<_i3.Types, String>, String>? aMapKey,
-    Map<List<_i3.Types>, String>? aListKey,
+    Map<_i4.TestEnumStringified, String>? aStringifiedEnumKey,
+    Map<_i5.Types, String>? anObjectKey,
+    Map<Map<_i5.Types, String>, String>? aMapKey,
+    Map<List<_i5.Types>, String>? aListKey,
     Map<String, int>? anIntValue,
     Map<String, bool>? aBoolValue,
     Map<String, double>? aDoubleValue,
@@ -473,10 +475,10 @@ class _TypesMapImpl extends TypesMap {
     Map<String, Duration>? aDurationValue,
     Map<String, _i1.UuidValue>? aUuidValue,
     Map<String, _i3.TestEnum>? anEnumValue,
-    Map<String, _i3.TestEnumStringified>? aStringifiedEnumValue,
-    Map<String, _i3.Types>? anObjectValue,
-    Map<String, Map<String, _i3.Types>>? aMapValue,
-    Map<String, List<_i3.Types>>? aListValue,
+    Map<String, _i4.TestEnumStringified>? aStringifiedEnumValue,
+    Map<String, _i5.Types>? anObjectValue,
+    Map<String, Map<String, _i5.Types>>? aMapValue,
+    Map<String, List<_i5.Types>>? aListValue,
   }) : super._(
           anIntKey: anIntKey,
           aBoolKey: aBoolKey,
@@ -627,7 +629,7 @@ class _TypesMapImpl extends TypesMap {
                     value0,
                   )),
       aStringifiedEnumKey:
-          aStringifiedEnumKey is Map<_i3.TestEnumStringified, String>?
+          aStringifiedEnumKey is Map<_i4.TestEnumStringified, String>?
               ? aStringifiedEnumKey
               : this.aStringifiedEnumKey?.map((
                     key0,
@@ -637,7 +639,7 @@ class _TypesMapImpl extends TypesMap {
                         key0,
                         value0,
                       )),
-      anObjectKey: anObjectKey is Map<_i3.Types, String>?
+      anObjectKey: anObjectKey is Map<_i5.Types, String>?
           ? anObjectKey
           : this.anObjectKey?.map((
                 key0,
@@ -647,7 +649,7 @@ class _TypesMapImpl extends TypesMap {
                     key0.copyWith(),
                     value0,
                   )),
-      aMapKey: aMapKey is Map<Map<_i3.Types, String>, String>?
+      aMapKey: aMapKey is Map<Map<_i5.Types, String>, String>?
           ? aMapKey
           : this.aMapKey?.map((
                 key0,
@@ -664,7 +666,7 @@ class _TypesMapImpl extends TypesMap {
                         )),
                     value0,
                   )),
-      aListKey: aListKey is Map<List<_i3.Types>, String>?
+      aListKey: aListKey is Map<List<_i5.Types>, String>?
           ? aListKey
           : this.aListKey?.map((
                 key0,
@@ -765,7 +767,7 @@ class _TypesMapImpl extends TypesMap {
                     value0,
                   )),
       aStringifiedEnumValue:
-          aStringifiedEnumValue is Map<String, _i3.TestEnumStringified>?
+          aStringifiedEnumValue is Map<String, _i4.TestEnumStringified>?
               ? aStringifiedEnumValue
               : this.aStringifiedEnumValue?.map((
                     key0,
@@ -775,7 +777,7 @@ class _TypesMapImpl extends TypesMap {
                         key0,
                         value0,
                       )),
-      anObjectValue: anObjectValue is Map<String, _i3.Types>?
+      anObjectValue: anObjectValue is Map<String, _i5.Types>?
           ? anObjectValue
           : this.anObjectValue?.map((
                 key0,
@@ -785,7 +787,7 @@ class _TypesMapImpl extends TypesMap {
                     key0,
                     value0.copyWith(),
                   )),
-      aMapValue: aMapValue is Map<String, Map<String, _i3.Types>>?
+      aMapValue: aMapValue is Map<String, Map<String, _i5.Types>>?
           ? aMapValue
           : this.aMapValue?.map((
                 key0,
@@ -802,7 +804,7 @@ class _TypesMapImpl extends TypesMap {
                           value1.copyWith(),
                         )),
                   )),
-      aListValue: aListValue is Map<String, List<_i3.Types>>?
+      aListValue: aListValue is Map<String, List<_i5.Types>>?
           ? aListValue
           : this.aListValue?.map((
                 key0,
diff --git a/tools/serverpod_cli/lib/src/generator/dart/library_generators/library_generator.dart b/tools/serverpod_cli/lib/src/generator/dart/library_generators/library_generator.dart
index ead3c0d97a..0fe8c544ce 100644
--- a/tools/serverpod_cli/lib/src/generator/dart/library_generators/library_generator.dart
+++ b/tools/serverpod_cli/lib/src/generator/dart/library_generators/library_generator.dart
@@ -43,19 +43,10 @@ class LibraryGenerator {
         .where((model) => !(model is ClassDefinition && model.isSealed))
         .toList();
 
-    String getRef(SerializableModelDefinition classInfo) {
-      if (classInfo is ClassDefinition) {
-        var sealedTopNode = classInfo.sealedTopNode;
-        if (sealedTopNode != null) {
-          return sealedTopNode.fileRef();
-        }
-      }
-      return classInfo.fileRef();
-    }
-
     // exports
     library.directives.addAll([
-      for (var classInfo in topLevelModels) Directive.export(getRef(classInfo)),
+      for (var classInfo in topLevelModels)
+        Directive.export(TypeDefinition.getRef(classInfo)),
       if (!serverCode) Directive.export('client.dart'),
     ]);
 
@@ -129,45 +120,56 @@ class LibraryGenerator {
           const Code('t ??= T;'),
           ...(<Expression, Code>{
             for (var classInfo in unsealedModels)
-              refer(classInfo.className, getRef(classInfo)): Code.scope(
-                  (a) => '${a(refer(classInfo.className, getRef(classInfo)))}'
-                      '.fromJson(data) as T'),
+              refer(
+                  classInfo.className,
+                  TypeDefinition.getRef(
+                      classInfo)): Code.scope((a) =>
+                  '${a(refer(classInfo.className, TypeDefinition.getRef(classInfo)))}'
+                  '.fromJson(data) as T'),
             for (var classInfo in unsealedModels)
               refer('getType', serverpodUrl(serverCode)).call([], {}, [
                 TypeReference(
                   (b) => b
                     ..symbol = classInfo.className
-                    ..url = getRef(classInfo)
+                    ..url = TypeDefinition.getRef(classInfo)
                     ..isNullable = true,
                 )
               ]): Code.scope((a) => '(data!=null?'
-                  '${a(refer(classInfo.className, getRef(classInfo)))}'
+                  '${a(refer(classInfo.className, TypeDefinition.getRef(classInfo)))}'
                   '.fromJson(data) :null) as T'),
           }..addEntries([
                   for (var classInfo in unsealedModels)
+                    // Generate deserialization for fields of models.
                     if (classInfo is ClassDefinition)
                       for (var field in classInfo.fields.where(
                           (field) => field.shouldIncludeField(serverCode)))
                         ...field.type.generateDeserialization(serverCode,
                             config: config),
                   for (var endPoint in protocolDefinition.endpoints)
+                    // Generate deserialization for endpoint methods.
                     for (var method in endPoint.methods) ...[
+                      // Generate deserialization for the return type of the method.
                       ...method.returnType
                           .retrieveGenericType()
                           .generateDeserialization(serverCode, config: config),
+                      // Generate deserialization for parameters of the method.
                       for (var parameter in method.parameters)
                         ...parameter.type.generateDeserialization(serverCode,
                             config: config),
+                      // Generate deserialization for positional parameters of the method.
                       for (var parameter in method.parametersPositional)
                         ...parameter.type.generateDeserialization(serverCode,
                             config: config),
+                      // Generate deserialization for named parameters of the method.
                       for (var parameter in method.parametersNamed)
                         ...parameter.type.generateDeserialization(serverCode,
                             config: config),
                     ],
+                  // Generate deserialization for extra classes.
                   for (var extraClass in config.extraClasses)
                     ...extraClass.generateDeserialization(serverCode,
                         config: config),
+                  // Generate deserialization for extra classes as nullables.
                   for (var extraClass in config.extraClasses)
                     ...extraClass.asNullable
                         .generateDeserialization(serverCode, config: config)
@@ -208,7 +210,7 @@ class LibraryGenerator {
                 'if(data is ${a(extraClass.reference(serverCode, config: config))}) {return \'${extraClass.className}\';}'),
           for (var classInfo in unsealedModels)
             Code.scope((a) =>
-                'if(data is ${a(refer(classInfo.className, getRef(classInfo)))}) {return \'${classInfo.className}\';}'),
+                'if(data is ${a(refer(classInfo.className, TypeDefinition.getRef(classInfo)))}) {return \'${classInfo.className}\';}'),
           if (config.name != 'serverpod' && serverCode)
             _buildGetClassNameForObjectDelegation(
                 serverpodProtocolUrl(serverCode), 'serverpod'),
@@ -234,7 +236,7 @@ class LibraryGenerator {
                 'return deserialize<${a(extraClass.reference(serverCode, config: config))}>(data[\'data\']);}'),
           for (var classInfo in unsealedModels)
             Code.scope((a) => 'if(dataClassName == \'${classInfo.className}\'){'
-                'return deserialize<${a(refer(classInfo.className, getRef(classInfo)))}>(data[\'data\']);}'),
+                'return deserialize<${a(refer(classInfo.className, TypeDefinition.getRef(classInfo)))}>(data[\'data\']);}'),
           if (config.name != 'serverpod' && serverCode)
             _buildDeserializeByClassNameDelegation(
               serverpodProtocolUrl(serverCode),
@@ -277,8 +279,8 @@ class LibraryGenerator {
                     if (classInfo is ClassDefinition &&
                         classInfo.tableName != null)
                       Code.scope((a) =>
-                          'case ${a(refer(classInfo.className, getRef(classInfo)))}:'
-                          'return ${a(refer(classInfo.className, getRef(classInfo)))}.t;'),
+                          'case ${a(refer(classInfo.className, TypeDefinition.getRef(classInfo)))}:'
+                          'return ${a(refer(classInfo.className, TypeDefinition.getRef(classInfo)))}.t;'),
                   const Code('}'),
                 ]),
               const Code('return null;'),
diff --git a/tools/serverpod_cli/lib/src/generator/types.dart b/tools/serverpod_cli/lib/src/generator/types.dart
index 2547489597..65a9199c4a 100644
--- a/tools/serverpod_cli/lib/src/generator/types.dart
+++ b/tools/serverpod_cli/lib/src/generator/types.dart
@@ -24,6 +24,10 @@ class TypeDefinition {
 
   final String? url;
 
+  /// Populated if type is a model that is defined in the project. I.e. not a
+  /// module or serverpod model.
+  final SerializableModelDefinition? projectModelDefinition;
+
   /// Whether this type is nullable.
   final bool nullable;
 
@@ -42,6 +46,7 @@ class TypeDefinition {
     this.dartType,
     this.customClass = false,
     this.enumDefinition,
+    this.projectModelDefinition,
   });
 
   bool get isSerializedValue => autoSerializedTypes.contains(className);
@@ -136,6 +141,7 @@ class TypeDefinition {
         dartType: dartType,
         generics: generics,
         enumDefinition: enumDefinition,
+        projectModelDefinition: projectModelDefinition,
       );
 
   /// Get this [TypeDefinition], but non nullable.
@@ -147,8 +153,19 @@ class TypeDefinition {
         dartType: dartType,
         generics: generics,
         enumDefinition: enumDefinition,
+        projectModelDefinition: projectModelDefinition,
       );
 
+  static String getRef(SerializableModelDefinition model) {
+    if (model is ClassDefinition) {
+      var sealedTopNode = model.sealedTopNode;
+      if (sealedTopNode != null) {
+        return sealedTopNode.fileRef();
+      }
+    }
+    return model.fileRef();
+  }
+
   /// Generate a [TypeReference] from this definition.
   TypeReference reference(
     bool serverCode, {
@@ -188,8 +205,16 @@ class TypeDefinition {
               '/${split[1]}';
         } else if (url == defaultModuleAlias) {
           // protocol: reference
-          t.url = p.posix
-              .joinAll([...subDirParts.map((e) => '..'), 'protocol.dart']);
+          var localProjectModelDefinition = projectModelDefinition;
+          String reference = switch (localProjectModelDefinition) {
+            // Import model directly
+            SerializableModelDefinition modelDefinition =>
+              getRef(modelDefinition),
+            // Import model through generated protocol file
+            null => 'protocol.dart',
+          };
+
+          t.url = p.posix.joinAll([...subDirParts.map((e) => '..'), reference]);
         } else if (!serverCode &&
             (url?.startsWith('package:${config.serverPackage}') ?? false)) {
           // import from the server package
@@ -408,20 +433,23 @@ class TypeDefinition {
   /// protocol: prefix in types. Whenever no url is set and user specified a
   /// class/enum with the same symbol name it defaults to the protocol: prefix.
   TypeDefinition applyProtocolReferences(
-      List<SerializableModelDefinition> classDefinitions) {
+    List<SerializableModelDefinition> classDefinitions,
+  ) {
+    var modelDefinition =
+        classDefinitions.where((c) => c.className == className).firstOrNull;
+    bool isProjectModel =
+        url == defaultModuleAlias || (url == null && modelDefinition != null);
     return TypeDefinition(
         className: className,
         nullable: nullable,
         customClass: customClass,
         dartType: dartType,
+        projectModelDefinition: isProjectModel ? modelDefinition : null,
         generics: generics
             .map((e) => e.applyProtocolReferences(classDefinitions))
             .toList(),
         enumDefinition: enumDefinition,
-        url:
-            url == null && classDefinitions.any((c) => c.className == className)
-                ? defaultModuleAlias
-                : url);
+        url: isProjectModel ? defaultModuleAlias : url);
   }
 
   /// converts '[className]' string value to [ValueType]
diff --git a/tools/serverpod_cli/lib/src/test_util/builders/type_definition_builder.dart b/tools/serverpod_cli/lib/src/test_util/builders/type_definition_builder.dart
index b6edc2b875..1b8889dab8 100644
--- a/tools/serverpod_cli/lib/src/test_util/builders/type_definition_builder.dart
+++ b/tools/serverpod_cli/lib/src/test_util/builders/type_definition_builder.dart
@@ -9,6 +9,7 @@ class TypeDefinitionBuilder {
   DartType? _dartType;
   bool _customClass;
   EnumDefinition? _enumDefinition;
+  SerializableModelDefinition? _modelDefinition;
 
   TypeDefinitionBuilder()
       : _className = 'DefaultClassName',
@@ -16,7 +17,8 @@ class TypeDefinitionBuilder {
         _nullable = false,
         _url = null,
         _dartType = null,
-        _customClass = false;
+        _customClass = false,
+        _modelDefinition = null;
 
   TypeDefinitionBuilder withClassName(String className) {
     _className = className;
@@ -48,12 +50,23 @@ class TypeDefinitionBuilder {
     return this;
   }
 
-  TypeDefinitionBuilder withListOf(String className, [bool nullable = false]) {
+  TypeDefinitionBuilder withListOf(
+    String className, {
+    bool nullable = false,
+    String? url,
+    SerializableModelDefinition? modelInfo,
+  }) {
     _className = 'List';
-    _generics.add(TypeDefinitionBuilder()
+    var generic = TypeDefinitionBuilder()
         .withClassName(className)
         .withNullable(nullable)
-        .build());
+        .withUrl(url);
+
+    if (modelInfo != null) {
+      generic.withModelDefinition(modelInfo);
+    }
+
+    _generics.add(generic.build());
     return this;
   }
 
@@ -96,6 +109,13 @@ class TypeDefinitionBuilder {
     return this;
   }
 
+  TypeDefinitionBuilder withModelDefinition(
+    SerializableModelDefinition modelDefinition,
+  ) {
+    _modelDefinition = modelDefinition;
+    return this;
+  }
+
   TypeDefinition build() {
     return TypeDefinition(
       className: _className,
@@ -105,6 +125,7 @@ class TypeDefinitionBuilder {
       dartType: _dartType,
       customClass: _customClass,
       enumDefinition: _enumDefinition,
+      projectModelDefinition: _modelDefinition,
     );
   }
 }
diff --git a/tools/serverpod_cli/test/analyzer/models/stateful_analyzer/model_validation/field/field_datatype_test.dart b/tools/serverpod_cli/test/analyzer/models/stateful_analyzer/model_validation/field/field_datatype_test.dart
index a89668080d..e1635a4cf3 100644
--- a/tools/serverpod_cli/test/analyzer/models/stateful_analyzer/model_validation/field/field_datatype_test.dart
+++ b/tools/serverpod_cli/test/analyzer/models/stateful_analyzer/model_validation/field/field_datatype_test.dart
@@ -61,6 +61,64 @@ void main() {
       });
     }
 
+    group('Given a class with a field containing another model', () {
+      var containedClassName = 'User';
+      var testClassName = 'Example';
+      var models = [
+        ModelSourceBuilder().withFileName('user.spy.yaml').withYaml(
+          '''
+class: $containedClassName
+fields:
+  nickname: String
+          ''',
+        ).build(),
+        ModelSourceBuilder().withYaml(
+          '''
+class: $testClassName
+fields:
+  user: User 
+          ''',
+        ).build()
+      ];
+
+      var collector = CodeGenerationCollector();
+      StatefulAnalyzer analyzer = StatefulAnalyzer(
+        config,
+        models,
+        onErrorsCollector(collector),
+      );
+      var definitions = analyzer.validateAll();
+
+      test('then no errors was generated', () {
+        expect(collector.errors, isEmpty);
+      });
+
+      var testClassDefinition = definitions
+          .whereType<ClassDefinition>()
+          .where((e) => e.className == testClassName)
+          .firstOrNull;
+
+      test('then model definition is created for class.', () {
+        expect(testClassDefinition, isNotNull);
+      });
+
+      test('then class field type has referenced model name.', () {
+        expect(testClassDefinition?.fields.first.type.className,
+            containedClassName);
+      });
+
+      test('then field type has url set to protocol', () {
+        expect(testClassDefinition?.fields.first.type.url, 'protocol');
+      });
+
+      test('then field type has projectModelDefinition set', () {
+        expect(
+          testClassDefinition?.fields.first.type.projectModelDefinition,
+          isNotNull,
+        );
+      });
+    });
+
     group('Given a class with a field with a module type', () {
       var models = [
         ModelSourceBuilder().withModuleAlias('auth').withYaml(
@@ -92,12 +150,20 @@ void main() {
         expect(collector.errors, isEmpty);
       });
 
-      test(
-          'then a class with that field type set to module:auth:UserInfo is generated.',
-          () {
+      test('then field type has module model class name.', () {
         var definition = definitions.first as ClassDefinition;
         expect(definition.fields.first.type.className, 'UserInfo');
       });
+
+      test('then field type has url set to module:auth', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(definition.fields.first.type.url, 'module:auth');
+      });
+
+      test('then field type does not have projectModelDefinition set', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(definition.fields.first.type.projectModelDefinition, isNull);
+      });
     });
 
     group(
@@ -133,10 +199,20 @@ void main() {
         expect(collector.errors, isEmpty);
       });
 
-      test('then the class name is the one defined in serverpod.', () {
+      test('then field type has serverpod model class name.', () {
         var definition = definitions.first as ClassDefinition;
         expect(definition.fields.first.type.className, 'ServerpodClass');
       });
+
+      test('then field type has url set to module:serverpod', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(definition.fields.first.type.url, 'module:serverpod');
+      });
+
+      test('then field type does not have projectModelDefinition set', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(definition.fields.first.type.projectModelDefinition, isNull);
+      });
     });
 
     group(
@@ -172,10 +248,20 @@ void main() {
         expect(collector.errors, isEmpty);
       });
 
-      test('then the class name is the one defined in serverpod.', () {
+      test('then field type has serverpod model class name.', () {
         var definition = definitions.first as ClassDefinition;
         expect(definition.fields.first.type.className, 'ServerpodClass');
       });
+
+      test('then field type has url set to serverpod', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(definition.fields.first.type.url, 'serverpod');
+      });
+
+      test('then field type does not have projectModelDefinition set', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(definition.fields.first.type.projectModelDefinition, isNull);
+      });
     });
 
     test(
@@ -292,6 +378,11 @@ void main() {
           'dart:typed_data:ByteData',
         );
       });
+
+      test('then field type does not have projectModelDefinition set', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(definition.fields.first.type.projectModelDefinition, isNull);
+      });
     });
 
     group('Given a class with a field with the type MyEnum', () {
@@ -334,11 +425,14 @@ void main() {
         var definition = definitions.first as ClassDefinition;
         expect(definition.fields.first.type.isEnumType, isTrue);
       });
+
+      test('then the type has projectModelDefinition', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(definition.fields.first.type.projectModelDefinition, isNotNull);
+      });
     });
 
-    test(
-        'Given a class with a field with the type List<MyEnum> then the nested type is tagged as an enum',
-        () {
+    group('Given a class with a field with the type List<MyEnum>', () {
       var models = [
         ModelSourceBuilder().withFileName('example').withYaml(
           '''
@@ -365,11 +459,21 @@ void main() {
       );
       var definitions = analyzer.validateAll();
 
-      var definition = definitions.first as ClassDefinition;
-      expect(
-        definition.fields.first.type.generics.first.isEnumType,
-        isTrue,
-      );
+      test('then the nested type is tagged as an enum', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(
+          definition.fields.first.type.generics.first.isEnumType,
+          isTrue,
+        );
+      });
+
+      test('then the nested type has projectModelDefinition set', () {
+        var definition = definitions.first as ClassDefinition;
+        expect(
+          definition.fields.first.type.generics.first.projectModelDefinition,
+          isNotNull,
+        );
+      });
     });
 
     test(
@@ -1086,6 +1190,11 @@ void main() {
       var definition = definitions.first as ClassDefinition;
       expect(definition.fields.first.type.nullable, isFalse);
     });
+
+    test('then field type does not have projectModelDefinition set', () {
+      var definition = definitions.first as ClassDefinition;
+      expect(definition.fields.first.type.projectModelDefinition, isNull);
+    });
   });
 
   group(
diff --git a/tools/serverpod_cli/test/generator/dart/client_code_generator/protocol/protocol_test.dart b/tools/serverpod_cli/test/generator/dart/client_code_generator/protocol/protocol_test.dart
index 2eb6021036..01dab92c9c 100644
--- a/tools/serverpod_cli/test/generator/dart/client_code_generator/protocol/protocol_test.dart
+++ b/tools/serverpod_cli/test/generator/dart/client_code_generator/protocol/protocol_test.dart
@@ -6,7 +6,10 @@ import 'package:serverpod_cli/src/test_util/builders/class_definition_builder.da
 import 'package:serverpod_cli/src/test_util/builders/endpoint_definition_builder.dart';
 import 'package:serverpod_cli/src/test_util/builders/generator_config_builder.dart';
 import 'package:serverpod_cli/src/test_util/builders/method_definition_builder.dart';
+import 'package:serverpod_cli/src/test_util/builders/parameter_definition_builder.dart';
+import 'package:serverpod_cli/src/test_util/builders/serializable_entity_field_definition_builder.dart';
 import 'package:serverpod_cli/src/test_util/builders/type_definition_builder.dart';
+import 'package:serverpod_cli/src/util/model_helper.dart';
 import 'package:test/test.dart';
 
 const projectName = 'example_project';
@@ -166,4 +169,236 @@ void main() {
       },
     );
   });
+
+  group(
+      'Given a model with a field with list of other model when generating protocol files',
+      () {
+    var testModelName = 'TestModel';
+    var testModelFileName = 'test_model.dart';
+    var modelWithListName = 'modelWithList';
+    var modelWithListFileName = 'model_with_list.dart';
+    var testModel = ClassDefinitionBuilder()
+        .withClassName(testModelName)
+        .withFileName(testModelFileName)
+        .build();
+    var models = [
+      testModel,
+      ClassDefinitionBuilder()
+          .withClassName(modelWithListName)
+          .withFileName(modelWithListFileName)
+          .withField(
+            FieldDefinitionBuilder()
+                .withName('model')
+                .withType(TypeDefinitionBuilder()
+                    .withListOf(
+                      testModelName,
+                      url: defaultModuleAlias,
+                      modelInfo: testModel,
+                    )
+                    .build())
+                .build(),
+          )
+          .build()
+    ];
+
+    var protocolDefinition = ProtocolDefinition(endpoints: [], models: models);
+
+    var codeMap = generator.generateProtocolCode(
+      protocolDefinition: protocolDefinition,
+      config: config,
+    );
+
+    test(
+      'then the protocol.dart file is created.',
+      () {
+        expect(codeMap[expectedFileName], isNotNull);
+      },
+    );
+
+    test(
+      'then the protocol.dart does not contain import to itself.',
+      () {
+        expect(
+          codeMap[expectedFileName],
+          isNot(contains("import 'protocol.dart' as")),
+        );
+      },
+    );
+  });
+
+  group(
+      'Given an endpoint that takes a list of models as a parameter when generating protocol files',
+      () {
+    var testModelName = 'TestModel';
+    var testModelFileName = 'test_model.dart';
+    var models = [
+      ClassDefinitionBuilder()
+          .withClassName(testModelName)
+          .withFileName(testModelFileName)
+          .build(),
+    ];
+
+    var endpoints = [
+      EndpointDefinitionBuilder().withMethods([
+        MethodDefinitionBuilder().withName('myEndpoint').withParameters([
+          ParameterDefinitionBuilder()
+              .withType(
+                  TypeDefinitionBuilder().withClassName('List').withGenerics([
+                TypeDefinitionBuilder()
+                    .withClassName(testModelName)
+                    .withNullable(false)
+                    .withUrl(defaultModuleAlias)
+                    .withModelDefinition(models.first)
+                    .build()
+              ]).build())
+              .build()
+        ]).buildMethodCallDefinition()
+      ]).build()
+    ];
+
+    var protocolDefinition = ProtocolDefinition(
+      endpoints: endpoints,
+      models: models,
+    );
+
+    var codeMap = generator.generateProtocolCode(
+      protocolDefinition: protocolDefinition,
+      config: config,
+    );
+
+    test(
+      'then the protocol.dart file is created.',
+      () {
+        expect(codeMap[expectedFileName], isNotNull);
+      },
+    );
+
+    test(
+      'then the protocol.dart does not contain import to itself.',
+      () {
+        expect(
+          codeMap[expectedFileName],
+          isNot(contains("import 'protocol.dart' as")),
+        );
+      },
+    );
+  });
+
+  group(
+      'Given an endpoint that takes a list of models as a named parameter when generating protocol files',
+      () {
+    var testModelName = 'TestModel';
+    var testModelFileName = 'test_model.dart';
+    var models = [
+      ClassDefinitionBuilder()
+          .withClassName(testModelName)
+          .withFileName(testModelFileName)
+          .build(),
+    ];
+
+    var endpoints = [
+      EndpointDefinitionBuilder().withMethods([
+        MethodDefinitionBuilder().withName('myEndpoint').withParametersNamed([
+          ParameterDefinitionBuilder()
+              .withType(
+                  TypeDefinitionBuilder().withClassName('List').withGenerics([
+                TypeDefinitionBuilder()
+                    .withClassName(testModelName)
+                    .withNullable(false)
+                    .withUrl(defaultModuleAlias)
+                    .withModelDefinition(models.first)
+                    .build()
+              ]).build())
+              .build()
+        ]).buildMethodCallDefinition()
+      ]).build()
+    ];
+
+    var protocolDefinition = ProtocolDefinition(
+      endpoints: endpoints,
+      models: models,
+    );
+
+    var codeMap = generator.generateProtocolCode(
+      protocolDefinition: protocolDefinition,
+      config: config,
+    );
+
+    test(
+      'then the protocol.dart file is created.',
+      () {
+        expect(codeMap[expectedFileName], isNotNull);
+      },
+    );
+
+    test(
+      'then the protocol.dart does not contain import to itself.',
+      () {
+        expect(
+          codeMap[expectedFileName],
+          isNot(contains("import 'protocol.dart' as")),
+        );
+      },
+    );
+  });
+
+  group(
+      'Given an endpoint that takes a list of models as a named parameter when generating protocol files',
+      () {
+    var testModelName = 'TestModel';
+    var testModelFileName = 'test_model.dart';
+    var models = [
+      ClassDefinitionBuilder()
+          .withClassName(testModelName)
+          .withFileName(testModelFileName)
+          .build(),
+    ];
+
+    var endpoints = [
+      EndpointDefinitionBuilder().withMethods([
+        MethodDefinitionBuilder()
+            .withName('myEndpoint')
+            .withParametersPositional([
+          ParameterDefinitionBuilder()
+              .withType(
+                  TypeDefinitionBuilder().withClassName('List').withGenerics([
+                TypeDefinitionBuilder()
+                    .withClassName(testModelName)
+                    .withNullable(false)
+                    .withUrl(defaultModuleAlias)
+                    .withModelDefinition(models.first)
+                    .build()
+              ]).build())
+              .build()
+        ]).buildMethodCallDefinition()
+      ]).build()
+    ];
+
+    var protocolDefinition = ProtocolDefinition(
+      endpoints: endpoints,
+      models: models,
+    );
+
+    var codeMap = generator.generateProtocolCode(
+      protocolDefinition: protocolDefinition,
+      config: config,
+    );
+
+    test(
+      'then the protocol.dart file is created.',
+      () {
+        expect(codeMap[expectedFileName], isNotNull);
+      },
+    );
+
+    test(
+      'then the protocol.dart does not contain import to itself.',
+      () {
+        expect(
+          codeMap[expectedFileName],
+          isNot(contains("import 'protocol.dart' as")),
+        );
+      },
+    );
+  });
 }
diff --git a/tools/serverpod_cli/test/generator/dart/server_code_generator/protocol/protocol_test.dart b/tools/serverpod_cli/test/generator/dart/server_code_generator/protocol/protocol_test.dart
index 75e166fd3f..4e29dbb51c 100644
--- a/tools/serverpod_cli/test/generator/dart/server_code_generator/protocol/protocol_test.dart
+++ b/tools/serverpod_cli/test/generator/dart/server_code_generator/protocol/protocol_test.dart
@@ -6,7 +6,10 @@ import 'package:serverpod_cli/src/test_util/builders/class_definition_builder.da
 import 'package:serverpod_cli/src/test_util/builders/endpoint_definition_builder.dart';
 import 'package:serverpod_cli/src/test_util/builders/generator_config_builder.dart';
 import 'package:serverpod_cli/src/test_util/builders/method_definition_builder.dart';
+import 'package:serverpod_cli/src/test_util/builders/parameter_definition_builder.dart';
+import 'package:serverpod_cli/src/test_util/builders/serializable_entity_field_definition_builder.dart';
 import 'package:serverpod_cli/src/test_util/builders/type_definition_builder.dart';
+import 'package:serverpod_cli/src/util/model_helper.dart';
 import 'package:test/test.dart';
 
 const projectName = 'example_project';
@@ -69,4 +72,296 @@ void main() {
       },
     );
   });
+
+  group(
+      'Given a model with a field with list of other model when generating protocol files',
+      () {
+    var testModelName = 'TestModel';
+    var testModelFileName = 'test_model.dart';
+    var modelWithListName = 'modelWithList';
+    var modelWithListFileName = 'model_with_list.dart';
+    var testModel = ClassDefinitionBuilder()
+        .withClassName(testModelName)
+        .withFileName(testModelFileName)
+        .build();
+    var models = [
+      testModel,
+      ClassDefinitionBuilder()
+          .withClassName(modelWithListName)
+          .withFileName(modelWithListFileName)
+          .withField(
+            FieldDefinitionBuilder()
+                .withName('model')
+                .withType(TypeDefinitionBuilder()
+                    .withListOf(
+                      testModelName,
+                      url: defaultModuleAlias,
+                      modelInfo: testModel,
+                    )
+                    .build())
+                .build(),
+          )
+          .build()
+    ];
+
+    var protocolDefinition = ProtocolDefinition(endpoints: [], models: models);
+
+    var codeMap = generator.generateProtocolCode(
+      protocolDefinition: protocolDefinition,
+      config: config,
+    );
+
+    test(
+      'then the protocol.dart file is created.',
+      () {
+        expect(codeMap[expectedFileName], isNotNull);
+      },
+    );
+
+    test(
+      'then the protocol.dart does not contain import to itself.',
+      () {
+        expect(
+          codeMap[expectedFileName],
+          isNot(contains("import 'protocol.dart' as")),
+        );
+      },
+    );
+  });
+
+  group(
+      'Given an endpoint that returns a list of models when generating protocol files',
+      () {
+    var testModelName = 'TestModel';
+    var testModelFileName = 'test_model.dart';
+    var models = [
+      ClassDefinitionBuilder()
+          .withClassName(testModelName)
+          .withFileName(testModelFileName)
+          .build(),
+    ];
+
+    var endpoints = [
+      EndpointDefinitionBuilder().withMethods([
+        MethodDefinitionBuilder()
+            .withName('myEndpoint')
+            .withReturnType(
+              TypeDefinitionBuilder().withClassName('Future').withGenerics([
+                TypeDefinitionBuilder().withClassName('List').withGenerics([
+                  TypeDefinitionBuilder()
+                      .withClassName(testModelName)
+                      .withNullable(false)
+                      .withUrl(defaultModuleAlias)
+                      .withModelDefinition(models.first)
+                      .build()
+                ]).build(),
+              ]).build(),
+            )
+            .buildMethodCallDefinition()
+      ]).build()
+    ];
+
+    var protocolDefinition = ProtocolDefinition(
+      endpoints: endpoints,
+      models: models,
+    );
+
+    var codeMap = generator.generateProtocolCode(
+      protocolDefinition: protocolDefinition,
+      config: config,
+    );
+
+    test(
+      'then the protocol.dart file is created.',
+      () {
+        expect(codeMap[expectedFileName], isNotNull);
+      },
+    );
+
+    test(
+      'then the protocol.dart does not contain import to itself.',
+      () {
+        expect(
+          codeMap[expectedFileName],
+          isNot(contains("import 'protocol.dart' as")),
+        );
+      },
+    );
+  });
+
+  group(
+      'Given an endpoint that takes a list of models as a parameter when generating protocol files',
+      () {
+    var testModelName = 'TestModel';
+    var testModelFileName = 'test_model.dart';
+    var models = [
+      ClassDefinitionBuilder()
+          .withClassName(testModelName)
+          .withFileName(testModelFileName)
+          .build(),
+    ];
+
+    var endpoints = [
+      EndpointDefinitionBuilder().withMethods([
+        MethodDefinitionBuilder().withName('myEndpoint').withParameters([
+          ParameterDefinitionBuilder()
+              .withType(
+                  TypeDefinitionBuilder().withClassName('List').withGenerics([
+                TypeDefinitionBuilder()
+                    .withClassName(testModelName)
+                    .withNullable(false)
+                    .withUrl(defaultModuleAlias)
+                    .withModelDefinition(models.first)
+                    .build()
+              ]).build())
+              .build()
+        ]).buildMethodCallDefinition()
+      ]).build()
+    ];
+
+    var protocolDefinition = ProtocolDefinition(
+      endpoints: endpoints,
+      models: models,
+    );
+
+    var codeMap = generator.generateProtocolCode(
+      protocolDefinition: protocolDefinition,
+      config: config,
+    );
+
+    test(
+      'then the protocol.dart file is created.',
+      () {
+        expect(codeMap[expectedFileName], isNotNull);
+      },
+    );
+
+    test(
+      'then the protocol.dart does not contain import to itself.',
+      () {
+        expect(
+          codeMap[expectedFileName],
+          isNot(contains("import 'protocol.dart' as")),
+        );
+      },
+    );
+  });
+
+  group(
+      'Given an endpoint that takes a list of models as a named parameter when generating protocol files',
+      () {
+    var testModelName = 'TestModel';
+    var testModelFileName = 'test_model.dart';
+    var models = [
+      ClassDefinitionBuilder()
+          .withClassName(testModelName)
+          .withFileName(testModelFileName)
+          .build(),
+    ];
+
+    var endpoints = [
+      EndpointDefinitionBuilder().withMethods([
+        MethodDefinitionBuilder().withName('myEndpoint').withParametersNamed([
+          ParameterDefinitionBuilder()
+              .withType(
+                  TypeDefinitionBuilder().withClassName('List').withGenerics([
+                TypeDefinitionBuilder()
+                    .withClassName(testModelName)
+                    .withNullable(false)
+                    .withUrl(defaultModuleAlias)
+                    .withModelDefinition(models.first)
+                    .build()
+              ]).build())
+              .build()
+        ]).buildMethodCallDefinition()
+      ]).build()
+    ];
+
+    var protocolDefinition = ProtocolDefinition(
+      endpoints: endpoints,
+      models: models,
+    );
+
+    var codeMap = generator.generateProtocolCode(
+      protocolDefinition: protocolDefinition,
+      config: config,
+    );
+
+    test(
+      'then the protocol.dart file is created.',
+      () {
+        expect(codeMap[expectedFileName], isNotNull);
+      },
+    );
+
+    test(
+      'then the protocol.dart does not contain import to itself.',
+      () {
+        expect(
+          codeMap[expectedFileName],
+          isNot(contains("import 'protocol.dart' as")),
+        );
+      },
+    );
+  });
+
+  group(
+      'Given an endpoint that takes a list of models as a named parameter when generating protocol files',
+      () {
+    var testModelName = 'TestModel';
+    var testModelFileName = 'test_model.dart';
+    var models = [
+      ClassDefinitionBuilder()
+          .withClassName(testModelName)
+          .withFileName(testModelFileName)
+          .build(),
+    ];
+
+    var endpoints = [
+      EndpointDefinitionBuilder().withMethods([
+        MethodDefinitionBuilder()
+            .withName('myEndpoint')
+            .withParametersPositional([
+          ParameterDefinitionBuilder()
+              .withType(
+                  TypeDefinitionBuilder().withClassName('List').withGenerics([
+                TypeDefinitionBuilder()
+                    .withClassName(testModelName)
+                    .withNullable(false)
+                    .withUrl(defaultModuleAlias)
+                    .withModelDefinition(models.first)
+                    .build()
+              ]).build())
+              .build()
+        ]).buildMethodCallDefinition()
+      ]).build()
+    ];
+
+    var protocolDefinition = ProtocolDefinition(
+      endpoints: endpoints,
+      models: models,
+    );
+
+    var codeMap = generator.generateProtocolCode(
+      protocolDefinition: protocolDefinition,
+      config: config,
+    );
+
+    test(
+      'then the protocol.dart file is created.',
+      () {
+        expect(codeMap[expectedFileName], isNotNull);
+      },
+    );
+
+    test(
+      'then the protocol.dart does not contain import to itself.',
+      () {
+        expect(
+          codeMap[expectedFileName],
+          isNot(contains("import 'protocol.dart' as")),
+        );
+      },
+    );
+  });
 }
